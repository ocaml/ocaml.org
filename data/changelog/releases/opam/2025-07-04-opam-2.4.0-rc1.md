---
title: opam 2.4.0~rc1
tags:
- opam
- platform
authors:
- kit-ty-kate
contributors:
changelog: |
    ## Changes
    
    *   Fix `opam switch create <version>` when all compilers of that version are flagged with `avoid-version` \[[#6571](https://github.com/ocaml/opam/pull/6571) [@rjbou](https://github.com/rjbou) - fix [#6563](https://github.com/ocaml/opam/issues/6563)\]
    *   Opam update performance: No longer copy VCS directories when adding or updating local non-VCS repositories \[[#6575](https://github.com/ocaml/opam/pull/6575) [@kit-ty-kate](https://github.com/kit-ty-kate) - fix [#6560](https://github.com/ocaml/opam/issues/6560)\]
    *   Do not remove the generated patch file during updates when debug-mode is on \[[#6575](https://github.com/ocaml/opam/pull/6575) [@kit-ty-kate](https://github.com/kit-ty-kate)\]

    ### Release script

    *   Switch the host of qemu-base-images from gitlab to github \[[#6510](https://github.com/ocaml/opam/pull/6510) [@kit-ty-kate](https://github.com/kit-ty-kate)\]
    *   Speedup the initial clone of qemu-base-images when missing \[[#6510](https://github.com/ocaml/opam/pull/6510) [@kit-ty-kate](https://github.com/kit-ty-kate)\]
    *   Update some of the platforms the prebuilt binaries are built on to Alpine 2.21, FreeBSD 14.3, OpenBSD 7.7 and NetBSD 10.1 \[[#6510](https://github.com/ocaml/opam/pull/6510) [@kit-ty-kate](https://github.com/kit-ty-kate)\]

    ### Build changes

    *   Use coreutils' `sha512sum` instead of perl's `shasum` utility when using `./configure --with-cygwin-setup` \[[#6566](https://github.com/ocaml/opam/pull/6566) [@kit-ty-kate](https://github.com/kit-ty-kate) - fix [#6557](https://github.com/ocaml/opam/issues/6557)\]
    *   Upgrade the download-if-missing dependencies to `dune 3.19.1`, `opam-file-format 2.2.0`, `spdx_licenses 1.4.0` and `patch 3.0.0` \[[#6580](https://github.com/ocaml/opam/pull/6580) [@kit-ty-kate](https://github.com/kit-ty-kate)\]

    ### Testing and documentation

    *   Improve and extend the testsuite \[[#6473](https://github.com/ocaml/opam/pull/6473) [#6571](https://github.com/ocaml/opam/pull/6571) [@rjbou](https://github.com/rjbou) [@kit-ty-kate](https://github.com/kit-ty-kate)\]
    *   Improve and extend the test infrastructure \[[#6575](https://github.com/ocaml/opam/pull/6575) [@kit-ty-kate](https://github.com/kit-ty-kate)\]

    ## API updates

    ### opam-format

    *   `OpamLocal`: `fetch_repo_update` no longer copies vcs directories \[[#6575](https://github.com/ocaml/opam/pull/6575) [@kit-ty-kate](https://github.com/kit-ty-kate)\]

    ### opam-core

    *   `OpamSystem`: Add `copy_dir_except_vcs` \[[#6575](https://github.com/ocaml/opam/pull/6575) [@kit-ty-kate](https://github.com/kit-ty-kate)\]
    *   `OpamSystem`: Add `get_files_except_vcs` \[[#6575](https://github.com/ocaml/opam/pull/6575) [@kit-ty-kate](https://github.com/kit-ty-kate)\]
versions:
unstable: true
ignore: false
github_release_tags:
- 2.4.0-rc1
---

This is the first release candidate of opam 2.4.0.

Binaries and full archive are signed by the [opam dev team](https://opam.ocaml.org/opam-dev-pubkey.pgp) (fingerprint `92C5 26AE 50DF 3947 0EB2 911B ED4C F1CA 67CB AA92`).

Please see our [blog post](https://opam.ocaml.org/blog/opam-2-4-0-rc1) for a highlight on the major changes and upgrade instructions.

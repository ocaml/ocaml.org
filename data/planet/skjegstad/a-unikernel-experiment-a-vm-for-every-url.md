---
title: 'A unikernel experiment: A VM for every URL'
description:
url: http://www.skjegstad.com/blog/2015/03/25/mirageos-vm-per-url-experiment/
date: 2015-03-25T00:00:00-00:00
preview_image:
featured:
authors:
- Magnus Skjegstad
---

<p>I recently wrote a DNS server that can boot unikernels on demand called <a href="https://github.com/MagnusS/jitsu">Jitsu</a>. The following diagram shows a simplified version of how Jitsu works. The client sends a DNS query to a DNS server (Jitsu). The DNS server starts a unikernel and sends a DNS response back to the client while the unikernel is booting. When the client receives the DNS response it opens a TCP connection to the unikernel, which now has completed booting and is ready to respond to the TCP connection.</p>
<p><img src="http://www.skjegstad.com/images/blog/jitsu/jitsu.jpg" class="center"/></p>
<p>The unikernels are built using <a href="http://www.openmirage.org">MirageOS</a>, a library operating system that allows applications to be compiled directly to small Xen VMs. These unikernels only include the operating system components the application needs - nothing else is added. This results in very small VMs with low resource requirements that boot quickly. </p>
<p>Now, what if I wanted to use Jitsu to boot my unikernel website when someone accesses it? My website is fairly low traffic, so this could potentially save me some resource use and hosting costs. Unfortunately, there are always a few requests per hour to some of the more popular sections, which likely would make my unikernel run most of the time. But what if I could split my unikernel into even smaller unikernels? What if I went to an extreme and had one unikernel per URL? Then I could only boot unikernels for the URLs that are being used and they would only need to know how to serve a single page. This could also have a number of benefits, such as the ability to spin up multiple unikernels for an extremely popular web page and use DNS to direct clients to the unikernel that is closest to them &mdash; while keeping the rest of the site inactive (let's ignore web crawlers for now). If I had dynamic sections of my website there could also be security benefits: Every dynamic page would run as a separate VM. An attack on a single page would not have to bring down the rest of the site nor reveal any data stored in other unikernels.</p>


<p>As an experiment, I wanted to see if I could run <em>every</em> URL hosted under my domain as a separate virtual machine. The goal was to map each URL to a domain name, which in turn was directed to a separate VM running a web server that hosts a single page. For example, the URL http://www.skjegstad.com/index.html becomes http://index.html.www.skjegstad.com/.  Each domain is then mapped to a single IPv4 address on my local network.</p>
<p>Here is an abstract from the DNS zone file.</p>
<div class="highlight"><pre><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>    <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.10</span>
<span class="n">images</span><span class="p">.</span><span class="n">profile</span><span class="p">.</span><span class="n">jpg</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>    <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.11</span>
<span class="n">ardrone</span><span class="o">-</span><span class="n">experiment</span><span class="o">-</span><span class="mf">1.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">ardrone</span><span class="o">-</span><span class="n">test</span><span class="p">.</span><span class="n">m4v</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span> <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.12</span>
<span class="n">ardrone</span><span class="o">-</span><span class="n">experiment</span><span class="o">-</span><span class="mf">1.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">camera</span><span class="o">-</span><span class="mf">33.</span><span class="n">jpg</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>    <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.13</span>
<span class="n">ardrone</span><span class="o">-</span><span class="n">experiment</span><span class="o">-</span><span class="mf">1.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">ardrone</span><span class="o">-</span><span class="n">test</span><span class="p">.</span><span class="n">png</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span> <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.14</span>
<span class="p">[...]</span>
</pre></div>


<p>You can see that even individual images have their own DNS entry, and will be served separately.</p>
<p>There is an OCaml web server library, called <a href="https://github.com/mirage/ocaml-cohttp">CoHTTP</a>, which we can use with MirageOS. Using this library, unikernels can be written that host static web pages. The web content itself can either be compiled into the unikernel (as a data structure) or be stored directly on a block storage device. For this experiment, I use the built-in data structure to store a single file per unikernel. </p>
<p>For the unikernel code, I take the static_webserver example from <a href="https://github.com/mirage/mirage-skeleton">mirage-skeleton</a>. The code automatically creates a web server that hosts the files located in the <code>./htdocs</code> subdirectory when the unikernel is built.</p>
<p>The demo code (available <a href="https://github.com/MagnusS/vm-per-url-experiment">here</a>) accepts a directory with static web pages as input. I will use my own website in the examples below, but any site with static web pages should work.</p>
<p>First, mirror (or copy) a static website:</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">wget</span> <span class="o">-</span><span class="n">m</span> <span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>
</pre></div>


<p>Then run the <a href="https://github.com/MagnusS/vm-per-url-experiment/blob/master/create.py">create.py</a> script to generate a unikernel with a web server for each file, which will serve that single file from memory. Note that the folder name and domain name must match - otherwise the script will become confused and not rewrite the URLs properly.  My site has 49 pages and I've copied the entire output below.  This step should only take a few seconds on a reasonably modern machine.</p>
<div class="highlight"><pre><span class="cp"># Run create.py on the contents of the www.skjegstad.com folder. Folder name and domain name must match.</span>
<span class="err">$</span> <span class="n">python</span> <span class="n">create</span><span class="p">.</span><span class="n">py</span> <span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>
<span class="n">Indexing</span> <span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="p">...</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">html</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mi">85956378</span><span class="n">dc89cf3a2729</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">images</span><span class="p">.</span><span class="n">profile</span><span class="p">.</span><span class="n">jpg</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">profile</span><span class="p">.</span><span class="n">jpg</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="n">f7fb9c68d5c3701996b3</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">ardrone</span><span class="o">-</span><span class="n">experiment</span><span class="o">-</span><span class="mf">1.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">ardrone</span><span class="o">-</span><span class="n">test</span><span class="p">.</span><span class="n">m4v</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">ardrone</span><span class="o">-</span><span class="n">test</span><span class="p">.</span><span class="n">m4v</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="n">c286eccb0f59b299cca1</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">ardrone</span><span class="o">-</span><span class="n">experiment</span><span class="o">-</span><span class="mf">1.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">camera</span><span class="o">-</span><span class="mf">33.</span><span class="n">jpg</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">camera_33</span><span class="p">.</span><span class="n">jpg</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mi">5</span><span class="n">bef80428ab04abb98c3</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">ardrone</span><span class="o">-</span><span class="n">experiment</span><span class="o">-</span><span class="mf">1.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">ardrone</span><span class="o">-</span><span class="n">test</span><span class="p">.</span><span class="n">png</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">ardrone</span><span class="o">-</span><span class="n">test</span><span class="p">.</span><span class="n">png</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mi">41</span><span class="n">d9ee421440ceec86a4</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">ardrone</span><span class="o">-</span><span class="n">experiment</span><span class="o">-</span><span class="mf">1.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">ardrone1</span><span class="p">.</span><span class="n">jpg</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">ardrone1</span><span class="p">.</span><span class="n">jpg</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="n">a9fdfed9d054ee4d48de</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">ardrone</span><span class="o">-</span><span class="n">experiment</span><span class="o">-</span><span class="mf">1.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">camera</span><span class="o">-</span><span class="mf">28.</span><span class="n">jpg</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">camera_28</span><span class="p">.</span><span class="n">jpg</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mi">5</span><span class="n">ca0d87ae96d8648c36d</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">ardrone</span><span class="o">-</span><span class="n">experiment</span><span class="o">-</span><span class="mf">1.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">screenshot1</span><span class="p">.</span><span class="n">png</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">screenshot1</span><span class="p">.</span><span class="n">png</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mi">5</span><span class="n">b1ce89d1c806c4234f2</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">mirage</span><span class="o">-</span><span class="n">dev</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">ubuntu</span><span class="o">-</span><span class="n">in</span><span class="o">-</span><span class="n">vm</span><span class="o">-</span><span class="n">overview</span><span class="p">.</span><span class="n">jpg</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">ubuntu_in_vm_overview</span><span class="p">.</span><span class="n">jpg</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mi">0</span><span class="n">d368ef42317b28f6243</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">mirage</span><span class="o">-</span><span class="n">dev</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">xen</span><span class="o">-</span><span class="n">in</span><span class="o">-</span><span class="n">vm</span><span class="o">-</span><span class="n">overview</span><span class="p">.</span><span class="n">jpg</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">xen_in_vm_overview</span><span class="p">.</span><span class="n">jpg</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mi">2</span><span class="n">a4e519b0d91b8967b62</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">uavexperiment</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">MobileNode</span><span class="p">.</span><span class="n">png</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">MobileNode</span><span class="p">.</span><span class="n">png</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mi">390</span><span class="n">a92f0488aa32f17e3</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">uavexperiment</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">image6</span><span class="p">.</span><span class="n">jpg</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">image6</span><span class="p">.</span><span class="n">jpg</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="n">f9a90e263ac465d53558</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">uavexperiment</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">image1</span><span class="p">.</span><span class="n">jpg</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">image1</span><span class="p">.</span><span class="n">jpg</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="n">fc21dfa295c33c6e3bd3</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">uavexperiment</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">image5</span><span class="p">.</span><span class="n">jpg</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">image5</span><span class="p">.</span><span class="n">jpg</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="n">afc6634e807f1bddad22</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">uavexperiment</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">image4</span><span class="p">.</span><span class="n">jpg</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">image4</span><span class="p">.</span><span class="n">jpg</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mf">1f</span><span class="mi">7</span><span class="n">b97ef7d3a4a1ba0f4</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">uavexperiment</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">image3</span><span class="p">.</span><span class="n">jpg</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">image3</span><span class="p">.</span><span class="n">jpg</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mi">4</span><span class="n">dedbc5bfcd11fe49a83</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">uavexperiment</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">image2</span><span class="p">.</span><span class="n">jpg</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">image2</span><span class="p">.</span><span class="n">jpg</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mf">8f15f</span><span class="n">a23ae6563d2d890</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">software</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">html</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mi">855</span><span class="n">d32b8905249554f69</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">macvim</span><span class="o">-</span><span class="n">and</span><span class="o">-</span><span class="n">funnel</span><span class="o">-</span><span class="n">pl</span><span class="mf">.05.01.2012</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">html</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="n">cb72fc8606b734fd7322</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">ardrone</span><span class="o">-</span><span class="n">test</span><span class="o">-</span><span class="n">flight</span><span class="o">-</span><span class="mf">1.12.01.2012</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">html</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mi">570</span><span class="n">b6f207695db4d2898</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">mirageos</span><span class="o">-</span><span class="n">xen</span><span class="o">-</span><span class="n">virtualbox</span><span class="mf">.19.01.2015</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">html</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mi">9</span><span class="n">ada75a179f0d6c6cdff</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">experimenting</span><span class="o">-</span><span class="n">with</span><span class="o">-</span><span class="n">distributed</span><span class="o">-</span><span class="n">chat</span><span class="mf">.02.12.2011</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">html</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mi">0</span><span class="n">d0613c7f413609ab402</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">a</span><span class="o">-</span><span class="n">stand</span><span class="o">-</span><span class="n">alone</span><span class="o">-</span><span class="n">java</span><span class="o">-</span><span class="n">bloom</span><span class="o">-</span><span class="n">filter</span><span class="mf">.20.10.2011</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">html</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="n">c11e5af4b1a8ee667bf5</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">virtualbox</span><span class="p">.</span><span class="n">categories</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">html</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mf">198f10ff</span><span class="n">b77757798200</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">bloom</span><span class="o">-</span><span class="n">filters</span><span class="p">.</span><span class="n">categories</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">html</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="n">da3c099920c48f77b625</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">mist</span><span class="p">.</span><span class="n">categories</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">html</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="n">ec590d332b74f3521787</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">unikernel</span><span class="p">.</span><span class="n">categories</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">html</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="n">befa876942eb63d806d0</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">experiments</span><span class="p">.</span><span class="n">categories</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">html</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mi">2</span><span class="n">d14e6010e04324f1fa9</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">vim</span><span class="p">.</span><span class="n">categories</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">html</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="n">d09920f7a15c2f930686</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">xen</span><span class="p">.</span><span class="n">categories</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">html</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mi">9</span><span class="n">bd2e2788f6309bc762c</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">mirageos</span><span class="p">.</span><span class="n">categories</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">html</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mi">8</span><span class="n">b08718e16dddf30473f</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">ardrone</span><span class="p">.</span><span class="n">categories</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">html</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="n">dfc57a0ce3fc7382a001</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">java</span><span class="p">.</span><span class="n">categories</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">html</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="n">a13890b437ef10df36e4</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">papers</span><span class="p">.</span><span class="n">skjegstad</span><span class="o">-</span><span class="n">mistsd</span><span class="o">-</span><span class="n">milcom2010</span><span class="p">.</span><span class="n">pdf</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">skjegstad_mistsd_milcom2010</span><span class="p">.</span><span class="n">pdf</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mi">2</span><span class="n">b39a34888b769596fe0</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">papers</span><span class="p">.</span><span class="n">milcom09skjegstad</span><span class="p">.</span><span class="n">pdf</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">milcom09skjegstad</span><span class="p">.</span><span class="n">pdf</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mf">09854f</span><span class="mi">35</span><span class="n">b4a6c9bafe01</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">papers</span><span class="p">.</span><span class="n">milcom11</span><span class="o">-</span><span class="n">distributed</span><span class="o">-</span><span class="n">chat</span><span class="p">.</span><span class="n">pdf</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">milcom11_distributed_chat</span><span class="p">.</span><span class="n">pdf</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mi">759</span><span class="n">daabffb7ac70f3c82</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">publications</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">html</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mi">2434</span><span class="n">cc8c7a5f966b2bc9</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">about</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">html</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mf">6ff</span><span class="mi">5</span><span class="n">ef4c2d9236d7a398</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">js</span><span class="p">.</span><span class="n">theme</span><span class="p">.</span><span class="n">modernizr</span><span class="o">-</span><span class="mf">2.0</span><span class="p">.</span><span class="n">js</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">modernizr</span><span class="o">-</span><span class="mf">2.0</span><span class="p">.</span><span class="n">js</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mi">1</span><span class="n">b8ff82e33ce3d777d9e</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">js</span><span class="p">.</span><span class="n">theme</span><span class="p">.</span><span class="n">octopress</span><span class="p">.</span><span class="n">js</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">octopress</span><span class="p">.</span><span class="n">js</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mf">2e5</span><span class="n">e43546763b649cd3b</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">js</span><span class="p">.</span><span class="n">theme</span><span class="p">.</span><span class="n">ender</span><span class="p">.</span><span class="n">js</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">ender</span><span class="p">.</span><span class="n">js</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="n">edf18f0bba513af40346</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">js</span><span class="p">.</span><span class="n">theme</span><span class="p">.</span><span class="n">github</span><span class="p">.</span><span class="n">js</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">github</span><span class="p">.</span><span class="n">js</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="n">a577cb04bac38034dc95</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">images</span><span class="p">.</span><span class="n">theme</span><span class="p">.</span><span class="n">noise</span><span class="p">.</span><span class="n">png</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">noise</span><span class="p">.</span><span class="n">png</span><span class="o">?</span><span class="mi">1395516324</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="n">e9d12885cf941b2f149c</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">images</span><span class="p">.</span><span class="n">theme</span><span class="p">.</span><span class="n">search</span><span class="p">.</span><span class="n">png</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">search</span><span class="p">.</span><span class="n">png</span><span class="o">?</span><span class="mi">1395516324</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="n">c23144b5f096a13a71bb</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">images</span><span class="p">.</span><span class="n">theme</span><span class="p">.</span><span class="n">code</span><span class="o">-</span><span class="n">bg</span><span class="p">.</span><span class="n">png</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">code_bg</span><span class="p">.</span><span class="n">png</span><span class="o">?</span><span class="mi">1395516324</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mf">19e1</span><span class="n">de022f4a565bc1e2</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">images</span><span class="p">.</span><span class="n">theme</span><span class="p">.</span><span class="n">line</span><span class="o">-</span><span class="n">tile</span><span class="p">.</span><span class="n">png</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">line</span><span class="o">-</span><span class="n">tile</span><span class="p">.</span><span class="n">png</span><span class="o">?</span><span class="mi">1395516324</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mf">29ff</span><span class="mo">05</span><span class="n">b603a5d0cdebdc</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">images</span><span class="p">.</span><span class="n">theme</span><span class="p">.</span><span class="n">email</span><span class="p">.</span><span class="n">png</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">email</span><span class="p">.</span><span class="n">png</span><span class="o">?</span><span class="mi">1395516324</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mi">4</span><span class="n">d4e8d94047cf9c45080</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">images</span><span class="p">.</span><span class="n">theme</span><span class="p">.</span><span class="n">rss</span><span class="p">.</span><span class="n">png</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">rss</span><span class="p">.</span><span class="n">png</span><span class="o">?</span><span class="mi">1395516324</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mi">433115</span><span class="n">bed52cbea861a0</span>
<span class="n">Preparing</span> <span class="n">unikernel</span> <span class="k">for</span> <span class="n">css</span><span class="p">.</span><span class="n">theme</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">css</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">main</span><span class="p">.</span><span class="n">css</span> <span class="n">in</span> <span class="n">staging</span><span class="o">/</span><span class="mi">1</span><span class="n">bacfdf7b71099057d8c</span>

<span class="n">Zone</span> <span class="n">file</span> <span class="n">generated</span> <span class="n">in</span> <span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="p">.</span><span class="n">zone</span><span class="p">.</span>

<span class="n">Makefile</span> <span class="n">generated</span><span class="p">.</span> <span class="n">Type</span> <span class="err">'</span><span class="n">make</span><span class="err">'</span> <span class="n">to</span> <span class="n">build</span><span class="p">,</span> <span class="err">'</span><span class="n">make</span> <span class="n">run</span><span class="err">'</span> <span class="n">to</span> <span class="n">run</span> <span class="n">and</span> <span class="err">'</span><span class="n">make</span> <span class="n">destroy</span><span class="err">'</span> <span class="n">to</span> <span class="n">stop</span> <span class="n">VMs</span><span class="p">.</span> <span class="n">Start</span> <span class="n">local</span> <span class="n">DNS</span> <span class="n">server</span> <span class="n">with</span> <span class="err">'</span><span class="n">make</span> <span class="n">dns</span><span class="err">'</span>
</pre></div>


<p>When the script completes, a unikernel has been created in <code>./staging</code> for each file in the www.skjegstad.com directory. To compile the unikernels using the mirage-tool, run <code>make</code>. Note that this requires a working MirageOS development environment and I have written a guide for setting this up <a href="http://www.skjegstad.com/blog/2015/01/19/mirageos-xen-virtualbox/">here</a>. This step will take some time, depending on how many pages you have. In my case, it was around 4 minutes in Virtualbox on my laptop.</p>
<p>When all the unikernels have been successfully built, <code>make run</code> will start each of them using Xen's <code>xl</code> tool. Use <code>sudo xl list</code> to see the running unikernels. This is the <code>xl</code> output for 49 MirageOS virtual machines hosting www.skjegstad.com on my local network:</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">sudo</span> <span class="n">xl</span> <span class="n">list</span>
<span class="n">Name</span>                                        <span class="n">ID</span>   <span class="n">Mem</span> <span class="n">VCPUsStateTime</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="n">Domain</span><span class="o">-</span><span class="mi">0</span>                                     <span class="mi">0</span>   <span class="mi">292</span>     <span class="mi">1</span>     <span class="n">r</span><span class="o">-----</span>    <span class="mf">2156.1</span>
<span class="mi">85956378</span><span class="n">dc89cf3a2729</span>                        <span class="mi">39</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="n">f7fb9c68d5c3701996b3</span>                        <span class="mi">40</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="n">c286eccb0f59b299cca1</span>                        <span class="mi">41</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="mi">5</span><span class="n">bef80428ab04abb98c3</span>                        <span class="mi">42</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="mi">41</span><span class="n">d9ee421440ceec86a4</span>                        <span class="mi">43</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="n">a9fdfed9d054ee4d48de</span>                        <span class="mi">44</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="mi">5</span><span class="n">ca0d87ae96d8648c36d</span>                        <span class="mi">45</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="mi">5</span><span class="n">b1ce89d1c806c4234f2</span>                        <span class="mi">46</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="mi">0</span><span class="n">d368ef42317b28f6243</span>                        <span class="mi">47</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="mi">2</span><span class="n">a4e519b0d91b8967b62</span>                        <span class="mi">48</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="mi">390</span><span class="n">a92f0488aa32f17e3</span>                        <span class="mi">49</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="n">f9a90e263ac465d53558</span>                        <span class="mi">50</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="n">fc21dfa295c33c6e3bd3</span>                        <span class="mi">51</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="n">afc6634e807f1bddad22</span>                        <span class="mi">52</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="mf">1f</span><span class="mi">7</span><span class="n">b97ef7d3a4a1ba0f4</span>                        <span class="mi">53</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="mi">4</span><span class="n">dedbc5bfcd11fe49a83</span>                        <span class="mi">54</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="mf">8f15f</span><span class="n">a23ae6563d2d890</span>                        <span class="mi">55</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="mi">855</span><span class="n">d32b8905249554f69</span>                        <span class="mi">56</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="n">cb72fc8606b734fd7322</span>                        <span class="mi">57</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="mi">570</span><span class="n">b6f207695db4d2898</span>                        <span class="mi">58</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="mi">9</span><span class="n">ada75a179f0d6c6cdff</span>                        <span class="mi">59</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="mi">0</span><span class="n">d0613c7f413609ab402</span>                        <span class="mi">60</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="n">c11e5af4b1a8ee667bf5</span>                        <span class="mi">61</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="mf">198f10ff</span><span class="n">b77757798200</span>                        <span class="mi">62</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="n">da3c099920c48f77b625</span>                        <span class="mi">63</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="n">ec590d332b74f3521787</span>                        <span class="mi">64</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="n">befa876942eb63d806d0</span>                        <span class="mi">65</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="mi">2</span><span class="n">d14e6010e04324f1fa9</span>                        <span class="mi">66</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="n">d09920f7a15c2f930686</span>                        <span class="mi">67</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="mi">9</span><span class="n">bd2e2788f6309bc762c</span>                        <span class="mi">68</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="mi">8</span><span class="n">b08718e16dddf30473f</span>                        <span class="mi">69</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="n">dfc57a0ce3fc7382a001</span>                        <span class="mi">70</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="n">a13890b437ef10df36e4</span>                        <span class="mi">71</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="mi">2</span><span class="n">b39a34888b769596fe0</span>                        <span class="mi">72</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.1</span>
<span class="mf">09854f</span><span class="mi">35</span><span class="n">b4a6c9bafe01</span>                        <span class="mi">73</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.0</span>
<span class="mi">759</span><span class="n">daabffb7ac70f3c82</span>                        <span class="mi">74</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.0</span>
<span class="mi">2434</span><span class="n">cc8c7a5f966b2bc9</span>                        <span class="mi">75</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.0</span>
<span class="mf">6ff</span><span class="mi">5</span><span class="n">ef4c2d9236d7a398</span>                        <span class="mi">76</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.0</span>
<span class="mi">1</span><span class="n">b8ff82e33ce3d777d9e</span>                        <span class="mi">77</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.0</span>
<span class="mf">2e5</span><span class="n">e43546763b649cd3b</span>                        <span class="mi">78</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.0</span>
<span class="n">edf18f0bba513af40346</span>                        <span class="mi">79</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.0</span>
<span class="n">a577cb04bac38034dc95</span>                        <span class="mi">80</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.0</span>
<span class="n">e9d12885cf941b2f149c</span>                        <span class="mi">81</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.0</span>
<span class="n">c23144b5f096a13a71bb</span>                        <span class="mi">82</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.0</span>
<span class="mf">19e1</span><span class="n">de022f4a565bc1e2</span>                        <span class="mi">83</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.0</span>
<span class="mf">29ff</span><span class="mo">05</span><span class="n">b603a5d0cdebdc</span>                        <span class="mi">84</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.0</span>
<span class="mi">4</span><span class="n">d4e8d94047cf9c45080</span>                        <span class="mi">85</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.0</span>
<span class="mi">433115</span><span class="n">bed52cbea861a0</span>                        <span class="mi">86</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.0</span>
<span class="mi">1</span><span class="n">bacfdf7b71099057d8c</span>                        <span class="mi">87</span>    <span class="mi">32</span>     <span class="mi">1</span>     <span class="o">-</span><span class="n">b</span><span class="o">----</span>       <span class="mf">0.0</span>
</pre></div>


<p>The create.py-script also generated a DNS zone file that maps the domain names to IP addresses. This is the generated zone file for www.skjegstad.com:</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">cat</span> <span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="p">.</span><span class="n">zone</span>
<span class="err">@</span>   <span class="n">IN</span>  <span class="n">SOA</span>     <span class="n">ns</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="p">.</span>  <span class="n">postmaster</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="p">.</span> <span class="p">(</span><span class="mi">1</span> <span class="mi">600</span> <span class="mi">600</span> <span class="mi">600</span> <span class="mi">60</span><span class="p">)</span>
<span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="p">.</span>  <span class="n">IN</span>  <span class="n">CNAME</span>   <span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span><span class="p">.</span>
<span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>    <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.10</span>
<span class="n">images</span><span class="p">.</span><span class="n">profile</span><span class="p">.</span><span class="n">jpg</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>    <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.11</span>
<span class="n">ardrone</span><span class="o">-</span><span class="n">experiment</span><span class="o">-</span><span class="mf">1.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">ardrone</span><span class="o">-</span><span class="n">test</span><span class="p">.</span><span class="n">m4v</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span> <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.12</span>
<span class="n">ardrone</span><span class="o">-</span><span class="n">experiment</span><span class="o">-</span><span class="mf">1.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">camera</span><span class="o">-</span><span class="mf">33.</span><span class="n">jpg</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>    <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.13</span>
<span class="n">ardrone</span><span class="o">-</span><span class="n">experiment</span><span class="o">-</span><span class="mf">1.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">ardrone</span><span class="o">-</span><span class="n">test</span><span class="p">.</span><span class="n">png</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span> <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.14</span>
<span class="n">ardrone</span><span class="o">-</span><span class="n">experiment</span><span class="o">-</span><span class="mf">1.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">ardrone1</span><span class="p">.</span><span class="n">jpg</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span> <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.15</span>
<span class="n">ardrone</span><span class="o">-</span><span class="n">experiment</span><span class="o">-</span><span class="mf">1.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">camera</span><span class="o">-</span><span class="mf">28.</span><span class="n">jpg</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>    <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.16</span>
<span class="n">ardrone</span><span class="o">-</span><span class="n">experiment</span><span class="o">-</span><span class="mf">1.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">screenshot1</span><span class="p">.</span><span class="n">png</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>  <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.17</span>
<span class="n">mirage</span><span class="o">-</span><span class="n">dev</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">ubuntu</span><span class="o">-</span><span class="n">in</span><span class="o">-</span><span class="n">vm</span><span class="o">-</span><span class="n">overview</span><span class="p">.</span><span class="n">jpg</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>  <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.18</span>
<span class="n">mirage</span><span class="o">-</span><span class="n">dev</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">xen</span><span class="o">-</span><span class="n">in</span><span class="o">-</span><span class="n">vm</span><span class="o">-</span><span class="n">overview</span><span class="p">.</span><span class="n">jpg</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span> <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.19</span>
<span class="n">uavexperiment</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">MobileNode</span><span class="p">.</span><span class="n">png</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>  <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.20</span>
<span class="n">uavexperiment</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">image6</span><span class="p">.</span><span class="n">jpg</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>  <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.21</span>
<span class="n">uavexperiment</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">image1</span><span class="p">.</span><span class="n">jpg</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>  <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.22</span>
<span class="n">uavexperiment</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">image5</span><span class="p">.</span><span class="n">jpg</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>  <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.23</span>
<span class="n">uavexperiment</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">image4</span><span class="p">.</span><span class="n">jpg</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>  <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.24</span>
<span class="n">uavexperiment</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">image3</span><span class="p">.</span><span class="n">jpg</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>  <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.25</span>
<span class="n">uavexperiment</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">image2</span><span class="p">.</span><span class="n">jpg</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>  <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.26</span>
<span class="n">software</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>   <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.27</span>
<span class="n">macvim</span><span class="o">-</span><span class="n">and</span><span class="o">-</span><span class="n">funnel</span><span class="o">-</span><span class="n">pl</span><span class="mf">.05.01.2012</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>   <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.28</span>
<span class="n">ardrone</span><span class="o">-</span><span class="n">test</span><span class="o">-</span><span class="n">flight</span><span class="o">-</span><span class="mf">1.12.01.2012</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>  <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.29</span>
<span class="n">mirageos</span><span class="o">-</span><span class="n">xen</span><span class="o">-</span><span class="n">virtualbox</span><span class="mf">.19.01.2015</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>    <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.30</span>
<span class="n">experimenting</span><span class="o">-</span><span class="n">with</span><span class="o">-</span><span class="n">distributed</span><span class="o">-</span><span class="n">chat</span><span class="mf">.02.12.2011</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>    <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.31</span>
<span class="n">a</span><span class="o">-</span><span class="n">stand</span><span class="o">-</span><span class="n">alone</span><span class="o">-</span><span class="n">java</span><span class="o">-</span><span class="n">bloom</span><span class="o">-</span><span class="n">filter</span><span class="mf">.20.10.2011</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>    <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.32</span>
<span class="n">virtualbox</span><span class="p">.</span><span class="n">categories</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span> <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.33</span>
<span class="n">bloom</span><span class="o">-</span><span class="n">filters</span><span class="p">.</span><span class="n">categories</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>  <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.34</span>
<span class="n">mist</span><span class="p">.</span><span class="n">categories</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>   <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.35</span>
<span class="n">unikernel</span><span class="p">.</span><span class="n">categories</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>  <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.36</span>
<span class="n">experiments</span><span class="p">.</span><span class="n">categories</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>    <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.37</span>
<span class="n">vim</span><span class="p">.</span><span class="n">categories</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>    <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.38</span>
<span class="n">xen</span><span class="p">.</span><span class="n">categories</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>    <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.39</span>
<span class="n">mirageos</span><span class="p">.</span><span class="n">categories</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>   <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.40</span>
<span class="n">ardrone</span><span class="p">.</span><span class="n">categories</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>    <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.41</span>
<span class="n">java</span><span class="p">.</span><span class="n">categories</span><span class="p">.</span><span class="n">blog</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>   <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.42</span>
<span class="n">papers</span><span class="p">.</span><span class="n">skjegstad</span><span class="o">-</span><span class="n">mistsd</span><span class="o">-</span><span class="n">milcom2010</span><span class="p">.</span><span class="n">pdf</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>    <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.43</span>
<span class="n">papers</span><span class="p">.</span><span class="n">milcom09skjegstad</span><span class="p">.</span><span class="n">pdf</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>  <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.44</span>
<span class="n">papers</span><span class="p">.</span><span class="n">milcom11</span><span class="o">-</span><span class="n">distributed</span><span class="o">-</span><span class="n">chat</span><span class="p">.</span><span class="n">pdf</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>  <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.45</span>
<span class="n">publications</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>   <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.46</span>
<span class="n">about</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>  <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.47</span>
<span class="n">js</span><span class="p">.</span><span class="n">theme</span><span class="p">.</span><span class="n">modernizr</span><span class="o">-</span><span class="mf">2.0</span><span class="p">.</span><span class="n">js</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span> <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.48</span>
<span class="n">js</span><span class="p">.</span><span class="n">theme</span><span class="p">.</span><span class="n">octopress</span><span class="p">.</span><span class="n">js</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span> <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.49</span>
<span class="n">js</span><span class="p">.</span><span class="n">theme</span><span class="p">.</span><span class="n">ender</span><span class="p">.</span><span class="n">js</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span> <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.50</span>
<span class="n">js</span><span class="p">.</span><span class="n">theme</span><span class="p">.</span><span class="n">github</span><span class="p">.</span><span class="n">js</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>    <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.51</span>
<span class="n">images</span><span class="p">.</span><span class="n">theme</span><span class="p">.</span><span class="n">noise</span><span class="p">.</span><span class="n">png</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>    <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.52</span>
<span class="n">images</span><span class="p">.</span><span class="n">theme</span><span class="p">.</span><span class="n">search</span><span class="p">.</span><span class="n">png</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>   <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.53</span>
<span class="n">images</span><span class="p">.</span><span class="n">theme</span><span class="p">.</span><span class="n">code</span><span class="o">-</span><span class="n">bg</span><span class="p">.</span><span class="n">png</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>  <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.54</span>
<span class="n">images</span><span class="p">.</span><span class="n">theme</span><span class="p">.</span><span class="n">line</span><span class="o">-</span><span class="n">tile</span><span class="p">.</span><span class="n">png</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>    <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.55</span>
<span class="n">images</span><span class="p">.</span><span class="n">theme</span><span class="p">.</span><span class="n">email</span><span class="p">.</span><span class="n">png</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>    <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.56</span>
<span class="n">images</span><span class="p">.</span><span class="n">theme</span><span class="p">.</span><span class="n">rss</span><span class="p">.</span><span class="n">png</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>  <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.57</span>
<span class="n">css</span><span class="p">.</span><span class="n">theme</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">css</span><span class="p">.</span><span class="n">www</span><span class="p">.</span><span class="n">skjegstad</span><span class="p">.</span><span class="n">com</span>    <span class="n">IN</span>  <span class="n">A</span>   <span class="mf">192.168.56.58</span>
</pre></div>


<p>The zone file can be loaded in your favorite DNS server (e.g. bind or unbound). It is also relatively easy to build a quick DNS server in OCaml based on ocaml-dns:</p>
<div class="highlight"><pre><span class="n">open</span> <span class="n">Dns</span>
<span class="n">open</span> <span class="n">Lwt</span>

<span class="n">let</span> <span class="p">()</span> <span class="o">=</span>
    <span class="n">Lwt_main</span><span class="p">.</span><span class="n">run</span> <span class="p">(</span>
        <span class="n">let</span> <span class="n">address</span> <span class="o">=</span> <span class="s">&quot;0.0.0.0&quot;</span> <span class="n">in</span>
        <span class="n">let</span> <span class="n">port</span> <span class="o">=</span> <span class="mi">53</span> <span class="n">in</span>
        <span class="n">Dns_server_unix</span><span class="p">.</span><span class="n">serve_with_zonefile</span> <span class="o">~</span><span class="n">address</span> <span class="o">~</span><span class="n">port</span> <span class="s">&quot;www.skjegstad.com.zone&quot;</span>
    <span class="p">)</span>
</pre></div>


<p>I have written an extended version with support for forwarding unknown DNS requests to another DNS server. It is available for download <a href="https://github.com/MagnusS/vm-per-url-experiment/blob/master/serve_dns.ml">here</a> and is included in the demo code. In fact, you could also run the DNS server as a unikernel, but I will leave that as an exercise for the reader (<a href="http://hh360.user.srcf.net/blog/2015/02/part-1-running-your-own-dns-resolver-with-mirageos/">this blog post</a> by Heidi Howard is a good starting point with lots of <a href="https://github.com/heidi-ann/ocaml-dns-examples">examples</a>).</p>
<p>Point your DNS server to the IP of the DNS server that hosts the zone file to start browsing the static website. Each static page should map to a separate domain name which is run by a single MirageOS unikernel!</p>
<h3>Conclusion / discussion</h3>
<p>Currently this is just a quick experiment and is not very practical. I would still need a unikernel or Linux VM to run the DNS server and I have not been able to find a hosting provider that has a minimum configuration which would be appropriate for large or small unikernels (e.g. 8MB vs 64MB RAM). Each VM/URL would also require a unique public IP address unless they are placed behind another service (NAT) that can route the HTTP requests to an internal network. </p>
<p>If you followed along, then you would also notice that the compiled unikernels in <code>./staging</code> take up around 175MB (49 unikernels). When running, they collectively consume around 1.6GB of memory. However, it was a lot easier to try this experiment using unikernels than it would have been with a traditional OS stack.</p>
<p>A more practical architecture would perhaps be to run a website and DNS server from a single host initially. As each web page is mapped to a URL, the DNS server could then be configured to automatically boot new unikernels only if a subdomain experienced high load. It could, for example, deploy unikernels automatically to Amazon EC2 that serve a single file and start returning its IP address in DNS queries in periods with high load. Once the website has been 'disaggregated' this way, it would even be possible to start VMs in availability zones that are geographically close to the where the spike in traffic is originating!  This could all be configured to happen automatically, with DNS entries being updated as new pages are added and with unikernels being deployed to places where they are in demand.</p>
<p>(Thanks to Amir Chaudry for commenting on a draft of this post)</p>

---
title: OCaml 5 Alpha Release
description: "OCaml 5 is live! This major release introduces domains and effects,
  delivering unprecedented speed and efficiency to OCaml. Testing shows\u2026"
url: https://tarides.com/blog/2022-06-15-ocaml-5-alpha-release
date: 2022-06-15T00:00:00-00:00
preview_image: https://tarides.com/static/8cf81cc73d3940053d10015bc64fb0a8/eee8e/ocaml_alpha.jpg
featured:
authors:
- Tarides
source:
---

<p><em>OCaml 5 is live! This major release introduces domains and effects, delivering unprecedented speed and efficiency to OCaml. Testing shows that OCaml 5 is able to outperform Go and closely match Rust in terms of performance. Keep reading for more details!</em></p>
<p>Tarides is thrilled that the alpha release of the long-awaited OCaml 5 is live! OCaml 5 is the culmination of over 8 years of research and engineering into concurrency and parallelism support for OCaml, made real thanks to hard work and dedication from all corners of the community. Tarides has been a major contributor to the engineering effort. Our engineers have contributed not only to the core compiler but also to the tools around release readiness, ecosystem compatibility testing, and continuous performance monitoring.</p>
<p><strong>If you are using OCaml in an industrial setting (or if you are interested to do so), we'd like to make sure everything is ready for you to move to OCaml 5 and benefit from the new performance boost. Tell us what you need in this <a href="https://framaforms.org/tarides-ocaml-5-user-survey-1655303113 - [403 Forbidden]">user survey</a>.</strong></p>
<h2 style="position:relative;"><a href="https://tarides.com/feed.xml#what-kind-of-performance-to-expect" aria-label="what kind of performance to expect permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What Kind of Performance to Expect?</h2>
<p>This update brings <em>unprecedented results</em> in terms of performance, with an HTTP server based on OCaml 5&rsquo;s <a href="https://github.com/ocaml-multicore/eio"><code>Eio</code></a> being able to serve 1M+ requests/sec, outperforming Go&rsquo;s <code>nethttp</code>, and closely matching Rust&rsquo;s <code>hyper</code> performance! This is just a small indication of OCaml 5&rsquo;s potential in terms of speed and efficiency.</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <a href="https://tarides.com/static/9f0b97bdb5cfc231e1a387bb218f08c4/133ae/http_load1.png" class="gatsby-resp-image-link" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 66.47058823529413%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABp0lEQVR42pVT266bQAzM//9c1ZdIfYoSaNPCsjebvbKeIwgVJ03zcIxGvi2jWYxPrbVfACIABjB/Be2ISYBFRL6fRMS01qCNldExiAjGGDjnUEp5i5wzllowx4zBcsPDfpxSSialBDUOMv68out6nM9n3O93iMgLWhNgjyktmPwMpdRBSETGGAtjJ5nm31CTRtd1sNZuL/3PUhVoz5idBpJBpukgZGYzKQVPJGWpu4q24bAHcV0arPPwekALBmh5q+ecnxWO4whmlldFe75UkJ2g1R/k2QJSP3eRUzoIQwhGaw3v/T+Ee9wqmh9QvMY7e1GolFqnuxPK9jxOMiqP4EzQ2cFlB5vs5l3a82wxff6G3nszTdN25SaPeq4R7HpY18MXhsseqUas/UWWZ2ABRXoeyl+FqzAXNXpzAQWN9dS7Sb+9cqnFMM+w1oiNGioqLG3BV+yJcN2UNaKZpB96tNrARIgxblh/+hACYkzbhqy11TPz1tv9Qdha6/d99CFEyiVTCIHmeabL5ULX65X6vqfb7UZd1225UopijFRKIWYmAA5AEZFvH4+X8/tF5WSuAAAAAElFTkSuQmCC'); background-size: cover; display: block;"></span>
  <img src="https://tarides.com/static/9f0b97bdb5cfc231e1a387bb218f08c4/c5bb3/http_load1.png" class="gatsby-resp-image-image" alt="HTTP Load" title="" srcset="/static/9f0b97bdb5cfc231e1a387bb218f08c4/04472/http_load1.png 170w,
/static/9f0b97bdb5cfc231e1a387bb218f08c4/9f933/http_load1.png 340w,
/static/9f0b97bdb5cfc231e1a387bb218f08c4/c5bb3/http_load1.png 680w,
/static/9f0b97bdb5cfc231e1a387bb218f08c4/b12f7/http_load1.png 1020w,
/static/9f0b97bdb5cfc231e1a387bb218f08c4/b5a09/http_load1.png 1360w,
/static/9f0b97bdb5cfc231e1a387bb218f08c4/133ae/http_load1.png 1424w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async"/>
  </a>
    </span>
<span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <a href="https://tarides.com/static/2f196c5af826e76e47ebc6a902b9182d/2a08f/http_cores.png" class="gatsby-resp-image-link" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 66.47058823529413%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB1ElEQVR42o2Ti2ocMQxF8/9fV2hpoUmhLd3s7oxnM7b8fp3imWw2gfQhEBYyOraurbvW2txaS4AHwtXbq/g/3AEd+HQHSCkFrXVPKXH1khM5jzhykcBiAuIixgWM9bs7z2o95yfT2O3rXYxRQgiISK+10nuH3pGQebKRp1BZFsV8OiDOYazDhPLieuwbdwOKiCilNuAGA0pt/Fw8qXV6FAgrFAfZQhKIKyRDrxF6IsV3gNba3tqeX30m5LqDonmW52qjgwat7odFTdLzW+D5fMYY00erpXUuLsP6C5J/Zuwy7OAb/NpRSukGdM5tN9yAwEFn7KqgeP5l7wKNMbIsC3Y8Sod5OtGDIfVCqhHJwuxnJj9hsmFNGp30HkdNqAEJ9gbUWr9oaENCLmdCdZzsaSssLVN7pbSyrcNTrfhSqK3ismM2rzS01m43dN73i1I8Pn3HjNfs/Y+tOh+ZF8Ooezw8omZ1A+acxTnHNE/94cdHUot/U20HOsXl8sD9/Te+fPnM8Xi8Aa+TMqupKz1vNdZavPeMbzTi8fF3kNvyuRQueh0Pue0ppd4Aj7VWl1KSUqrUVsV7P6ZHxmFDksPhINM0DWlkTNbIB+clXOMQdM45Ax9+A/9C8wMsNAJhAAAAAElFTkSuQmCC'); background-size: cover; display: block;"></span>
  <img src="https://tarides.com/static/2f196c5af826e76e47ebc6a902b9182d/c5bb3/http_cores.png" class="gatsby-resp-image-image" alt="HTTP Cores" title="" srcset="/static/2f196c5af826e76e47ebc6a902b9182d/04472/http_cores.png 170w,
/static/2f196c5af826e76e47ebc6a902b9182d/9f933/http_cores.png 340w,
/static/2f196c5af826e76e47ebc6a902b9182d/c5bb3/http_cores.png 680w,
/static/2f196c5af826e76e47ebc6a902b9182d/b12f7/http_cores.png 1020w,
/static/2f196c5af826e76e47ebc6a902b9182d/b5a09/http_cores.png 1360w,
/static/2f196c5af826e76e47ebc6a902b9182d/2a08f/http_cores.png 1422w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async"/>
  </a>
    </span></p>
<p>As it&rsquo;s an alpha version, it&rsquo;s still subject to some change and fine tuning. This means that we need your help to make OCaml 5 better! Please give <a href="https://discuss.ocaml.org">plenty of feedback</a> and <a href="https://github.com/ocaml/ocaml/issues">report any bugs</a> you find.</p>
<h2 style="position:relative;"><a href="https://tarides.com/feed.xml#under-the-hood" aria-label="under the hood permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Under the Hood</h2>
<p>The alpha release of OCaml 5 adds support for shared memory parallel execution via <em>domains</em> and a new model for concurrent execution via <em>effect handlers</em>.</p>
<p>Domains enable shared-memory parallel programming that allow OCaml programs to run on multiple cores. With domains, OCaml programs will scale better by exploiting multicore processing. Effect handlers are a mechanism for concurrent programming. With the introduction of effect handlers, simple direct-style OCaml code will be flexible, easy to develop, debug, and maintain. No more monads for concurrency! These features will benefit the entire ecosystem and community, and we expect it to attract many new users to the language.</p>
<p>The Standard Library is gaining several of the parallelism primitives previously only found in the Threads library (Condition, Mutex, and Semaphore). Interestingly, having added domains and effects, we hope and expect that most users will never need to use them directly! Instead, we warmly encourage users to look at adopting <a href="https://github.com/ocaml-multicore/domainslib"><code>domainslib</code></a> to parallelise programs and <a href="https://github.com/ocaml-multicore/eio"><code>Eio</code></a> as a replacement for Lwt/Async monadic-style concurrency.</p>
<p>This work seeks to remain entirely backwards-compatible. Programs written for any version of OCaml 4, even if they use the Thread library, will continue to work with the same semantics, similar performance, and as always for OCaml, without crashes.</p>
<h2 style="position:relative;"><a href="https://tarides.com/feed.xml#next-steps" aria-label="next steps permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Next Steps</h2>
<h3 style="position:relative;"><a href="https://tarides.com/feed.xml#installation" aria-label="installation permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h3>
<p>For instructions on how to install OCaml 5 on your machine, <a href="https://discuss.ocaml.org/t/ocaml-5-0-zeroth-alpha-release/10026">Florian Angeletti&rsquo;s Discuss post</a> goes into great detail on how to do so, depending on what version of OCaml you&rsquo;re running and what machine you have. KC Sivaramakrishnan has also created a <a href="https://github.com/kayceesrk/ocaml5-tutorial/">tutorial</a> on OCaml 5 that introduces its new parallelism features, a great resource for anyone looking to make the most of the update.</p>
<p>Other OCaml 5 documentation includes information on <a href="https://kcsrk.info/webman/manual/parallelism.html">parallelism</a>, <a href="https://kcsrk.info/webman/manual/effects.html">effect handlers</a>, and the <a href="https://kcsrk.info/webman/manual/memorymodel.html">memory model</a>.</p>
<h3 style="position:relative;"><a href="https://tarides.com/feed.xml#feedback" aria-label="feedback permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Feedback</h3>
<p>We want to reiterate that as with any alpha release of OCaml, we&rsquo;re keen to hear about bugs and performance regressions. The move to parallel OCaml may bring new debugging challenges, but it remains the case that pure OCaml programs which do not use unsafe features should absolutely never crash. We&rsquo;ll be taking part in the discussion on <a href="https://github.com/ocaml/ocaml/issues">GitHub</a>, <a href="https://discuss.ocaml.org">Discuss</a>, and <a href="https://twitter.com/tarides_?s=20&amp;t=xD04dp9D8eDpCxX6WDkC0A">Twitter</a>.</p>
<p>The change in major version number (from 4.<em>n</em> to 5.<em>n</em>) may result in minor breaking changes which affect your packages, particularly if you&rsquo;ve been allowing some deprecation warnings to slip through in the past! We&rsquo;ll be following up with more information about the required tweaks that may be required for packages supporting both old and new versions of OCaml, as well as with specifics on the testing infrastructure.</p>
<h3 style="position:relative;"><a href="https://tarides.com/feed.xml#survey" aria-label="survey permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Survey</h3>
<p>As discussed above, we&rsquo;ve created a <a href="https://framaforms.org/tarides-ocaml-5-user-survey-1655303113 - [403 Forbidden]">user survey</a> to help us get a better sense of how people are planning on using OCaml 5. It would be very helpful if you could fill it out for us, which should only take a few minutes.</p>
<h3 style="position:relative;"><a href="https://tarides.com/feed.xml#ocaml-5-timeline" aria-label="ocaml 5 timeline permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>OCaml 5 Timeline:</h3>
<ul>
<li>The beta release will take place once these <a href="https://github.com/ocaml/ocaml/milestone/40">issues</a> have been resolved.</li>
<li>The final release is expected in September.</li>
<li>There is <em>no time limit</em> on reporting bugs, so please <a href="https://github.com/ocaml/ocaml/issues">report them here</a>.</li>
</ul>
<h2 style="position:relative;"><a href="https://tarides.com/feed.xml#further-reading" aria-label="further reading permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Further Reading</h2>
<p>The <a href="https://discuss.ocaml.org/tag/multicore-monthly">Multicore monthlies</a>, produced by Shakthi Kannan and Anil Madhavapeddy, provide important context for the work behind OCaml 5 and what&rsquo;s coming with the release.</p>

---
title: Optimising Archive Node Storage for Tezos
description: "For the past few years, Tarides has been responsible for the storage
  component of Tezos, from L1 and L2 shells up to the Tezos protocol. In\u2026"
url: https://tarides.com/blog/2023-05-05-optimising-archive-node-storage-for-tezos
date: 2023-05-05T00:00:00-00:00
preview_image: https://tarides.com/static/70c1588cebab1a71a3364cd221e5b14b/eee8e/irmin_gc.jpg
authors:
- Tarides
source:
---

<p>For the past few years, Tarides has been responsible for the storage component of Tezos, from L1 and L2 shells up to the Tezos protocol. In 2022, our main focus was on improving storage performance and UX for running nodes and bakers. Our efforts resulted in significant improvements, including reducing the storage requirements for rolling nodes by 10x and <a href="https://tarides.com/blog/2022-04-26-lightning-fast-with-irmin-tezos-storage-is-6x-faster-with-1000-tps-surpassed">decreasing the memory usage of the storage layer by 80%</a>. We also maintain core storage APIs necessary to scale the TPS of the network. But we didn't stop there! This year, we've already worked on improving the performance of archive nodes and delivered the project last month. In this blog post, we'll take a closer look at our work and what it means for the future of Tezos.</p>
<p>Last year we released a <a href="https://tarides.com/blog/2022-11-10-towards-minimal-disk-usage-for-tezos-bakers">garbage collector (GC) for the <code>irmin-pack</code> backend</a> to reclaim disk space. The <code>irmin-pack</code> backend is notably used by Octez to support the <a href="https://tezos.com">Tezos blockchain</a> storage on disk. In this context, the Irmin GC is used to perform <a href="https://research-development.nomadic-labs.com/pruning-the-context-and-other-seasonal-activities.html">context pruning</a> by <a href="https://tezos.gitlab.io/user/history_modes.html">rolling nodes</a>. This operation reclaims disk space by deleting old blocks that are no longer required to participate in the Tezos consensus algorithm. In Git terms, the rolling nodes only maintain a <a href="https://github.blog/2020-12-21-get-up-to-speed-with-partial-clone-and-shallow-clone/">shallow history</a> of the blockchain. On the other end, archive nodes retain the entirety of the blockchain to ensure integrity. The Irmin GC has the additional benefit of compacting the data on disk, hence improving the performances of disk operations due to better data locality.</p>
<p>Following the context pruning release in Octez v16, we focused on improving the performances of the Irmin GC, both in its disk usage and memory. We also brought the optimisation benefit of data compaction to archive nodes. As the Tezos blockchain keeps growing, the archive nodes storage requirements are also becoming problematic, so our solution opens the possibility to use multiple hard drives to scale beyond a single disk. In the future, this could enable archive node operators to use a small SSD with excellent performance to store the most recent blocks, while storing older blocks on a larger, less expensive disk.</p>
<h2 style="position:relative;"><a href="https://tarides.com/feed.xml#archive-node-storage-optimisations" aria-label="archive node storage optimisations permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Archive Node Storage Optimisations</h2>
<p>In the following, we'll explain how and why the new archive node storage was divided into multiple volumes:</p>
<ul>
<li>The <code>upper</code> volume contains the most recent history and is identical to the store used by a rolling node. This volume stores everything necessary to participate in endorsements and the Tezos consensus algorithm.</li>
<li>The <code>lower</code> volumes are separate folders that store older blocks to preserve the blockchain's integrity and respond to RPC requests.</li>
</ul>
<p>When Octez interacts with the store, Irmin transparently directs reads and writes to the correct volume, which has the same API as before. New public APIs added in Irmin 3.7 allow Octez to configure the lower volumes directory and to create new lower volumes dynamically.</p>
<p>An important consideration is that each volume is <em>self-contained</em>:</p>
<ul>
<li>Reading recent history and adding new blocks will only interact with the <code>upper</code> volume, with no need to consult the lower volumes at all. This implies that archive nodes will perform exactly the same operation and access the same data layout as if one was running as a rolling node.</li>
<li>Reading information about an old block, and recursively all of its children's objects, will only perform reads from one specific <code>lower</code> volume pertaining to that block. As an example, it means that an RPC request to read a block will interact only with a single volume.</li>
</ul>
<p>In other words, data locality is enforced and random reads are bounded to a much smaller region (proportional to the size of the volumes where the operation takes place).</p>
<p>To achieve these self-contained volumes, a bit of data duplication is required. This is where the Irmin GC compaction algorithm intervenes! Each volume contains a small summary of the old data required for self-containment. Thanks to this summary, complex reads can avoid visiting other lower volumes since the required data can be found locally. This has two benefits:</p>
<ul>
<li>This data summary is compacted. Previously, archive nodes performance suffered from random reads into an enormous data file, which caused them to be slower than rolling nodes. With the new <code>upper</code> volume, archive nodes will be able to perform those expensive reads from the compact summary -- in the exact same way as rolling nodes already do.</li>
<li>As long as configured paths are preserved, each <code>upper</code> and <code>lower</code> volume can be stored on different disks. The initial Octez integration will not expose these capabilities directly, but as the blockchain history continues to grow, this feature will provide flexibility for the capabilities that Octez provides for archive node operators.</li>
</ul>
<p>Furthermore, the GC compaction algorithm is also applied to the lower volumes data. The Tezos blockchain can contain temporary forks that will be abandoned later. While those blocks are important in the <code>upper</code> volume until consensus has been reached, they can safely be removed when data is transferred to a lower volume. This saves disk space and cleans up the blockchain from unused blocks.</p>
<p>The following graphs show the performances of the new archive nodes compared to the existing fast rolling nodes. We replay the Tezos blockchain trace, performing all operations as fast as possible (in the same way it happened, only without network interference). By recording the disk space used by the two nodes over time, we can observe how fast they can process and store new blocks on disk:</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <a href="https://tarides.com/static/3cd75fea0c5787c8908da50c03426953/c1b63/irminGC_1.png" class="gatsby-resp-image-link" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABD0lEQVR42m1SSY7DMAzL/x/YW39QpGniTQupgZxJO8CU4EGQRa1eRERV/RuO41jXtdYKwCb+vgJYeu+ttYjgPwCAO0lzB3E6xW3MLCKyjDF67xEB0ojMMtndMA0jmqsSNqmAEpniFLfeGDFgHebvILoRTjD4ZlwgqaqLiJTWEGGe0gxiEGF2RgUQIsx2plaFjgCmuPdealZWpQw6wxFuMQbd42T6Mf1MsRnUPm33q5lZd05NgPBgMoeAnfZkjqUqS+u91ZIC2uQnIgI5QG4R1x45L5CXyrazcq3BsxT47WYnIuK5bff7/Xa7PbfX78L2fb/yeSlljHF+idzlcbiZz8OWUrZtezwe67oe+6u1+gNJ+EzYiAQfggAAAABJRU5ErkJggg=='); background-size: cover; display: block;"></span>
  <img src="https://tarides.com/static/3cd75fea0c5787c8908da50c03426953/c5bb3/irminGC_1.png" class="gatsby-resp-image-image" alt="irminGC 1" title="" srcset="/static/3cd75fea0c5787c8908da50c03426953/04472/irminGC_1.png 170w,
/static/3cd75fea0c5787c8908da50c03426953/9f933/irminGC_1.png 340w,
/static/3cd75fea0c5787c8908da50c03426953/c5bb3/irminGC_1.png 680w,
/static/3cd75fea0c5787c8908da50c03426953/b12f7/irminGC_1.png 1020w,
/static/3cd75fea0c5787c8908da50c03426953/c1b63/irminGC_1.png 1200w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async"/>
  </a>
    </span></p>
<p>The purple sawtooth wave of the rolling node disk usage corresponds to when the Irmin garbage collector visits the <code>upper</code> volume to release old blocks and free disk space. In production, this happens at the end of every Tezos cycles.</p>
<p>In the case of archive nodes, this old data will not be deleted. Instead, it will be transferred and compacted to the lower volume (in yellow). This results in an increasing total disk space (in green) as the blockchain grows. The blue line shows that the data transfer can take a few minutes (depending on the hard drive that stores the <code>lower</code> volume)! But as this data transfer is done in a background process, the new archive node is able to keep up with the fast rolling node performance like clockwork. The graph confirms this assertion, as the <code>upper</code> disk space used by the archive node (in blue) is same as the disk space used by the rolling node (in purple). This means that both nodes were able to process new blocks at the same speed.</p>
<p>This is not a big surprise, since archive nodes are running the same code as a rolling node in their <code>upper</code> volume. In fact, one could imagine deleting the lower archived volumes, and the archive node would keep working as a rolling node! (Well, almost! We have a security in place to detect that an archive node was incorrectly configured and has lost parts of its history, which could happen if the <code>lower</code> volumes are moved to a different disk.)</p>
<p>Looking at the nodes' memory usage, we can see that the tradeoff for using the efficient <code>upper</code> volume optimisation in archive nodes is that they must now run the Irmin garbage collector. The GC requires some extra RAM while it runs, causing spikes in memory usage:</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <a href="https://tarides.com/static/e478e5e71b1322f0b554c164b3506a97/c1b63/irminGC_2.png" class="gatsby-resp-image-link" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABGklEQVR42mWS2W4DMQhF8//fmk6TsYf9QoWdNpXCg4XAh+XaNyIys4hw9/g1dwcw5zyOg4UBxIcBuI0xiKiq8sMAJKAWqr7zEZikO2VmDTNzVal3taoCksUtXj6RD5JVvUSD1bFKNzznZGYgTxJye1UJDJGsUm3/ZMnV2QPi3tc2fF0kwoEksQ1bT5DPBS818g0D3dy9MlXtNlbnQJqFeiy4l5Xes2FEqkWupVtG7zORynajZR1dQFaJR+c0kCuChiMzgA2zuZjzpS3YOWbLk6UGczRc5Z5mYPHMQqQ51MPR1xLlGg3vzpWvp6raA76d//GqIqbj+BLWFkxEns/n39PPOUVk/xMRGWNs393P8zS3Oeb9fv9+PC6iHwBpS7u+KOewAAAAAElFTkSuQmCC'); background-size: cover; display: block;"></span>
  <img src="https://tarides.com/static/e478e5e71b1322f0b554c164b3506a97/c5bb3/irminGC_2.png" class="gatsby-resp-image-image" alt="irminGC 2" title="" srcset="/static/e478e5e71b1322f0b554c164b3506a97/04472/irminGC_2.png 170w,
/static/e478e5e71b1322f0b554c164b3506a97/9f933/irminGC_2.png 340w,
/static/e478e5e71b1322f0b554c164b3506a97/c5bb3/irminGC_2.png 680w,
/static/e478e5e71b1322f0b554c164b3506a97/b12f7/irminGC_2.png 1020w,
/static/e478e5e71b1322f0b554c164b3506a97/c1b63/irminGC_2.png 1200w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async"/>
  </a>
    </span></p>
<p>Otherwise the analysis of the memory graph is the same. The GC context pruning terminates a bit earlier for rolling nodes, as archive nodes have to go through the additional step of compacting old data and transferring it to the <code>lower</code> volume (while rolling nodes just delete it). Once again, we get a confirmation that this extra work does not impact the archive node's performance. Rather, it keeps processing new blocks as fast as a rolling node! Both nodes reach the end of the cycles at the same time, triggering the next GC memory spike.</p>
<p>While the integration of these features into Octez is still in-progress, early results show a noticeable decrease in bootstrapping time (by ~30%!) for an archive node when it is using <code>lower</code> volumes versus when it is not. These results need further verification, but they demonstrate some of the potential expected performance improvements for archive nodes.</p>
<h2 style="position:relative;"><a href="https://tarides.com/feed.xml#other-optimisations-in-irmin-35-36-and-37" aria-label="other optimisations in irmin 35 36 and 37 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Other Optimisations in Irmin 3.5, 3.6, and 3.7</h2>
<p>Behind the scenes, further optimisations of Octez context pruning have been introduced. They provide benefits to both the existing rolling nodes and the new archive node volumes.</p>
<p>First in Irmin 3.5, we fixed the garbage collector to bound the amount of disk space required to perform a context pruning:</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <a href="https://tarides.com/static/fdc8beac811d659519cd2bfd8ea23f0d/c1b63/irminGC_3.png" class="gatsby-resp-image-link" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABEUlEQVR42qVSy27DMAzr/39or03iJNabg+QmTbceCkwAIciWaVL2TUSQMLM/UFVM01R4PB6FZVk+9ibcHbd937FtGzI8HGKKiDiRTaxa+UQ41O3VEwHSIewXYWATqkN5Y3jUejfFNTQvdjtri0D/RGjh6MJlK5GWk5Jt5COSTN3fLsieIkyygzAbSeRNDathpw5iGqoDYDdIEgbKcvYUIT8Jl9aQ7kQNvStUHWpeKpgM89Qwt3WsqYMlFdmoLWfsIFEQ8bC8ruuQ8/R1DPsa8do+lcVlEKmehd9n+J+o38CMW+/9JLx+l29QM2bGPM/YicD5KERUHzdfNK3nS2W+1q21qo987KeQdHi/37Gue+3/AGR7E4M2QWY/AAAAAElFTkSuQmCC'); background-size: cover; display: block;"></span>
  <img src="https://tarides.com/static/fdc8beac811d659519cd2bfd8ea23f0d/c5bb3/irminGC_3.png" class="gatsby-resp-image-image" alt="irminGC 3" title="" srcset="/static/fdc8beac811d659519cd2bfd8ea23f0d/04472/irminGC_3.png 170w,
/static/fdc8beac811d659519cd2bfd8ea23f0d/9f933/irminGC_3.png 340w,
/static/fdc8beac811d659519cd2bfd8ea23f0d/c5bb3/irminGC_3.png 680w,
/static/fdc8beac811d659519cd2bfd8ea23f0d/b12f7/irminGC_3.png 1020w,
/static/fdc8beac811d659519cd2bfd8ea23f0d/c1b63/irminGC_3.png 1200w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async"/>
  </a>
    </span></p>
<p>This has already been made available in Octez v16 with the release of Irmin 3.5 in December 2022.</p>
<p>In Irmin 3.6, the compaction algorithm was optimised to traverse the blockchain in disk order. Reducing random accesses yields a faster context pruning duration and lower the memory requirements by half during GC. The memory graph below shows the improvements, both in the height and width of the spikes induced by the GC, with Irmin 3.5 in green and Irmin 3.6 in orange:</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <a href="https://tarides.com/static/983855a61ae317b8d8a84e3ec37a191b/29007/irminGC_4.png" class="gatsby-resp-image-link" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 34.11764705882353%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA8UlEQVR42n2R2U7FMAxE+/9/WnErIIl3p4OctoIHwNJRHXs8WboRESICmfkrc06ICFpr/+qK6m/7vsPdUXGe598AyDkxz7k2qW/Ma8Oq5zlh7tiO41juTzyDJSgjn7mIGiiDVbv6mrG0cfc1HFtd5adhDUg6LAOegW4CcoWFohvDw8BGUGN0JZgzqNYzIW7XCevuT+RMDB0Q6VDt6PQO4g+YdLA0yKJD5ROkAyYNLB0yA1qGr9cbhAkeigyFGy+RGUHqBDfugnBetXBduBu88rD1LFpvyMzoraH+No1xQTfMGMQozRi0IPrOr/Wd975mvwBgSCQtiW8FpgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"></span>
  <img src="https://tarides.com/static/983855a61ae317b8d8a84e3ec37a191b/c5bb3/irminGC_4.png" class="gatsby-resp-image-image" alt="irminGC 4" title="" srcset="/static/983855a61ae317b8d8a84e3ec37a191b/04472/irminGC_4.png 170w,
/static/983855a61ae317b8d8a84e3ec37a191b/9f933/irminGC_4.png 340w,
/static/983855a61ae317b8d8a84e3ec37a191b/c5bb3/irminGC_4.png 680w,
/static/983855a61ae317b8d8a84e3ec37a191b/b12f7/irminGC_4.png 1020w,
/static/983855a61ae317b8d8a84e3ec37a191b/b5a09/irminGC_4.png 1360w,
/static/983855a61ae317b8d8a84e3ec37a191b/29007/irminGC_4.png 1600w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async"/>
  </a>
    </span></p>
<p>Finally in Irmin 3.7, the summary produced by the compaction algorithm and present in each <code>upper</code> and <code>lower</code> volumes was optimised for reading speed. As this summary is accessed often, we can see from the trace replay that operations start to perform faster once the compacted summary is available, right after the first GC:</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <a href="https://tarides.com/static/92e609bb6140e5881db902796622042a/29007/irminGC_5.png" class="gatsby-resp-image-link" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 34.705882352941174%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAsklEQVR42p2S2w6DMAxD+f+/BbXkHk8JgzFtL5ulo1ZJcV3ahZmhqnD3DyIC+75jXVds29aY2de1RfWWOSfKtJSZbwAngIh3TbU+dJg61A5EDBkJUcEyxoCI4JvKwCwaIoNqgNgg6mA2sBTH3C37pJ3wbphIeMRlFJG3DZ6ZX8Hf1Ib1j8qw+ubRlOFx5N90JZxEr53/VF1gBVuICOfFVIGYe15Ur2u38Vp3qxX1AsaYeACmfCg4c2+S5QAAAABJRU5ErkJggg=='); background-size: cover; display: block;"></span>
  <img src="https://tarides.com/static/92e609bb6140e5881db902796622042a/c5bb3/irminGC_5.png" class="gatsby-resp-image-image" alt="irminGC 5" title="" srcset="/static/92e609bb6140e5881db902796622042a/04472/irminGC_5.png 170w,
/static/92e609bb6140e5881db902796622042a/9f933/irminGC_5.png 340w,
/static/92e609bb6140e5881db902796622042a/c5bb3/irminGC_5.png 680w,
/static/92e609bb6140e5881db902796622042a/b12f7/irminGC_5.png 1020w,
/static/92e609bb6140e5881db902796622042a/b5a09/irminGC_5.png 1360w,
/static/92e609bb6140e5881db902796622042a/29007/irminGC_5.png 1600w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async"/>
  </a>
    </span></p>
<p>A read intensive benchmark shows the performance boost on different read patterns and volume sizes:</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <a href="https://tarides.com/static/24dc9eaddaa44b675924e0b8833df9f0/9b29b/irminGC_6.png" class="gatsby-resp-image-link" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 52.94117647058824%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA9hAAAPYQGoP6dpAAACK0lEQVR42n2T20tUURSHhWKgyNHQP6A/wp4SAjN66PJURC9RvYRCL0UIyahzMyG6WBjVmDP2oKY2jYjQQ4lFFwTRdC4NzcXUnAnFMJyccc7e+4tzjjgzFO2Hvdbal4+11v7tMv4zlFJIQOpWSqRUqH+dK/LL9EnTNPOC0MivJhGb6wZoa+MnmelhsqvfyOUFuc2MsSZFHqlA5jbIpSJkfq3toE1gPm8AVGYNHNUw5TX3V6KoZguE/Gami5OojgOw8MmMw6MoexUiHdrmyQLQSPv3Gtj2oiafmPFK1IyDfjOefw83LKjEhAkIj0DLPuSPcAGo9wUkA1PL3PJ/gFYrzHi5/XEdt88P9nKIBHgWzDISGAS7FZV8x1hSMP3KB879iHQRMJvbMoAN/XMcbH4ObVaY9XG2b57jNg84yuFLgMOPopxvuQvtlYj4W2ruBWlyuqCjCi1VVLImhOFf94c56nppZjjr4+LwEmec3h3gqd44je4H4K4wgLUPI9hutpvA4h4Ko2TF1aEQR5x+aK2Az14uDC5y2qEDrUbJJ7wxGlz3wV2JFp+gtiu8Dawmn/oLCFcGghxqGYLm3TDTzbn+BU7qJdt2QfgF9Z6vXGq7A3YLIjZOTWeIJocdnHvQlueKHmVblZ3jcRo9r5GP6yA2hvNNmiZPALrrIDnBtdEF2rv7oKce8X2ay8MJunqeQu8xtNVEqWx2FK+LWxV0r4vd+C1CmFYpw5bul/6aP+518xVDfNWNAAAAAElFTkSuQmCC'); background-size: cover; display: block;"></span>
  <img src="https://tarides.com/static/24dc9eaddaa44b675924e0b8833df9f0/c5bb3/irminGC_6.png" class="gatsby-resp-image-image" alt="irminGC 6" title="" srcset="/static/24dc9eaddaa44b675924e0b8833df9f0/04472/irminGC_6.png 170w,
/static/24dc9eaddaa44b675924e0b8833df9f0/9f933/irminGC_6.png 340w,
/static/24dc9eaddaa44b675924e0b8833df9f0/c5bb3/irminGC_6.png 680w,
/static/24dc9eaddaa44b675924e0b8833df9f0/b12f7/irminGC_6.png 1020w,
/static/24dc9eaddaa44b675924e0b8833df9f0/b5a09/irminGC_6.png 1360w,
/static/24dc9eaddaa44b675924e0b8833df9f0/9b29b/irminGC_6.png 3840w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async"/>
  </a>
    </span></p>
<h2 style="position:relative;"><a href="https://tarides.com/feed.xml#conclusion" aria-label="conclusion permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conclusion</h2>
<p>The Irmin 3.5 and 3.6 releases brought much needed disk and memory optimisations to Octez context pruning for rolling nodes. The Irmin 3.7 release brings more improvements to rolling nodes and introduces the same optimised garbage collection design to archive nodes, allowing them to have the same small and efficient store for recent history and enabling future improvements for storing history on multiple disks. Integration of Irmin 3.7's features into Octez is in-progress and will ship in a future version of Octez. In the meantime, we welcome your comments and feedback on the optimisations and design choices. Join the conversation on the <a href="https://discuss.ocaml.org/">OCaml Discuss forum</a>, in the <a href="https://github.com/mirage/irmin/issues">GitHub Issues</a>, and through comments on the <a href="https://forum.tezosagora.org/">Tezos Agora post</a>.</p>

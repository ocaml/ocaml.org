---
title: libsndfile Malware on Windows.
description:
url: http://www.mega-nerd.com/erikd/Blog/CodeHacking/libsndfile/malware.html
date: 2010-10-16T01:11:00-00:00
preview_image:
authors:
- Erik de Castro Lopo
source:
---



<p>
I just found a very suspicious bit torrent download available here:
</p>

<center>
<p>
<a href="http://www.torrentzap.com/torrent/1581031/Libsndfile+(64-Bit)+1.0.23">
    http://www.torrentzap.com/torrent/1581031/Libsndfile+%2864-Bit%29+1.0.23</a>
</p>
</center>

<p>
The file being shared is intended to look like the Windows 64 bit installer for
libsndfile-1.0.23 and seems to be widely available on this and a number of other
torrent sites.
</p>

<p>
However, the file on the torrent sites is called
<b><tt>libsndfile-64-bit-1.0.23.exe</tt></b> while the one I distribute is
called
	<a href="http://www.mega-nerd.com/libsndfile/files/libsndfile-1.0.23-w64-setup.exe">
	<b><tt>libsndfile-1.0.23-w64-setup.exe</tt></b></a>.
</p>

<p>
I haven't analyzed the torrent version of the file; I simply don't have the
tools or the knowledge to investigate it.
I don't even have access to a machine that runs 64 bit Windows.
The setup file on my website was cross compiled from Linux to 64 bit Windows
using the very wonderful
	<a href="http://mingw-w64.org/">
	MinGW w64</a>
tools and the setup installer created using
	<a href="http://www.jrsoftware.org/isinfo.php">
	INNO Setup</a>
running under
	<a href="http://www.winehq.org/">
	Wine</a>.
However, the file is named differently and has a different md5sum.
That in itself is more than enough reason to be suspicious.
</p>

<p>
The valid file that I distribute has the following md5 and sha256 sums:
</p>
<pre class="code">

    md5sum    : efe73b7cb52724e7db7bb7d6ce145929
    sha256sum : 30896dac1002a7b509b6f4620317dad730d8ad761e4ff0402db5a94b0d4c09a2

</pre>

<p>
I'm not really aware of how problems like this are addressed on Windows.
Is there a safe, secure, verifiable way of distributing Windows software
packages?
If so, I'd appreciate it if someone could let me know how its done.
</p>

<p>
For Linux this is much easier.
Firstly, the vast majority of people on Linux install libsndfile via their Linux
distribution.
The person who packages libsndfile for any given distribution grabs the source
code tarball from my
	<a href="http://www.mega-nerd.com/libsndfile/#Download">
	web site</a>.
At the same time they should also grab the GPG signature file and verify that
the source code tarball is correct and valid.
</p>

<p>
I don't know what happens in all distributions, but in Debian, the person doing
the packaging GPG signs the package before uploading to the Debian servers.
Once the GPG signed package is uploaded, the packager's GPG signature is checked
before it goes into the unstable distribution.
From there the validity of the package is tracked all the way to where an end
user installs it on a machine via the
	<a href="http://www.debian.org/doc/manuals/securing-debian-howto/ch7#s7.4.1">
	process documented here</a>.
This process means that its very difficult to get malware onto a Linux machine
via the distribution's package manager.
</p>

<p>
I suppose this in one more reason why people should be running Linux rather than
Windows.
</p>




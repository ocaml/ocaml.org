---
title: 'News from May and June '
description: 'It is time to give a brief summary of our recent activities. As usual,
  our contributions were focused on three main objectives: make the OCaml compiler
  faster and easier to use;

  make the OCaml developers more efficient by releasing new development tools and
  improving editor supports;

  organize and pa...'
url: https://ocamlpro.com/blog/2013_07_01_news_from_may_and_june
date: 2013-07-01T13:19:46-00:00
preview_image: URL_de_votre_image
authors:
- "\n    \xC7agdas Bozman\n  "
source:
---

<p>It is time to give a brief summary of our recent activities. As usual, our contributions were focused on three main objectives:</p>
<ul>
<li>make the OCaml compiler faster and easier to use;
</li>
<li>make the OCaml developers more efficient by releasing new development tools and improving editor supports;
</li>
<li>organize and participate to community events around the language
</li>
</ul>
<p>We are also welcoming four interns who will work with us on these objectives during the summer.</p>
<h2>Compiler updates</h2>
<p>Following the ideas he announced in his recent <a href="http://ocamlpro.com/2013/05/24/optimisations-you-shouldnt-do/">blog post</a>, <a href="https://github.com/chambart">Pierre Chambart</a> has made some progress on his <a href="https://github.com/chambart/ocaml/tree/flambda_experiments">inlining branch</a>. He is currently working on stabilizing and cleaning-up the code for optimization which does not take into account inter-module information.</p>
<p>We also continue to work on our profiling tool and start to separate the different parts of the project. We have <a href="https://github.com/cago/ocaml">patched</a> the compiler and runtime, for both bytecode and native code, to generate : <code>.prof</code> files which contain the id-loc information and allow us to recover the location from the identifiers in the header of the block; and to dump a program heap in a file on demand or to monitor a running program without memory and performance overhead. <a href="http://cagdas.bozman.fr/">&Ccedil;agdas Bozman</a> has presented the work he has done so far regarding his PhD to members of the <a href="http://bware.lri.fr/index.php/Presentation">Bware</a> project and we started to test our prototype on industrial use-cases using the <a href="http://why3.lri.fr/">why3</a> platform.</p>
<p>On the multi-core front, <a href="http://ageinghacker.net/">Luca Saiu</a> is continuing his post-doc with <a href="http://fabrice.lefessant.net/">Fabrice le Fessant</a> and is modifying the OCaml runtime to support parallel programming on multi-core computers. Their version of the &ldquo;multi-runtime&rdquo; OCaml provides a message-passing abstraction in which a running OCaml program is &ldquo;split&rdquo; into independent OCaml programs, one per thread (if possible running on its separate core) with a separate instance of the runtime library in order to reduce resource contention both at the software and at the hardware level. Luca is now debugging the support for OCaml multi-threading running on top of a multi-context parallel program. A recent presentation covering this work and its challenges is available <a href="http://ageinghacker.net/talks/ocaml-multiruntime-presentation.pdf">online</a>.</p>
<p>A new intern from <a href="http://www.ens-cachan.fr/">ENS Cachan</a>, <a href="https://github.com/thomasblanc">Thomas Blanc</a> is working on a whole program analysis system. His internship&rsquo;s final goal is to provide a good hint of exceptions that may be left uncaught by the program, resulting a failure. It is quite interesting as exceptions are pretty much the part of the program &ldquo;hard to foresee&rdquo;. The main difficulty comes from higher-order functions (like <code>List.iter</code>). Because of them, a simple local analysis becomes impossible. So the first task is to take the whole program in the form of separated <code>.cmt</code> files, <a href="https://github.com/thomasblanc/ocaml-typedtree-mapper">merge</a> it, and remove every higher-order functions (either by direct inlining if possible or by a very big pattern matching). The merging as already been done through a deep browsing of the compiler&rsquo;s typedtrees. Thomas is now focusing in reordering the code so that higher-order functions can be safely removed.</p>
<p>Finally, we are helping to prepare the release 4.01.0 of the OCaml compiler: Fabrice has integrated his <a href="http://ocamlpro.com/2012/08/08/profiling-ocaml-amd64-code-under-linux/">frame-pointer</a> patch, that can be used to profile the performance of OCaml applications using Linux <code>perf</code> tool; he has added in <code>Pervasives</code> <a href="https://github.com/ocaml/ocaml/commit/ace0205b6499ffdae4588cfdd640c45855217a8f">two application operators</a> that had been optimized before, but were only available for people who knew about that; he has also added a new environment variable, <code>OCAMLCOMPPARAM</code>, that can be used to change how a program is compiled by <code>ocamlc</code>/<code>ocamlopt</code>, without changing the build system (for example, <code>OCAMLCOMPPARAM='g=1' make</code> can be used to compile a project in debug mode without modifying the makefiles).</p>
<h2>Development Tools</h2>
<p>Since the initial release of <a href="http://opam.ocamlpro.com">OPAM</a> in March, we have been kept busy preparing the upcoming <code>1.1.0</code> version, which should interface nicely with the forthcoming set of automatic tools which will constitute the first version of the <a href="http://www.cl.cam.ac.uk/projects/ocamllabs/tasks/platform.html">OCaml Platform</a> that we are helping <a href="http://www.cl.cam.ac.uk/projects/ocamllabs/">OCamlLabs</a> to deliver. We have constantly been focused on fixing bugs and implementing feature requests (more than <a href="https://github.com/OCamlPro/opam/issues?direction=desc&amp;milestone=17&amp;page=1&amp;sort=created&amp;state=closed">70 issues</a> have been closed on Github) and we have recently improved the speed and reliability of <code>opam update</code>. More good news related to OPAM: The number of packages submitted to <a href="http://www.cl.cam.ac.uk/projects/ocamllabs/tasks/platform.html">official</a> repository is steadily increasing with around 20 new packages integrated every-months (and much more already existing package upgrades), and the official Debian package should land in <a href="http://ftp-master.debian.org/new/opam_1.0.0-1.html">testing</a> very soon.</p>
<p>This month, <a href="http://louis.gesbert.fr/cv.en.html">Louis</a> was still busy improving different tools for ocaml code edition. <code>ocp-index</code> and <code>ocp-indent</code>, made for the community to improve the general ocaml experience and kindly funded by <a href="http://janestreet.com">Jane Street</a>, have seen some updates:</p>
<ul>
<li><a href="https://github.com/OCamlPro/ocp-index">ocp-index</a>: the library data access tool which was first presented in <a href="http://ocamlpro.com/2013/04/22/april-monthly-report/">April</a> has seen some progress, with the ability to locate definitions and resolve type names. It is still not yet considered stable though, expect more from it soon. An early release (0.2.0) is in OPAM.
</li>
<li><a href="https://github.com/OCamlPro/ocp-indent">ocp-indent</a> the generic ocaml source code indenter, has seen its usual bunch of fixes, along with some new customization options. Also, its <a href="https://github.com/OCamlPro/ocp-indent/blob/master/src/indentPrinter.mli">library interface</a> has been rewritten, offering much better flexibility and opening the gate to uses like restarting from checkpoints to avoid full reparsing, detecting top-expression boundaries, syntax coloration, etc. We will be releasing 1.3.0 in OPAM very soon.
</li>
</ul>
<p>We are also developing in-house projects aiming at providing a better first experience of OCaml to beginners and students:</p>
<ul>
<li>the new <a href="https://github.com/OCamlPro/ocaml-top">ocaml-top</a> (previous project name <code>ocp-edit-simple</code>) aims to offer a simple, but clean and easy-to-use interface to interact with the ocaml top-level. It is intended mainly for exercises, tutorials and practicals. A release should be coming soon, the Linux version being quite stable while some bugs remain on Windows.
</li>
<li>two new interns, <a href="http://www.linkedin.com/profile/view?id=3D238971426&amp;locale=3Dfr_FR&amp;tr=k3Dtyah">David</a> and <a href="http://www.linkedin.com/profile/view?id=3D65173689">Pierrick</a>, have started working on a <a href="https://github.com/pcouderc/ocp-webedit">web-IDE</a> for OCaml. As students, they have seen sometimes how difficult it could be to install OCaml on some OSes, or simply configure editors like emacs or vim. To solve these issues, the idea is to use only a web browser-based editor and provide a way to compile a project without having to install anything on your computer. For the editing part, the idea is to use <a href="http://ace.ajax.org/">Ace</a> and improve it for OCaml, using <a href="https://github.com/OCamlPro/ocp-indent">ocp-indent</a> for example, which is possible by using <a href="http://ocsigen.org/js_of_ocaml/">js_of_ocaml</a>. The next step will be to glue this editor with both <a href="http://try.ocamlpro.com/">TryOCaml</a> to execute code, and a cloud computing part, to store projects and files and access them from anywhere.
</li>
</ul>
<p>We are also trying to improve cross-compilation tutorials and tools for developing native iOS application under a Linux system, using the OCaml language. <a href="http://fr.linkedin.com/pub/souhire-kenawi/6a/614/54b/">Souhire</a>, our fourth new intern, is experimenting with that idea and will document how to set up such an environment, from the foundation until the publication on the application store (if it is possible). She is starting to look at how iOS applications (with a native graphical interface) written in C can be cross-compiled on <a href="http://code.google.com/p/ios-toolchain-based-on-clang-for-linux/wiki/HowTo_en">Linux</a>, and how the ones written in OCaml can be cross-compiled on <a href="http://psellos.com/ocaml/">MacOSX</a>.</p>
<p>On the library front, Fabrice has completely rewritten the way his <a href="http://www.typerex.org/ocplib-wxOCaml.html">wxOCaml library</a> is generated, compared to what was described in a previous <a href="http://ocamlpro.com/2013/04/02/wxocaml-camlidl-and-class-modules/">blog post</a>. It does not share any code anymore with other wxWidgets bindings (wxHaskell or wxEiffel), but directly generates the stubs from a DSL (close to C++) describing the wxWidgets classes. It should make binding more widgets (classes) and more methods for each widget much easier, and also help for maintenance, evolution and compatibility with wxWidgets version. There are now an interesting set of samples in the library, covering many interesting usages.</p>
<h2>Community</h2>
<p>We have also been pretty active during the last months to promote the use of OCaml in the free-software and research community: we are actively participating to the upcoming <a href="http://ocaml.org/meetings/ocaml/2013/">OCaml 2013</a> and <a href="http://cufp.org/2013cfp">Commercial User of Functional Programming</a> conference which will be help next September in Boston.</p>
<p>While I was visiting <a href="http://janestreet.com/">Jane Street</a> with <a href="http://www.cl.cam.ac.uk/projects/ocamllabs/index.html">OCamlLabs&rsquo;s team</a>, I had the pleasure to be invited to give a talk at the <a href="http://www.meetup.com/NYC-OCaml/">NYC OCaml meetup</a> on OPAM (my slides can be found online <a href="http://ocamlpro.com/pub/ny-meetup.pdf">here</a>). It was a nice meetup, with more than 20 people, hosted in the great Jane-Street New-York offices.</p>
<p>OCamlPro is still organizing OCaml meetups in Paris, hosted by <a href="http://www.irill.org/">IRILL</a> and sponsored by <a href="http://www.lexifi.com/">LexiFi</a> : our last Ocaml Users in PariS (OUPS) meetup was in <a href="http://www.meetup.com/ocaml-paris/events/116100692/">May</a>, there were more than 50 persons ! It was a nice collection of talks, where Esther Baruk spoke about the usage of OCaml at Lexifi, Benoit Vaugon about all the secrets that we always wanted to know about the OCaml bytecode, Fr&eacute;d&eacute;ric Bour presents us Merlin, the new IDe for VIM, and Gabriel Scherer told us how to better interact with the OCaml core team.</p>
<p>We are now preparing our next <a href="http://www.meetup.com/ocaml-paris/events/121412532/">OUPS</a> meeting which will take place at IRILL on Tuesday, July 2nd. Emphasis will be on programming in OCaml in different context. Thus, there will be some js_of_ocaml experiences, GPGPU in OCaml and GADTs in practice. There is still many seats available, so do not hesitate to register to the meetup, but if you cannot, this time, videos of the talks (in French) will be available afterwards.</p>
<p>Not really related to OCaml, we also attend the <a href="http://www.teratec.eu/gb/forum/index.html">Teratec 2013 Forum</a> which brings together a lot of <a href="http://www.scilab.org/">Scilab</a> users. This is part of the <a href="http://www.richelieu.pro">Richelieu</a> research project that <a href="http://www.linkedin.com/profile/view?id=130990583">Michael</a> is working on: his goal is to analyze Scilab code, before just-in-time compilation. It requires a basic type-inference algorithm, but for a language that has not been designed for that ! He is currently struggling with the dynamic aspects of Scilab language. After some work on preprocessing <code>eval</code> and <code>evalstr</code> functions, he is now focusing on how Scilab programers usually write functions. He is currently using different kinds of analyses on real-world Scilab programs to understand how they are structured.</p>
<p>Finally, we are happy to announce that we finally found the time to release the <a href="https://github.com/OCamlPro/ocaml-cheat-sheets">sources</a> of our OCaml <a href="http://www.typerex.org/cheatsheets.html">cheat-sheets</a>. Feel free to contribute by sending patches if you are interested to improve them!</p>


---
title: Try Alt-Ergo in Your Browser
description: Recently, we worked on an online Javascript-based serverless version
  of the Alt-Ergo SMT solver. In what follows, we will explain the principle of this
  version of Alt-Ergo, show how it can be used on a realistic example and compare
  its performances with bytecode and native binaries of Alt-Ergo. Comp...
url: https://ocamlpro.com/blog/2014_07_15_try_alt_ergo_in_your_browser
date: 2014-07-15T13:19:46-00:00
preview_image: URL_de_votre_image
authors:
- "\n    Mohamed Iguernlala\n  "
source:
---

<p>Recently, we worked on an <a href="https://alt-ergo.ocamlpro.com/try.php">online Javascript-based serverless version of the Alt-Ergo SMT solver</a>. In what follows, we will explain the principle of this version of Alt-Ergo, show how it can be used on a realistic example and compare its performances with bytecode and native binaries of Alt-Ergo.</p>
<h3>Compilation</h3>
<p>&quot;Try Alt-Ergo&quot; is a Javascript-based version of Alt-Ergo that can be run on compatible browsers (eg. Firefox, Chromium) without requiring a server for computations. It is obtained by compiling the bytecode executable of the solver into Javascript thanks to <a href="https://ocsigen.org/js_of_ocaml/">js_of_ocaml</a>. The <code>.js</code> file is generated following the scheme given below. Roughly speaking, it consists of three steps:</p>
<ul>
<li>A new frontend (<code>main_js.ml</code>) is added to the sources of Alt-Ergo. This file contains some glue code that allows the generated <code>.js</code> file to interact with an HTML file (insertion of buttons, modification of DIV contents, ...)
</li>
<li>The sources of Alt-Ergo and <code>main_js.ml</code> are compiled with <code>ocamlc</code>. The compilation make use of a preprocessor provided by <code>js_of_ocaml</code>.
</li>
<li>The <code>js_of_ocaml</code> compiler is used to transform the bytecode generated by <code>ocaml</code> into a javascript file.
</li>
</ul>
<p><img src="https://ocamlpro.com/blog/assets/img/diagram_try_alt_ergo_compilation.png" alt="try-alt-ergo-compilation"/></p>
<p>The <code>.js</code> file is then plugged into an HTML file that fits with the glue code inserted in <code>main_js.ml</code>.</p>
<h3>General overview of the HTML interface</h3>
<p>The HTML interface is made of four panels:</p>
<ul>
<li>The left panel is an editable textarea in which you can write/past/load the formula you want to prove.
</li>
<li>The bottom-left panel is used to display the answer of Alt-Ergo.
</li>
<li>The middle panel contains a set of buttons that allow to interact with both the interface and the javascript version of Alt-Ergo.
</li>
<li>The right panel is used to display different views. The default view (&quot;Options&quot;) allows to control the options of Alt-Ergo. When a formula is proved valid, one may switch to &quot;Statistics&quot; view, thanks to the corresponding button in the middle, to see what are the quantified axioms and predicates that are used/instantiated during the proof. The &quot;Debug&quot; view shows the information received by <code>main_js.ml</code> from the HTML interface. The &quot;Examples&quot; view shows some basic examples in Alt-Ergo's native input language that can be loaded in the left panel by a simple click.
</li>
</ul>
<p><img src="https://ocamlpro.com/blog/assets/img/screenshot_try_alt_ergo_interface.png" alt="try-alt-ergo-interface"/></p>
<h3>A step-by-step example</h3>
<p>Let us see how &quot;Try Alt-Ergo&quot; works on a formula translated from Atelier-B in the context of the BWare project:</p>
<ul>
<li>First, open <a href="https://alt-ergo.ocamlpro.com/try.php">Try Alt-Ergo</a> in a new tab/window.
</li>
<li>Download the formula <a href="https://www.ocamlpro.com/files/try-alt-ergo.why">try-alt-ergo.why</a>. This formula contains 177 quantified axioms and 132 predicates.
</li>
<li>Click on the &quot;Load a Local File&quot; button of Try alt-ergo's interface and load the example into the left panel.
</li>
<li>Go to &quot;Options&quot; panel and set the <code>maximum number of steps</code> to 1000, the <code>maximum number of triggers</code> to 1, and deactivate <code>E-matching</code>
</li>
<li>Click on &quot;Ask Alt-Ergo&quot; button and wait approximately 60 seconds (depending on your computer). On my laptop, Alt-Ergo given the following answer after, approximately, 40 seconds.
</li>
</ul>
<pre><code class="language-shell-session"># Alt-Ergo's answer: Valid (37.2260 seconds) (222 steps)
</code></pre>
<ul>
<li>Now, you can navigate into the &quot;Statistics&quot; panel to see the quantified axioms and predicates that are instantiated during the proof, those that are potentially used, and those that have never been instantiated.
</li>
</ul>
<h3>Limitations</h3>
<ul>
<li>The Javascript version is slower than native and bytecode versions. In fact, bytecode executable is 4 times faster and native executable is 42 times faster than &quot;Try Alt-Ergo&quot;, as shown below.
</li>
</ul>
<pre><code class="language-shell-session">./alt-ergo.byte -nb-triggers 1 -no-Ematching -max-split infinity -save-used-context try-alt-ergo.why
File &quot;/home/mi/Bureau/po.why&quot;, line 3017, characters 1-2450:Valid (9.3105) (222)

./alt-ergo.opt -nb-triggers 1 -no-Ematching -max-split infinity -save-used-context try-alt-ergo.why
File &quot;/home/mi/Bureau/po.why&quot;, line 3017, characters 1-2450:Valid (0.8750) (222)
</code></pre>
<ul>
<li>Since it is not possible to set a time limit in javascript. The &quot;steps&quot; mechanism should be used instead. This limit controls the number of calls to the decision procedure component of the solver.
</li>
<li>Currently, the integration of external plugins (such as our miniSAT-based SAT solver) is not supported
</li>
<li>Compared to AltGr-Ergo, statistics and debug information are only shown at the end of the execution.
</li>
<li>&quot;Asking Alt-Ergo&quot; may report &quot;syntax error&quot; on well formed files for Safari and Midori users. The &quot;Load a Local File&quot; button is not working on Opera browser.
</li>
</ul>
<p>[ Acknowledgement: this work is financially supported by the <a href="https://bware.lri.fr/">BWare project</a>. ]</p>
<h1>Comments</h1>
<p>Joshua Pratt (10 January 2020 at 5 h 20 min):</p>
<blockquote>
<p>Can the compiled alt-ergo.js be uploaded to npm? I&rsquo;d love to use it in a web page I&rsquo;m working on.</p>
</blockquote>
<p>OCamlPro (6 March 2020 at 16 h 03 min):</p>
<blockquote>
<p>Hi Joshua, thanks for passing by &#128578; We have no plans of building a bridge between a version of Alt-Ergo in JS and npm. However, you can tweak Alt-Ergo to suit your needs! We would recommend taking a look at Try Why3 http://why3.lri.fr/try/, where you will find a JavaScript version of Alt-Ergo. You can follow their instructions to build Alt-Ergo in JavaScript https://gitlab.inria.fr/why3/why3/tree/master/src/trywhy3</p>
</blockquote>
<p>Bharat Jayaraman (26 February 2020 at 17 h 37 min):</p>
<blockquote>
<p>This is VERY USEFUL tool!</p>
<p>I am using it in a course on software verification here in Buffalo. It&rsquo;s great for checking verification conditions.</p>
<p>Many thanks,
Bharat</p>
</blockquote>
<p>OCamlPro (6 March 2020 at 16 h 04 min):</p>
<blockquote>
<p>Hi Bharat! Thank you for your message, we are always glad to hear from our users! If you feel so inclined, you can drop us an email at alt-ergo@ocamlpro.com to tell us more about your experience with Alt-Ergo and any feedback you may have.</p>
</blockquote>


---
title: 10 Feb 2025
description:
url: https://ryan.freumh.org/2025-02-10.html
date: 2025-02-10T00:00:00-00:00
preview_image:
authors:
- Ryan Gibb
source:
---

<article>
    <div class="container">
        <span>  Previous: <a href="https://ryan.freumh.org/2025-02-03.html"> 3 Feb 2025</a>  </span>
        <span>  Next: <a href="https://ryan.freumh.org/2025-02-17.html">17 Feb 2025</a>  </span>
    </div>
    
    <section>
        <ol>
<li><p><span>Babel: solve the opam repository with <a href="https://github.com/RyanGibb/pubgrub-opam">pubgrub-opam</a></span></p>
<ol>
<li><p><span>While converting the whole repository I fixed a
bug in a package <a href="https://github.com/ocaml/opam-repository/pull/27429">definition</a></span></p></li>
<li><p><span><span class="done DONE">X</span> <a href="https://github.com/RyanGibb/pubgrub-opam/commit/2cb66fe1ae13bc16e1b5116948de5ee2dcba990a">on-demand
dependency provider</a></span></p>
<p><span>opam-repository has a lot of packages, so we only
load packages we need</span></p>
<ol>
<li><p><span><span class="todo TODO">O</span> add a <a href="https://pubgrub-rs-guide.pages.dev/pubgrub_crate/caching">caching
dependency provider</a> with interior mutation</span></p></li>
</ol></li>
<li><p><span><span class="done DONE">X</span> parse <a href="https://opam.ocaml.org/doc/Manual.html#Package-Formulas">filtered
package formula</a></span></p>
<ul>
<li>While the grammar allows for it I can’t actually find any booleans
or integers in the dependency formula of Opam.</li>
<li>Why are they there?</li>
<li>I’m just ignoring them for now so I don’t need to complement logic
for comparing them etc.</li>
</ul></li>
<li><p><span><span class="done DONE">X</span> encode
filtered package formula in pubgrub</span></p>
<p><span>Take <code class="verbatim">(A, 1)</code> depending
on <code class="verbatim">B {build}</code> as a minimal example. We
encode this in the ‘package calculus’ as</span></p>
<pre class="example"><code>(A, 1) -&gt; (B {build}, *)
(B {build}, lhs) -&gt; (B, *), (`build`, false)
(B {build}, rhs) -&gt; (`build`, true)
</code></pre>
<p><span>Note that <code class="verbatim">B {build}</code>
is a proxy package associated with the formula <code class="verbatim">build</code>.</span></p>
<ol>
<li><p><span><span class="todo TODO">O</span> conjuntions
and disjuntions aren’t complete</span></p></li>
</ol></li>
</ol></li>
<li><p><span>A deployment idea</span></p>
<ul>
<li>whenever a binary is executed, execute the packaging/build lazily to
satisfy the request for that binary</li>
<li>you could use <code class="verbatim">binfmt_misc</code> for this in
Linux</li>
<li>with mount namespaces, you could hide the compilation/packaging of
the binary in its own namespace and the only thing “exported” to the
main filesystem are the binary/data needed to runtime</li>
</ul></li>
<li><p><span>Teaching</span></p>
<p><span>I marked the first supervision work for Robinson
Part II’s Computer Networking.</span></p>
<p><span>There’s a bit of a tension between examinable work
and hands-on experience. I’ve <a href="https://ryan.freumh.org/2024-02-12.html#teaching">previously</a> given some practical ideas
for students, but didn’t get any bites.</span></p>
<p><span>Patrick said his networking supervisor was very
light on the setting / marking work, but gave them a lot of hands-on
demos of real life Linux networking with <code class="verbatim">iptables</code> and so on. Michael recounted his Unix
socket programming introduction to networking, which I think is great.
My first networking practical was writing a file distribution program
then some hands-on performance analysis of TCP.</span></p>
<p><span>I think a bit of this practical element is missing
in the Cambridge curriculum. The course page <a href="https://www.cl.cam.ac.uk/teaching/2425/CompNet/handson/">encourages</a>
learning by doing, but with the pressures of term I haven’t found many
students have the time to pick up work that does count towards their
grade. The masters-level course on networking, <a href="https://www.cl.cam.ac.uk/teaching/2122/L50/">Introduction to
networking and systems measurements</a>, gets very practical, which I
think is great.</span></p></li>
<li><p><span>SNS</span></p>
<ol>
<li><p><span><span class="todo TODO">O</span> read <a href="https://arxiv.org/pdf/2405.20745">https://arxiv.org/pdf/2405.20745</a>
and think about how it could apply to a spatial DSL</span></p></li>
</ol></li>
<li><p><span>Misc</span></p>
<ol>
<li><p><span><span class="todo TODO">O</span> write up
research ideas for website</span></p></li>
</ol></li>
</ol>
    </section>
</article>


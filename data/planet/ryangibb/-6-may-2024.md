---
title: ' 6 May 2024'
description:
url: https://ryan.freumh.org/2024-05-06.html
date: 2024-05-06T00:00:00-00:00
preview_image:
authors:
- Ryan Gibb
source:
---

<article>
    <div class="container">
        <span>  Previous: <a href="https://ryan.freumh.org/2024-04-29.html">29 Apr 2024</a>  </span>
        <span>  Next: <a href="https://ryan.freumh.org/2024-05-13.html">13 May 2024</a>  </span>
    </div>
    
    <section>
        <p><span>My Tarides contract is progressing nicely, and we
now have Opam setting an environment built from Nix to provide external
dependencies. I’ve also indexed all of Nixpkgs history in order to do
version solving across it.</span></p>
<p><span>Spoke to Roy about a possible Part II project, and
wrote another proposal on an ‘OCaml Wayland Compositor’; something I’ve
been meaning to do for a while but have yet to find the time.</span></p>
<blockquote>
<p><span>Wayland <a href="https://ryan.freumh.org/atom.xml#fn1" class="footnote-ref" role="doc-noteref"><sup>1</sup></a> is a communications
protocol for next-generation display servers used in Unix-like systems
which has been adopted as the default display server by Linux
distributions including Fedora with KDE, and Ubuntu and Debian with
GNOME. It aims to replace the venerable X display server with a modern
alternative. X leaves logic such as window management to application
software, which has allowed the proliferation of different approaches.
Wayland, however, centralises this logic in the ‘compositor’, which
assumes both display server and window manager roles <a href="https://ryan.freumh.org/atom.xml#fn2" class="footnote-ref" role="doc-noteref"><sup>2</sup></a>.</span></p>
<p><span>Libraries such as wlroots, libweston, and ‘small
Wayland compositor’, exist to provide a basis on which to build a
Wayland compositor. Much of the Wayland ecosystem is written in C, but
modern memory-safe, type-safe, composable systems programming languages
like OCaml offer tempting alternatives. This project proposes writing a
Wayland compositor in OCaml, which opens up interesting opportunities
for writing custom window management logic similar to how xmonad does
for X <a href="https://ryan.freumh.org/atom.xml#fn3" class="footnote-ref" role="doc-noteref"><sup>3</sup></a> rather than relying on IPC
mechanisms used in state-of-the-art systems <a href="https://ryan.freumh.org/atom.xml#fn4" class="footnote-ref" role="doc-noteref"><sup>4</sup></a>.</span></p>
<p><span>This project is suitable for an ambitious student
with a keen interest in graphics, communication protocols, and operating
systems. Starting points include completing OCaml wlroots bindings <a href="https://ryan.freumh.org/atom.xml#fn5" class="footnote-ref" role="doc-noteref"><sup>5</sup></a> enough to implement an OCaml version
of the tinywl compositor <a href="https://ryan.freumh.org/atom.xml#fn6" class="footnote-ref" role="doc-noteref"><sup>6</sup></a>, and the pure OCaml implementation
of the Wayland protocol <a href="https://ryan.freumh.org/atom.xml#fn7" class="footnote-ref" role="doc-noteref"><sup>7</sup></a>.</span></p>
</blockquote>
<section class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li><p><span><a href="https://wayland.freedesktop.org/">https://wayland.freedesktop.org/</a></span><a href="https://ryan.freumh.org/atom.xml#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li><p><span><a href="https://wayland.freedesktop.org/faq.html#heading_toc_j_11">https://wayland.freedesktop.org/faq.html#heading_toc_j_11</a></span><a href="https://ryan.freumh.org/atom.xml#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li><p><span><a href="https://github.com/xmonad/xmonad">https://github.com/xmonad/xmonad</a></span><a href="https://ryan.freumh.org/atom.xml#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li><p><span><a href="https://github.com/swaywm/sway/blob/master/sway/sway-ipc.7.scd">https://github.com/swaywm/sway/blob/master/sway/sway-ipc.7.scd</a></span><a href="https://ryan.freumh.org/atom.xml#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li><p><span><a href="https://github.com/swaywm/ocaml-wlroots">https://github.com/swaywm/ocaml-wlroots</a></span><a href="https://ryan.freumh.org/atom.xml#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li><p><span><a href="https://gitlab.freedesktop.org/wlroots/wlroots/-/blob/master/tinywl/tinywl.c">https://gitlab.freedesktop.org/wlroots/wlroots/-/blob/master/tinywl/tinywl.c</a></span><a href="https://ryan.freumh.org/atom.xml#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li><p><span><a href="https://github.com/talex5/ocaml-wayland">https://github.com/talex5/ocaml-wayland</a></span><a href="https://ryan.freumh.org/atom.xml#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
    </section>
</article>


<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/59c64e8e0cd4b887f80a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/59c64e8e0cd4b887f80a.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="/_next/static/chunks/webpack-43375c3d74aa814440ba.js" defer=""></script><script src="/_next/static/chunks/framework-56721e7fe9e004cd9e49.js" defer=""></script><script src="/_next/static/chunks/main-ff11dfa7b9d2932d51f3.js" defer=""></script><script src="/_next/static/chunks/pages/_app-07487d06e9f25472007b.js" defer=""></script><script src="/_next/static/chunks/940-69f823f49742ab32bc63.js" defer=""></script><script src="/_next/static/chunks/908-08eeb7bba98263e14afe.js" defer=""></script><script src="/_next/static/chunks/891-1bbf9c7984e84793c141.js" defer=""></script><script src="/_next/static/chunks/pages/%5Blang%5D/resources/%5Btutorial%5D-d60f5912d8379c3f4f23.js" defer=""></script><script src="/_next/static/5vwEGiEdVvGQoOBpMUVkF/_buildManifest.js" defer=""></script><script src="/_next/static/5vwEGiEdVvGQoOBpMUVkF/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="bg-white"><div class="pb-0  bg-yellowdark"><div class="max-w-7xl mx-auto"><div class="flex flex-col md:flex-row items-center text-center text-white"><div class="w-full md:w-3/12 font-bold text-2xl">OCaml.org v3</div><div class="w-full md:w-8/12"><div class="h-4 relative rounded-full overflow-hidden ring-8 ring-white m-8"><div class="w-full h-full bg-white absolute"></div><div class="h-full rounded-full bg-yellowdark absolute" style="width:30%"></div></div></div><div class="w-full md:w-1/12 font-bold text-2xl">30%</div></div><div class="flex flex-col items-center"><button class="inline-flex items-center pt-0 pb-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-yellowdark focus:outline-none" type="button">See more v</button></div><div class="hidden"><div class="flex flex-col"><div class="-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"><div class="py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"><div class="shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"><table class="table-auto min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" scope="col">version</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" scope="col">description</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" scope="col">period</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" scope="col">completion</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" scope="col">results</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"><tr><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">v3.1</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Select technologies</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Nov - Jan 2020</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">100%</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Selected NextJS as static site generator, ReScript as implementation language, FlowMapp as sitemap tool, Figma for design, Tailwind for CSS.</td></tr><tr><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">v3.2</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Implement most important layouts</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Feb - Apr 2021</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">100%</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The 10 most important pages have been designed and implemented.</td></tr><tr><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Design information architecture</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Aug 2020 - Jun 2021</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">60%</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"> Sitemap is complete, 8 user personas and some journeys have been defined.</td></tr><tr><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">v3.3</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Implement all 40 distinct layouts</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Jun 30, 2021</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">25%</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">A quarter of the 40 distinct pages have been implemented.</td></tr><tr><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Port 40 most important pages</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Aug 2021</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">10%</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Some work started.</td></tr><tr><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">v3.4</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Implement OCaml Manual</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Jul - Aug 2021</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">0%</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Not started.</td></tr><tr><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">v3.5</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Integrate docs.ocaml.org</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Jul 2021</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">0%</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Pending completion of the separate docs.ocaml.org project.</td></tr><tr><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Implement multilingual site framework</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Aug 2021</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">10%</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Some work started.</td></tr><tr><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Finalize site design</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Jan - Aug 2021</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">50%</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Half of the 40 pages needing a distinct design have been designed.</td></tr><tr><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">v3.6</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Go live on ocaml.org, replacing old site</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Aug 1, 2021</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">30%</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">One-third of the work has been done.</td></tr></tbody></table></div></div></div></div></div></div></div><div class="relative shadow"><div class="relative font-roboto"><div class="max-w-7xl mx-auto px-4 sm:px-6 "><div class="flex justify-between items-center md:justify-start py-6 md:space-x-10 "><div class="flex justify-start "><a class="" href="/"><img class="h-8 w-auto sm:h-10" alt="" src="/static/logo1.jpeg"/></a></div><nav class="hidden md:flex space-x-10 "><div class="relative"><button aria-expanded="false" class="text-gray-500  pl-2 group bg-white rounded-md inline-flex items-center text-base font-medium hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orangedark" type="button"><span>Principles</span><svg aria-hidden="true" class="text-gray-400 ml-2 h-5 w-5 group-hover:text-gray-500" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" fill-rule="evenodd"></path></svg></button><div class="absolute z-10 left-1/2 transform -translate-x-1/4 mt-3 px-2 w-screen max-w-sm sm:px-0  hidden "><div class="rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 overflow-hidden"><div class="relative grid gap-6 bg-white px-5 py-6 sm:gap-6 sm:p-8"><a class="-m-3 p-3 block rounded-md hover:bg-gray-50 transition ease-in-out duration-150" href="/en/principles/whatisocaml/"><div class="h-7 w-7 float-left fill-current stroke-current text-orangedark"><svg version="1.1" viewBox="0 0 12.7 15.9" xmlns="http://www.w3.org/2000/svg"><path d="m9.01 1.23a0.676 0.676 0 0 0-0.658 0.52 7.02 7.02 0 0 0-0.185 1.41 0.338 0.338 0 0 1-0.674 0.0292 6.26 6.26 0 0 0-0.304-1.33 0.81 0.81 0 0 0-1.56 0.118 3.15 3.15 0 0 1-1.26 1.98 0.495 0.495 0 0 1-0.564 9e-3 1.49 1.49 0 0 1-0.459-0.492 0.495 0.495 0 0 1 0.023-0.531 1.22 1.22 0 0 0 0.141-0.266 0.295 0.295 0 0 0-0.374-0.383 0.987 0.987 0 0 0-0.183 0.0867 0.819 0.819 0 0 0-1.21-0.24 1.36 1.36 0 0 1-0.767 0.395 0.516 0.516 0 0 0 0.0788 1.03h0.42a0.789 0.789 0 0 0 0.507 0.259 2.67 2.67 0 0 0 2.32 2.59 0.471 0.471 0 0 0 0.328-0.0783 1.81 1.81 0 0 0 0.438 1.11 3.97 3.97 0 0 1 1.15 2.78 0.202 0.202 0 0 1-0.11 0.18 2.56 2.56 0 0 0-0.682 0.506 0.325 0.325 0 0 0 0.234 0.55h1.43a0.468 0.468 0 0 0 0.0934-0.784 0.202 0.202 0 0 1-0.0744-0.156v-1.43a1.5 1.5 0 0 0-0.15-1.08v-0.591a2.43 2.43 0 0 0 1.68 0.0748 3.43 3.43 0 0 0 1.4-0.668 1.78 1.78 0 0 0 0.228 0.465 2.84 2.84 0 0 1 0.408 2.9 0.202 0.202 0 0 1-0.115 0.11 2.56 2.56 0 0 0-0.934 0.617 0.325 0.325 0 0 0 0.234 0.55h1.43a0.468 0.468 0 0 0 0.122-0.759 0.202 0.202 0 0 1-0.0558-0.197 4.7 4.7 0 0 1 0.706-1.51 0.383 0.383 0 0 0 0.0598-0.309 6.18 6.18 0 0 1 0.035-2.97 1.06 1.06 0 0 0-0.45-1.16l-0.486-0.315a1.08 1.08 0 0 1-0.453-0.618 5.11 5.11 0 0 0-1.26-2.19 0.676 0.676 0 0 0-0.485-0.205zm-0.00227 0.181a0.495 0.495 0 0 1 0.355 0.15 4.93 4.93 0 0 1 1.21 2.11 1.26 1.26 0 0 0 0.529 0.721l0.486 0.315a0.882 0.882 0 0 1 0.374 0.962 6.36 6.36 0 0 0-0.0358 3.06 0.202 0.202 0 0 1-0.0319 0.163 4.88 4.88 0 0 0-0.733 1.57 0.383 0.383 0 0 0 0.105 0.374 0.287 0.287 0 0 1-0.0429 0.447h-1.38a0.143 0.143 0 0 1-0.103-0.243 2.38 2.38 0 0 1 0.868-0.574 0.383 0.383 0 0 0 0.216-0.208 3.02 3.02 0 0 0-0.429-3.08 1.6 1.6 0 0 1-0.218-1.33 0.0906 0.0906 0 0 0-0.174-0.0491 1.78 1.78 0 0 0-0.0319 0.83 3.25 3.25 0 0 1-1.39 0.686 2.25 2.25 0 0 1-1.63-0.0978v-0.624a0.0906 0.0906 0 0 0-0.181 0v1.46a1.32 1.32 0 0 1 0.15 1.01v1.46a0.383 0.383 0 0 0 0.14 0.297 0.287 0.287 0 0 1-0.0248 0.462h-1.38a0.143 0.143 0 0 1-0.103-0.243 2.38 2.38 0 0 1 0.634-0.47 0.383 0.383 0 0 0 0.209-0.343 4.15 4.15 0 0 0-1.19-2.9 1.62 1.62 0 0 1-0.308-1.57 0.0907 0.0907 0 1 0-0.172-0.058 1.81 1.81 0 0 0-0.073 0.298 0.29 0.29 0 0 1-0.324 0.243 2.48 2.48 0 0 1-2.16-2.42 0.789 0.789 0 0 0 0.404-0.176 0.0907 0.0907 0 0 0-0.116-0.139 0.608 0.608 0 0 1-0.888-0.123h-0.508a0.335 0.335 0 0 1-0.0505-0.667 1.54 1.54 0 0 0 0.86-0.438 0.638 0.638 0 0 1 0.942 0.212 0.987 0.987 0 0 0-0.0894 0.0907 0.0909 0.0909 0 1 0 0.138 0.119 0.805 0.805 0 0 1 0.342-0.234 0.114 0.114 0 0 1 0.144 0.148 1.04 1.04 0 0 1-0.119 0.227 0.676 0.676 0 0 0-0.031 0.725 1.68 1.68 0 0 0 0.515 0.551 0.676 0.676 0 0 0 0.772-0.0116 3.33 3.33 0 0 0 1.33-2.1 0.629 0.629 0 0 1 1.21-0.0912 6.08 6.08 0 0 1 0.295 1.29 0.52 0.52 0 0 0 1.04-0.0451 6.84 6.84 0 0 1 0.18-1.37 0.495 0.495 0 0 1 0.482-0.381z" stroke-width=".289"></path><path d="m2.16 2.76a0.128 0.128 0 1 0-0.256 0 0.128 0.128 0 1 0 0.256 0z" stroke-width=".2"></path></svg></div><dt><p class="ml-10 text-sm font-semibold text-gray-900">Why OCaml</p></dt><dd class="ml-10 text-sm text-gray-500">Find out about OCaml&#x27;s history and how it became what it is today.</dd></a><a class="-m-3 p-3 block rounded-md hover:bg-gray-50 transition ease-in-out duration-150" href="/en/principles/users/"><div class="h-7 w-7 float-left fill-current stroke-current text-orangedark"><svg class="stroke-0" version="1.1" viewBox="0 0 60 75" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><path d="M6,55h48c0.6,0,1-0.4,1-1V33c0-0.3-0.1-0.5-0.3-0.7l-9-8.4L44,5.9c0-0.1,0-0.1,0-0.2c0-0.1,0-0.1,0-0.2  c0-0.1-0.1-0.1-0.1-0.2c0,0-0.1-0.1-0.1-0.1c-0.1-0.1-0.1-0.1-0.2-0.1c0,0-0.1-0.1-0.1-0.1C43.3,5,43.1,5,43,5h-6  c-0.1,0-0.3,0-0.4,0.1c0,0-0.1,0-0.1,0.1c-0.1,0-0.1,0.1-0.2,0.1c0,0-0.1,0.1-0.1,0.1c0,0.1-0.1,0.1-0.1,0.2c0,0.1,0,0.1,0,0.2  c0,0.1,0,0.1,0,0.2l-1.3,20.8l-8-7.4c-0.3-0.3-0.7-0.3-1.1-0.2C25.2,19.2,25,19.6,25,20v10.7L12.7,19.3c-0.3-0.3-0.7-0.3-1.1-0.2  C11.2,19.2,11,19.6,11,20v12H6c-0.6,0-1,0.4-1,1v21C5,54.6,5.4,55,6,55z M42,7v1h-4V7H42z M37.8,10h4.6l1.1,11.9l-2.8-2.6  c-0.3-0.3-0.7-0.3-1.1-0.2C39.2,19.2,39,19.6,39,20v10.7l-2.4-2.2L37.8,10z M7,34h5c0.6,0,1-0.4,1-1V22.3l12.3,11.4  c0.3,0.3,0.7,0.3,1.1,0.2c0.4-0.2,0.6-0.5,0.6-0.9V22.3l12.3,11.4c0.3,0.3,0.7,0.3,1.1,0.2c0.4-0.2,0.6-0.5,0.6-0.9V22.3l3.1,2.9  c0,0,0,0,0,0l8.9,8.3V53H7V34z"></path><path d="M16,38h-4c-0.6,0-1,0.4-1,1v4c0,0.6,0.4,1,1,1h4c0.6,0,1-0.4,1-1v-4C17,38.4,16.6,38,16,38z M15,42h-2v-2h2V42z"></path><path d="M24,38h-4c-0.6,0-1,0.4-1,1v4c0,0.6,0.4,1,1,1h4c0.6,0,1-0.4,1-1v-4C25,38.4,24.6,38,24,38z M23,42h-2v-2h2V42z"></path><path d="M32,38h-4c-0.6,0-1,0.4-1,1v4c0,0.6,0.4,1,1,1h4c0.6,0,1-0.4,1-1v-4C33,38.4,32.6,38,32,38z M31,42h-2v-2h2V42z"></path><path d="M40,38h-4c-0.6,0-1,0.4-1,1v4c0,0.6,0.4,1,1,1h4c0.6,0,1-0.4,1-1v-4C41,38.4,40.6,38,40,38z M39,42h-2v-2h2V42z"></path><path d="M48,38h-4c-0.6,0-1,0.4-1,1v4c0,0.6,0.4,1,1,1h4c0.6,0,1-0.4,1-1v-4C49,38.4,48.6,38,48,38z M47,42h-2v-2h2V42z"></path></svg></div><dt><p class="ml-10 text-sm font-semibold text-gray-900">Industrial Users</p></dt><dd class="ml-10 text-sm text-gray-500">Discover the organisations that use OCaml to accomplish their goals.</dd></a><a class="-m-3 p-3 block rounded-md hover:bg-gray-50 transition ease-in-out duration-150" href="/en/principles/academic/"><div class="h-7 w-7 float-left fill-current stroke-current text-orangedark"><svg class="stroke-2" version="1.1" viewBox="0 0 100 125" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><g transform="translate(0,-952.36218)"><path d="M 47.25 23 A 1.0001 1.0001 0 0 0 47.125 23.0625 L 5.625 39.0625 A 1.0001 1.0001 0 0 0 5.625 40.90625 L 21.1875 46.90625 A 1.0001 1.0001 0 0 0 21.1875 47 L 21.1875 63.4375 A 1.0001 1.0001 0 0 0 21.8125 64.34375 L 47.09375 74.90625 A 1.0001 1.0001 0 0 0 47.84375 74.90625 L 73.15625 64.34375 A 1.0001 1.0001 0 0 0 73.75 63.4375 L 73.75 47 A 1.0001 1.0001 0 0 0 73.75 46.9375 L 80.875 44.1875 A 1.0040202 1.0040202 0 0 0 80.15625 42.3125 L 47.46875 54.9375 L 8.75 40 L 47.5 25.03125 L 87.9375 40.65625 L 87.9375 65.09375 C 85.072141 65.568778 82.875 68.037767 82.875 71 C 82.875 74.2988 85.600803 77 88.9375 77 C 92.274197 77 95 74.2988 95 71 C 95 68.037767 92.802859 65.568778 89.9375 65.09375 L 89.9375 40 A 1.0001 1.0001 0 0 0 89.3125 39.0625 L 47.84375 23.0625 A 1.0001 1.0001 0 0 0 47.25 23 z M 23.1875 47.6875 L 47.125 56.90625 A 1.0001 1.0001 0 0 0 47.84375 56.90625 L 71.75 47.6875 L 71.75 62.75 L 47.46875 72.90625 L 23.1875 62.75 L 23.1875 47.6875 z M 88.9375 66.96875 C 91.187128 66.96875 92.96875 68.7759 92.96875 71 C 92.96875 73.2241 91.187128 75 88.9375 75 C 86.687872 75 84.875 73.2241 84.875 71 C 84.875 68.7759 86.687872 66.96875 88.9375 66.96875 z " transform="translate(0,952.36218)"></path></g></svg></div><dt><p class="ml-10 text-sm font-semibold text-gray-900">Academic Excellence</p></dt><dd class="ml-10 text-sm text-gray-500">Learn about the academics that research programming language technology.</dd></a><a class="-m-3 p-3 block rounded-md hover:bg-gray-50 transition ease-in-out duration-150" href="/en/principles/successes/"><div class="h-7 w-7 float-left fill-current stroke-current text-orangedark"><svg version="1.1" viewBox="0 0 160 200" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><path d="M151.305,149.32l-35.11-68.89c-0.6-1.17-1.8-1.91-3.12-1.91s-2.52,0.74-3.12,1.91l-11.98,23.5l3.93,7.71l11.17-21.92  l29.4,57.69h-22.34h-2.801L66.999,48.66v-8.949h42.25c1.933,0,3.5-1.567,3.5-3.5V9.09c0-1.933-1.567-3.5-3.5-3.5h-45.75  c-1.933,0-3.5,1.567-3.5,3.5v13.824v13.297V48.66L8.69,149.321c-0.553,1.085-0.502,2.38,0.134,3.418  c0.636,1.039,1.767,1.672,2.984,1.672h103.381c0.001,0,0.002,0,0.003,0h4.863h28.14c1.21,0,2.34-0.63,2.98-1.67  C151.815,151.7,151.865,150.41,151.305,149.32z M66.999,22.914V12.59h38.75v20.122h-38.75V22.914z M63.499,57.207l10.873,21.332  c-5.251-0.709-10.46,2.09-12.683,7.08c-0.751,1.687-2.234,2.781-4.067,3.003c-1.829,0.221-3.533-0.488-4.665-1.947l-2.703-3.484  L63.499,57.207z M17.52,147.41l29.221-57.328l0.685,0.883c2.329,3.002,5.817,4.696,9.543,4.695c0.494,0,0.993-0.029,1.493-0.09  c4.273-0.517,7.87-3.172,9.622-7.104c1.063-2.386,3.744-3.588,6.231-2.8l4.402,1.396l30.76,60.347H17.52z"></path><path d="M90.023,15.97l-5.161,5.71l-2.427-1.948c-1.075-0.864-2.649-0.692-3.514,0.384c-0.865,1.077-0.692,2.65,0.384,3.514  l4.265,3.424c0.461,0.37,1.014,0.551,1.564,0.551c0.684,0,1.364-0.279,1.855-0.824l6.742-7.46c0.926-1.024,0.846-2.605-0.178-3.531  C92.529,14.866,90.948,14.947,90.023,15.97z"></path></svg></div><dt><p class="ml-10 text-sm font-semibold text-gray-900">Success Stories</p></dt><dd class="ml-10 text-sm text-gray-500">Read about the things that have been achieved using OCaml.</dd></a></div></div></div></div><div class="relative"><button aria-expanded="false" class="text-gray-500 pl-2 group bg-white rounded-md inline-flex items-center text-base font-medium hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orangedark" type="button"><span>Resources</span><svg aria-hidden="true" class="text-gray-400 ml-2 h-5 w-5 group-hover:text-gray-500" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" fill-rule="evenodd"></path></svg></button><div class="absolute z-10 left-1/2 transform -translate-x-1/3 mt-3 px-2 w-screen max-w-sm sm:px-0  hidden "><div class="rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 overflow-hidden"><div class="relative grid gap-6 bg-white px-5 py-6 sm:gap-6 sm:p-8"><a class="-m-3 p-3 block rounded-md hover:bg-gray-50 transition ease-in-out duration-150" href="/en/resources/language/"><div class="h-7 w-7 float-left fill-current stroke-current text-orangedark"><svg version="1.1" viewBox="0 0 100 125" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><path d="M10.7,22.2c0.4,0.2,0.9,0.2,1.4,0c13.2-5.4,28.6,1.2,28.7,1.2c0.2,0.1,0.5,0.1,0.7,0.1  c0.7,0,1.3-0.4,1.6-1.1c0.4-0.9,0-1.9-0.9-2.3c-0.7-0.3-16.9-7.2-31.5-1.3c-0.9,0.4-1.3,1.4-1,2.3C10,21.7,10.3,22,10.7,22.2z"></path><path d="M57.2,20.2c-0.4,0.2-0.8,0.5-0.9,1s-0.2,0.9,0,1.4c0.3,0.6,0.9,1.1,1.6,1.1c0.2,0,0.5,0,0.7-0.1  c0.2-0.1,15.6-6.6,28.7-1.2c0.4,0.2,0.9,0.2,1.4,0c0.4-0.2,0.8-0.5,1-1c0.4-0.9-0.1-1.9-1-2.3C74.1,13,57.9,19.9,57.2,20.2z"></path><path d="M42.6,31.4c-0.7-0.3-16.9-7.2-31.5-1.3c-0.9,0.4-1.3,1.4-1,2.3c0.2,0.4,0.5,0.8,1,1c0.4,0.2,0.9,0.2,1.4,0  C25.7,28,41,34.6,41.2,34.6c0.2,0.1,0.5,0.1,0.7,0.1c0.7,0,1.3-0.4,1.6-1.1C43.9,32.8,43.5,31.8,42.6,31.4z"></path><path d="M89,30.1c-14.6-5.9-30.8,1-31.5,1.3c-0.9,0.4-1.3,1.4-0.9,2.3c0.3,0.6,0.9,1.1,1.6,1.1c0.2,0,0.5,0,0.7-0.1  c0.2-0.1,15.5-6.6,28.7-1.2c0.9,0.4,1.9-0.1,2.3-1C90.4,31.5,89.9,30.5,89,30.1z"></path><path d="M42.6,42.9c-0.7-0.3-16.9-7.2-31.5-1.3c-0.9,0.4-1.3,1.4-1,2.3c0.4,0.9,1.4,1.3,2.3,1  c13.2-5.4,28.6,1.2,28.7,1.2c0.2,0.1,0.5,0.1,0.7,0.1c0.7,0,1.3-0.4,1.6-1.1C43.9,44.3,43.5,43.3,42.6,42.9z"></path><path d="M89,41.6c-14.6-5.9-30.8,1-31.5,1.3c-0.4,0.2-0.8,0.5-0.9,1c-0.2,0.4-0.2,0.9,0,1.4  c0.3,0.6,0.9,1.1,1.6,1.1c0.2,0,0.5,0,0.7-0.1c0.2-0.1,15.5-6.6,28.7-1.2c0.9,0.4,1.9-0.1,2.3-1C90.4,43,89.9,42,89,41.6z"></path><path d="M42.5,54.4c-0.7-0.3-16.9-7.2-31.5-1.3c-0.9,0.4-1.3,1.4-1,2.3c0.2,0.4,0.5,0.8,1,1c0.4,0.2,0.9,0.2,1.4,0  c13.2-5.4,28.6,1.2,28.7,1.2c0.2,0.1,0.5,0.1,0.7,0.1c0.7,0,1.3-0.4,1.6-1.1C43.8,55.8,43.4,54.8,42.5,54.4z"></path><path d="M88.9,53.1c-14.6-6-30.8,1-31.5,1.3c-0.9,0.4-1.3,1.4-0.9,2.3c0.3,0.6,0.9,1.1,1.6,1.1c0.2,0,0.5,0,0.7-0.1  c0.2-0.1,15.5-6.6,28.7-1.2c0.4,0.2,0.9,0.2,1.4,0c0.4-0.2,0.8-0.5,1-1C90.2,54.5,89.8,53.5,88.9,53.1z"></path><path d="M41.8,69.1c0.7,0,1.3-0.4,1.6-1.1c0.4-0.9,0-1.9-0.9-2.3c-0.7-0.3-16.9-7.2-31.5-1.3  c-0.9,0.4-1.3,1.4-1,2.3c0.2,0.4,0.5,0.8,1,1c0.4,0.2,0.9,0.2,1.4,0c13.2-5.4,28.6,1.2,28.7,1.2C41.3,69,41.5,69.1,41.8,69.1z"></path><path d="M88.9,64.4c-14.6-6-30.8,1-31.5,1.3c-0.9,0.4-1.3,1.4-0.9,2.3c0.3,0.6,0.9,1.1,1.6,1.1c0.2,0,0.5,0,0.7-0.1  c0.2-0.1,15.5-6.6,28.7-1.2c0.4,0.2,0.9,0.2,1.4,0c0.4-0.2,0.8-0.5,1-1C90.2,65.8,89.8,64.7,88.9,64.4z"></path><path d="M97.9,12.1c0-0.8-0.5-1.6-1.3-1.9C72-0.3,54.9,10.1,50,13.8C45,10.1,27.9-0.3,3.3,10.2  c-0.8,0.3-1.3,1.1-1.3,1.9v78.6c0,0.7,0.4,1.4,1,1.8c0.3,0.2,0.7,0.3,1.1,0.3c0.3,0,0.6-0.1,0.9-0.2c0.2-0.1,17.1-7.8,43.5-0.2l0,0  l3,0l0.1,0c17.3-7,39.3-0.9,43.6,0.4c0.6,0.2,1.3,0.1,1.8-0.3c0.5-0.4,0.8-1,0.8-1.7L97.9,12.1z M93.8,87.8V88  c-7.7-2.1-15.2-3.1-22.4-3.1c-1.2,0-2.4,0-3.6,0.1C76.2,83.3,84.9,84.3,93.8,87.8z M93.8,83.4c-20.6-7.6-35.7-0.5-41.7,3.3l0-69.3  c3.2-2.5,19-13,41.7-3.9L93.8,83.4z M34.5,85.4C22.3,84,13.2,85.6,7.9,87.2c6.1-2.2,11.7-3.1,16.5-3.1  C28.3,84.1,31.7,84.6,34.5,85.4z M6.2,13.4c23.1-9.2,38.6,1.5,41.7,4l0,69.3C43.9,84.1,35.7,80,24.3,80c-5.4,0-11.4,0.9-18.1,3.4  L6.2,13.4z"></path></svg></div><dt><p class="ml-10 text-sm font-semibold text-gray-900">Language</p></dt><dd class="ml-10 text-sm text-gray-500">Read through the OCaml tutorial, official manual and books.</dd></a><a class="-m-3 p-3 block rounded-md hover:bg-gray-50 transition ease-in-out duration-150" href="/packages/"><div class="h-7 w-7 float-left fill-current stroke-current text-orangedark"><svg version="1.1" viewBox="0 0 100 125" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><g><path d="M85.8,35.6l11.2-13c0.5-0.5,0.6-1.3,0.4-2c-0.2-0.7-0.7-1.2-1.4-1.5L63.1,8.3c-0.8-0.3-1.7,0-2.3,0.6L50,21.5L39.2,9    c-0.6-0.7-1.5-0.9-2.3-0.6L4,19.1c-0.7,0.2-1.2,0.8-1.4,1.5c-0.2,0.7,0,1.4,0.4,2l11.2,13L3,48.6c-0.5,0.5-0.6,1.3-0.4,2    c0.2,0.7,0.7,1.2,1.4,1.5l10.9,3.6v23.2c0,0.9,0.6,1.8,1.5,2.1l32.9,10.8c0.2,0.1,0.5,0.1,0.7,0.1c0.2,0,0.5,0,0.7-0.1l32.9-10.8    c0.9-0.3,1.5-1.1,1.5-2.1V55.7l11-3.6c0.7-0.2,1.2-0.8,1.4-1.5c0.2-0.7,0-1.4-0.4-2L85.8,35.6z M24,35.6l26-8.5l26,8.5l-26,8.5    L24,35.6z M63.1,12.9l28.5,9.3l-9.4,10.9l-28.5-9.3L63.1,12.9z M36.9,12.9l9.4,10.9l-28.5,9.3L8.4,22.2L36.9,12.9z M17.8,38.1    l28.5,9.3l-9.4,10.9L8.4,49L17.8,38.1z M19.2,77.2V57.1l17.6,5.8c0.2,0.1,0.4,0.1,0.7,0.1c0.6,0,1.2-0.3,1.6-0.7l8.6-10v34.4    L19.2,77.2z M80.7,77.2l-28.6,9.4V52.2l8.6,10c0.4,0.5,1,0.7,1.6,0.7c0.2,0,0.5,0,0.7-0.1l17.6-5.8V77.2z M63.1,58.3l-9.4-10.9    l28.5-9.3L91.6,49L63.1,58.3z"></path></g></svg></div><dt><p class="ml-10 text-sm font-semibold text-gray-900">Packages</p></dt><dd class="ml-10 text-sm text-gray-500">Browse the third-party packages published in the OCaml ecosystem.</dd></a><a class="-m-3 p-3 block rounded-md hover:bg-gray-50 transition ease-in-out duration-150" href="/en/resources/applications/"><div class="h-7 w-7 float-left fill-current stroke-current text-orangedark"><svg version="1.1" viewBox="0 0 100 125" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><path d="M85.32,15.63H78.65a1.5,1.5,0,0,0-1.5,1.5v3.53H73.36a5.5,5.5,0,0,0-10.57,0h-7.9a5.5,5.5,0,0,0-10.57,0H36.11a5.5,5.5,0,0,0-10.57,0H22.85V17.13a1.5,1.5,0,0,0-1.5-1.5H14.68a1.5,1.5,0,0,0-1.5,1.5V82.87a1.5,1.5,0,0,0,1.5,1.5h6.67a1.5,1.5,0,0,0,1.5-1.5V74.63h2.69a5.49,5.49,0,0,0,9.28,2.27,5.49,5.49,0,0,0,9.29-2.27H54.79a5.49,5.49,0,0,0,9.29,2.27,5.49,5.49,0,0,0,9.28-2.27h3.79v8.24a1.5,1.5,0,0,0,1.5,1.5h6.67a1.5,1.5,0,0,0,1.5-1.5V17.13A1.5,1.5,0,0,0,85.32,15.63Zm-25.22,39a5.5,5.5,0,0,0-9.29-2.26,5.48,5.48,0,0,0-8,0,5.49,5.49,0,0,0-8,0,5.49,5.49,0,0,0-9.28,2.26H22.85v-14h2.69a5.49,5.49,0,0,0,9.28,2.27,5.49,5.49,0,0,0,8,0,5.49,5.49,0,0,0,9.28-2.27H62.79a5.49,5.49,0,0,0,10.57,0h3.79v14Zm-2.79,1.5a2.5,2.5,0,1,1-2.5-2.49A2.5,2.5,0,0,1,57.31,56.14Zm-8,0a2.5,2.5,0,1,1-2.49-2.49A2.5,2.5,0,0,1,49.31,56.14Zm-8,0a2.5,2.5,0,1,1-2.5-2.49A2.5,2.5,0,0,1,41.32,56.14Zm-8,0a2.5,2.5,0,1,1-2.49-2.49A2.5,2.5,0,0,1,33.32,56.14Zm-5-17a2.5,2.5,0,1,1,2.5,2.5A2.5,2.5,0,0,1,28.33,39.15Zm8,0a2.5,2.5,0,1,1,2.5,2.5A2.5,2.5,0,0,1,36.32,39.15Zm8,0a2.5,2.5,0,1,1,2.5,2.5A2.5,2.5,0,0,1,44.32,39.15Zm21.26,0a2.5,2.5,0,1,1,2.49,2.5A2.5,2.5,0,0,1,65.58,39.15Zm2.49-19.48a2.5,2.5,0,1,1-2.49,2.49A2.5,2.5,0,0,1,68.07,19.67Zm-18.47,0a2.5,2.5,0,1,1-2.5,2.49A2.5,2.5,0,0,1,49.6,19.67Zm-18.77,0a2.5,2.5,0,1,1-2.5,2.49A2.5,2.5,0,0,1,30.83,19.67Zm-5.29,4a5.49,5.49,0,0,0,10.57,0h8.21a5.49,5.49,0,0,0,10.57,0h7.9a5.49,5.49,0,0,0,10.57,0h3.79v14H73.36a5.5,5.5,0,0,0-10.57,0H52.1a5.49,5.49,0,0,0-9.28-2.26,5.49,5.49,0,0,0-8,0,5.49,5.49,0,0,0-9.28,2.26H22.85v-14ZM19.85,81.37H16.18V18.63h3.67Zm11-5.74a2.5,2.5,0,1,1,2.49-2.5A2.5,2.5,0,0,1,30.83,75.63Zm8,0a2.5,2.5,0,1,1,2.5-2.5A2.5,2.5,0,0,1,38.82,75.63Zm21.26,0a2.5,2.5,0,1,1,2.5-2.5A2.5,2.5,0,0,1,60.08,75.63Zm8,0a2.5,2.5,0,1,1,2.5-2.5A2.5,2.5,0,0,1,68.07,75.63Zm5.29-4a5.49,5.49,0,0,0-9.28-2.26,5.5,5.5,0,0,0-9.29,2.26H44.11a5.5,5.5,0,0,0-9.29-2.26,5.49,5.49,0,0,0-9.28,2.26H22.85v-14h2.69a5.49,5.49,0,0,0,9.28,2.27,5.49,5.49,0,0,0,8,0,5.48,5.48,0,0,0,8,0,5.49,5.49,0,0,0,9.29-2.27H77.15v14Zm10.46,9.74H80.15V18.63h3.67Z"></path></svg></div><dt><p class="ml-10 text-sm font-semibold text-gray-900">Applications</p></dt><dd class="ml-10 text-sm text-gray-500">Learn techniques for building tools and applications in OCaml.</dd></a><a class="-m-3 p-3 block rounded-md hover:bg-gray-50 transition ease-in-out duration-150" href="/en/resources/bestpractices/"><div class="h-7 w-7 float-left fill-current stroke-current text-orangedark"><svg version="1.1" viewBox="0 0 100 125" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><path d="M7,51h28.7c3.3,0,6.6-1.4,8.8-3.9L61.2,29H76c6.6,0,9-3.8,9-7c0-1.1-0.2-2.1-0.7-3H88c3.9,0,7-3.1,7-7s-3.1-7-7-7H45  c-0.1,0-0.1,0-0.2,0c0,0-0.1,0-0.2,0s-0.1,0-0.2,0c-0.1,0-0.1,0-0.2,0.1c0,0-0.1,0-0.2,0.1c-0.1,0-0.1,0.1-0.2,0.1c0,0,0,0,0,0  L22.3,21H7c-1.1,0-2,0.9-2,2v26C5,50.1,5.9,51,7,51z M76,25H64.5c0.5-1.1,0.8-2.4,0.7-3.7c-0.1-0.8-0.3-1.6-0.6-2.3H78  c1.7,0,3,1.3,3,3C81,24.7,77.5,25,76,25z M19,25h4c0.2,0,0.4,0,0.5-0.1c0,0,0.1,0,0.1,0c0.2-0.1,0.3-0.1,0.5-0.2c0,0,0,0,0,0L45.7,9  H88c1.7,0,3,1.3,3,3c0,1.6-1.3,3-3,3H58c-0.1,0-0.3,0-0.4,0c-1.8,0.2-3.5,1-4.7,2.3L34.9,36.9c-0.7,0.8-0.7,2.1,0.1,2.8  s2.1,0.7,2.8-0.1l18-19.5c1.1-1.2,2.9-1.4,4.2-0.5c0.7,0.5,1.1,1.3,1.2,2.1c0.1,0.8-0.2,1.7-0.8,2.3L41.6,44.4  c-1.5,1.6-3.7,2.6-5.9,2.6H19V25z M9,25h6v22H9V25z M93,49H64.3c-3.3,0-6.6,1.4-8.8,3.9L38.8,71H24c-6.6,0-9,3.8-9,7  c0,1.1,0.2,2.1,0.7,3H12c-3.9,0-7,3.1-7,7s3.1,7,7,7h43c0,0,0,0,0,0c0.2,0,0.4,0,0.5-0.1c0,0,0.1,0,0.1,0c0.2-0.1,0.3-0.1,0.5-0.2  c0,0,0,0,0,0L77.7,79H93c1.1,0,2-0.9,2-2V51C95,49.9,94.1,49,93,49z M24,75h11.5c-0.5,1.1-0.8,2.4-0.7,3.7c0.1,0.8,0.3,1.6,0.6,2.3  H22c-1.7,0-3-1.4-3-3C19,75.3,22.5,75,24,75z M81,75h-4c-0.1,0-0.2,0-0.3,0c0,0-0.1,0-0.1,0c-0.1,0-0.2,0-0.2,0.1c0,0-0.1,0-0.2,0.1  s-0.1,0-0.2,0.1c-0.1,0-0.1,0.1-0.2,0.1c0,0,0,0,0,0L54.3,91H12c-1.7,0-3-1.4-3-3c0-1.7,1.3-3,3-3h30c0.1,0,0.3,0,0.4,0  c1.8-0.2,3.5-0.9,4.7-2.3l17.9-19.5c0.7-0.8,0.7-2.1-0.1-2.8c-0.8-0.7-2.1-0.7-2.8,0.1l-18,19.5c-1.1,1.2-2.9,1.5-4.2,0.5  c-0.7-0.5-1.1-1.3-1.2-2.1c-0.1-0.9,0.2-1.7,0.8-2.3l18.8-20.4c1.5-1.6,3.7-2.6,5.9-2.6H81V75z M91,75h-6V53h6V75z"></path></svg></div><dt><p class="ml-10 text-sm font-semibold text-gray-900">Best Practices</p></dt><dd class="ml-10 text-sm text-gray-500">Adopt the best known methods for development from the OCaml community.</dd></a></div></div></div></div><div class="relative"><button aria-expanded="false" class="text-gray-500  pl-2 group bg-white rounded-md inline-flex items-center text-base font-medium hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orangedark" type="button"><span>Community</span><svg aria-hidden="true" class="text-gray-400 ml-2 h-5 w-5 group-hover:text-gray-500" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" fill-rule="evenodd"></path></svg></button><div class="absolute z-10 left-1/2 transform -translate-x-1/2 mt-3 px-2 w-screen max-w-sm sm:px-0  hidden "><div class="rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 overflow-hidden"><div class="relative grid gap-6 bg-white px-5 py-6 sm:gap-6 sm:p-8"><a class="-m-3 p-3 block rounded-md hover:bg-gray-50 transition ease-in-out duration-150" href="/en/community/opportunities/"><div class="h-7 w-7 float-left fill-current stroke-current text-orangedark"><svg version="1.1" viewBox="0 0 1024 1280" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><g><path d="M512,300.4c-31,0-60-14.7-81.7-41.3c-20.6-25.2-32-58-32-92.1c0-34.5,11.8-63.3,34.1-83.4c20.1-18.2,48.4-28.2,79.6-28.2   c31.2,0,59.5,10,79.6,28.2c22.3,20.1,34.1,49,34.1,83.4c0,34.2-11.4,66.9-32,92.1C572,285.7,543,300.4,512,300.4z M512,95.4   c-17.3,0-73.7,5.2-73.7,71.6c0,24.6,8.4,49,23,66.8c14,17.1,32,26.6,50.7,26.6c18.7,0,36.7-9.4,50.7-26.6   c14.6-17.9,23-42.2,23-66.8C585.7,100.6,529.3,95.4,512,95.4z"></path><rect height="44.4" width="40" x="383.9" y="470.9"></rect><path d="M338.4,515.4h-40v-83.6c0-35,20.6-66.7,52.6-80.9l100-44.4c10.4-4.6,22.4-1.5,29.2,7.5l31.9,41.7l32.4-41.7   c6.8-9,18.8-12,29.2-7.4l99.4,44.3c31.9,14.2,52.5,45.9,52.5,80.9v83.6h-40v-83.6c0-19.2-11.3-36.6-28.7-44.3l-88.2-39.3   l-56.8,73.1l-55.9-73.1l-88.7,39.4c-17.5,7.8-28.8,25.2-28.8,44.3V515.4z"></path><rect height="44.4" width="40" x="600.1" y="470.9"></rect><rect height="126.9" width="40" x="492" y="388.4"></rect><path d="M819.5,784.5c-3.3,0-6.7-0.6-9.9-2c-9.6-4-15.9-13.3-15.9-23.7v-51.2h-75.1c-13,0-23.6-10.6-23.6-23.6V583.8   c0-13,10.6-23.6,23.6-23.6h75.1V509c0-10.5,6.2-19.8,15.9-23.8c9.7-4,20.7-1.8,28.1,5.6l124.9,124.9c10,10,10,26.4,0,36.4   L837.6,776.9C832.7,781.9,826.1,784.5,819.5,784.5z M735,667.6h98.7v56.7l90.5-90.5l-90.5-90.5v56.8H735V667.6z"></path><path d="M512,968.6c-6.6,0-13.2-2.5-18.2-7.5l-125-124.9c-7.3-7.3-9.5-18.2-5.7-27.7c3.9-9.6,13.1-16,23.5-16.2l0.4,0h51.2v-75.1   c0-13,10.6-23.6,23.6-23.6h100.3c13,0,23.6,10.6,23.6,23.6v75.1H637c10.4,0,19.7,6.2,23.7,15.9c4,9.7,1.8,20.7-5.6,28.1L530.2,961   C525.2,966.1,518.6,968.6,512,968.6z M421.5,832.2l90.5,90.5l90.5-90.5h-56.7v-98.7h-67.5v98.7H421.5z"></path><path d="M204.5,784.5c-6.7,0-13.3-2.6-18.2-7.6L61.5,652c-10-10-10-26.4,0-36.4l124.9-124.9c7.4-7.4,18.4-9.6,28.1-5.6   c9.7,4,15.9,13.3,15.9,23.8v51.2h75.1c13,0,23.6,10.6,23.6,23.6V684c0,13-10.6,23.6-23.6,23.6h-75.1v51.2   c0,10.4-6.2,19.7-15.9,23.7C211.2,783.9,207.9,784.5,204.5,784.5z M99.8,633.8l90.5,90.5v-56.7H289v-67.4h-98.7v-56.8L99.8,633.8z"></path></g></svg></div><dt><p class="ml-10 text-sm font-semibold text-gray-900">Opportunities</p></dt><dd class="ml-10 text-sm text-gray-500">Explore vacancies in projects and companies and see where you could fit in.</dd></a><a class="-m-3 p-3 block rounded-md hover:bg-gray-50 transition ease-in-out duration-150" href="/en/community/blog/"><div class="h-7 w-7 float-left fill-current stroke-current text-orangedark"><svg version="1.1" viewBox="0 0 100 125" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><g transform="translate(0,-952.36218)"><path d="M 17.78125 15 A 2.0002 2.0002 0 0 0 15.96875 17 L 15.96875 25.3125 L 8 25.3125 A 2.0002 2.0002 0 0 0 6 27.3125 L 6 83 A 2.0002 2.0002 0 0 0 8 85 L 92 85 A 2.0002 2.0002 0 1 0 92 81 L 10 81 L 10 29.3125 L 15.96875 29.3125 L 15.96875 74.75 A 2.0002 2.0002 0 1 0 19.96875 74.75 L 19.96875 19 L 89.84375 19 L 89.84375 73.96875 A 2.0002 2.0002 0 1 0 93.84375 73.96875 L 93.84375 17 A 2.0002 2.0002 0 0 0 91.84375 15 L 17.96875 15 A 2.0002 2.0002 0 0 0 17.78125 15 z M 28.75 26.34375 A 2.0002 2.0002 0 0 0 26.96875 28.34375 L 26.96875 51.03125 A 2.0002 2.0002 0 0 0 28.96875 53.03125 L 52.90625 53.03125 A 2.0002 2.0002 0 0 0 54.90625 51.03125 L 54.90625 28.34375 A 2.0002 2.0002 0 0 0 52.90625 26.34375 L 28.96875 26.34375 A 2.0002 2.0002 0 0 0 28.75 26.34375 z M 63.6875 26.34375 A 2.0029885 2.0029885 0 1 0 63.90625 30.34375 L 81.84375 30.34375 A 2.0002 2.0002 0 1 0 81.84375 26.34375 L 63.90625 26.34375 A 2.0002 2.0002 0 0 0 63.6875 26.34375 z M 30.96875 30.34375 L 50.90625 30.34375 L 50.90625 49.03125 L 30.96875 49.03125 L 30.96875 30.34375 z M 63.6875 37.6875 A 2.0029885 2.0029885 0 1 0 63.90625 41.6875 L 81.84375 41.6875 A 2.0002 2.0002 0 1 0 81.84375 37.6875 L 63.90625 37.6875 A 2.0002 2.0002 0 0 0 63.6875 37.6875 z M 63.6875 49.03125 A 2.0029885 2.0029885 0 1 0 63.90625 53.03125 L 81.84375 53.03125 A 2.0002 2.0002 0 1 0 81.84375 49.03125 L 63.90625 49.03125 A 2.0002 2.0002 0 0 0 63.6875 49.03125 z M 27.75 60.375 A 2.0029885 2.0029885 0 1 0 27.96875 64.375 L 81.84375 64.375 A 2.0002 2.0002 0 1 0 81.84375 60.375 L 27.96875 60.375 A 2.0002 2.0002 0 0 0 27.75 60.375 z M 27.75 71.71875 A 2.0029885 2.0029885 0 1 0 27.96875 75.71875 L 81.6875 75.71875 A 2.0002 2.0002 0 1 0 81.6875 71.71875 L 27.96875 71.71875 A 2.0002 2.0002 0 0 0 27.75 71.71875 z " transform="translate(0,952.36218)"></path></g></svg></div><dt><p class="ml-10 text-sm font-semibold text-gray-900">News</p></dt><dd class="ml-10 text-sm text-gray-500">Catch up on the latest news from the OCaml sphere!</dd></a><a class="-m-3 p-3 block rounded-md hover:bg-gray-50 transition ease-in-out duration-150" href="/en/community/aroundweb/"><div class="h-7 w-7 float-left fill-current stroke-current text-orangedark"><svg viewBox="0 0 64 80" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><g><path d="M32,9A23,23,0,1,0,55,32,23.0259,23.0259,0,0,0,32,9Zm0,44A21,21,0,1,1,53,32,21.0239,21.0239,0,0,1,32,53ZM63,32A30.99,30.99,0,0,1,10.3,54.124,29.6168,29.6168,0,0,1,8,51.6027V55a1,1,0,0,1-2,0V49a1,1,0,0,1,1-1h6a1,1,0,0,1,0,2H9.2789a27.8374,27.8374,0,0,0,2.4174,2.6929A28.99,28.99,0,0,0,61,32a28.617,28.617,0,0,0-2.86-12.5645,1,1,0,1,1,1.8008-.871A30.6112,30.6112,0,0,1,63,32ZM5.86,44.5645a1,1,0,0,1-1.8008.871A30.6112,30.6112,0,0,1,1,32,30.99,30.99,0,0,1,53.7,9.876,29.6168,29.6168,0,0,1,56,12.3973V9a1,1,0,0,1,2,0v6a1,1,0,0,1-1,1H51a1,1,0,0,1,0-2h3.7211a27.8374,27.8374,0,0,0-2.4174-2.6929A28.99,28.99,0,0,0,3,32,28.617,28.617,0,0,0,5.86,44.5645ZM43.1411,20.1112a23.1406,23.1406,0,0,0,2.1978-1.3661,1,1,0,0,0-1.1582-1.63c-.5694.4049-1.16.7679-1.76,1.1113A22.1893,22.1893,0,0,0,40.02,13.8438,1,1,0,1,0,38.4,15.0166,20.1638,20.1638,0,0,1,40.6245,19.14,20.8665,20.8665,0,0,1,33,20.9617V13a1,1,0,0,0-2,0v7.9617A20.866,20.866,0,0,1,23.3755,19.14,20.1638,20.1638,0,0,1,25.6,15.0166a1,1,0,1,0-1.6191-1.1728,22.1893,22.1893,0,0,0-2.4013,4.3827c-.6-.3434-1.19-.7064-1.76-1.1113a1,1,0,0,0-1.1582,1.63,23.1406,23.1406,0,0,0,2.1978,1.3661A36.8955,36.8955,0,0,0,19.0317,31H13a1,1,0,0,0,0,2h6.0317a36.8955,36.8955,0,0,0,1.8272,10.8888,23.1406,23.1406,0,0,0-2.1978,1.3661,1,1,0,0,0,1.1582,1.63c.5694-.4049,1.16-.7679,1.76-1.1113a22.193,22.193,0,0,0,2.4013,4.3828A1,1,0,1,0,25.6,48.9834a20.1636,20.1636,0,0,1-2.224-4.1233A20.866,20.866,0,0,1,31,43.0383V51a1,1,0,0,0,2,0V43.0383A20.8665,20.8665,0,0,1,40.6245,44.86,20.1638,20.1638,0,0,1,38.4,48.9834,1,1,0,1,0,40.02,50.1563a22.193,22.193,0,0,0,2.4013-4.3828c.6.3434,1.1905.7064,1.76,1.1113a1,1,0,0,0,1.1582-1.63,23.1406,23.1406,0,0,0-2.1978-1.3661A36.8955,36.8955,0,0,0,44.9683,33H51a1,1,0,0,0,0-2H44.9683A36.8955,36.8955,0,0,0,43.1411,20.1112Zm-1.8222.9086A35.3906,35.3906,0,0,1,42.9679,31H33V22.9617A22.855,22.855,0,0,0,41.3189,21.02Zm-18.6378,0A22.855,22.855,0,0,0,31,22.9617V31H21.0321A35.3906,35.3906,0,0,1,22.6811,21.02Zm0,21.96A35.3906,35.3906,0,0,1,21.0321,33H31v8.0383A22.855,22.855,0,0,0,22.6811,42.98Zm18.6378,0A22.855,22.855,0,0,0,33,41.0383V33h9.9679A35.3906,35.3906,0,0,1,41.3189,42.98Z"></path></g></svg></div><dt><p class="ml-10 text-sm font-semibold text-gray-900">Around the Web</p></dt><dd class="ml-10 text-sm text-gray-500">A bit of everything, this page encapsulates OCaml&#x27;s presence online, blogposts, videos, and mailing lists all live here.</dd></a><a class="-m-3 p-3 block rounded-md hover:bg-gray-50 transition ease-in-out duration-150" href="/en/resources/archive/"><div class="h-7 w-7 float-left fill-current stroke-current text-orangedark"><svg viewBox="0 0 32 40" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><path d="M28,3H4A3,3,0,0,0,1,6V8a3,3,0,0,0,2,2.816V26a3,3,0,0,0,3,3H26a3,3,0,0,0,3-3V10.816A3,3,0,0,0,31,8V6A3,3,0,0,0,28,3ZM27,26a1,1,0,0,1-1,1H6a1,1,0,0,1-1-1V11H27ZM29,8a1,1,0,0,1-1,1H4A1,1,0,0,1,3,8V6A1,1,0,0,1,4,5H28a1,1,0,0,1,1,1Z"></path><path d="M13,17h6a1,1,0,0,0,0-2H13a1,1,0,0,0,0,2Z"></path></svg></div><dt><p class="ml-10 text-sm font-semibold text-gray-900">Archive</p></dt><dd class="ml-10 text-sm text-gray-500">Can&#x27;t find what you&#x27;re looking for? Try searching the Archive.</dd></a></div></div></div></div></nav><div class="flex-1 flex items-center justify-center px-2 md:justify-end "><div class="max-w-lg w-full md:max-w-xs"><label class="sr-only" for="search">Search ocaml.org</label><form id="searchform" action="https://duckduckgo.com/" method="get"><input type="hidden" name="sites" value="ocaml.org"/><div class="relative"><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg aria-hidden="true" class="h-5 w-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" fill-rule="evenodd"></path></svg></div><input type="search" class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-orangedark focus:border-orangedarker sm:text-sm" id="search" name="q" placeholder="Search ocaml.org"/></div></form></div></div><div class="-mr-2 -my-2 md:hidden "><button class="bg-white rounded-md p-2 inline-flex items-center justify-center text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500" type="button"><span class="sr-only">Open menu</span><svg aria-hidden="true" class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 6h16M4 12h16M4 18h16" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg></button></div></div></div><div class="absolute top-0 inset-x-0 p-2 transition transform origin-top-right md:hidden z-10  hidden "><div class="rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 bg-white divide-y-2 divide-gray-50"><div class="pt-5 pb-6 px-5"><div class="flex items-center justify-between"><div><img class="h-8 w-auto sm:h-10" alt="" src="/static/logo1.jpeg"/></div><div class="-mr-2"><button class="bg-white rounded-md p-2 inline-flex items-center justify-center text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500" type="button"><span class="sr-only"> Close menu </span><svg aria-hidden="true" class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg></button></div></div><div class="mt-6"><nav class="grid gap-y-2"><h3 class="ml-6 mt-2 px-3 font-semibold text-gray-400 uppercase">Principles</h3><a class="text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-sm font-medium rounded-md" href="/en/principles/whatisocaml/"><span class="text-gray-400 group-hover:text-gray-500 mr-3 flex-shrink-0 h-5 w-5 stroke-current fill-current stroke-2"><svg version="1.1" viewBox="0 0 12.7 15.9" xmlns="http://www.w3.org/2000/svg"><path d="m9.01 1.23a0.676 0.676 0 0 0-0.658 0.52 7.02 7.02 0 0 0-0.185 1.41 0.338 0.338 0 0 1-0.674 0.0292 6.26 6.26 0 0 0-0.304-1.33 0.81 0.81 0 0 0-1.56 0.118 3.15 3.15 0 0 1-1.26 1.98 0.495 0.495 0 0 1-0.564 9e-3 1.49 1.49 0 0 1-0.459-0.492 0.495 0.495 0 0 1 0.023-0.531 1.22 1.22 0 0 0 0.141-0.266 0.295 0.295 0 0 0-0.374-0.383 0.987 0.987 0 0 0-0.183 0.0867 0.819 0.819 0 0 0-1.21-0.24 1.36 1.36 0 0 1-0.767 0.395 0.516 0.516 0 0 0 0.0788 1.03h0.42a0.789 0.789 0 0 0 0.507 0.259 2.67 2.67 0 0 0 2.32 2.59 0.471 0.471 0 0 0 0.328-0.0783 1.81 1.81 0 0 0 0.438 1.11 3.97 3.97 0 0 1 1.15 2.78 0.202 0.202 0 0 1-0.11 0.18 2.56 2.56 0 0 0-0.682 0.506 0.325 0.325 0 0 0 0.234 0.55h1.43a0.468 0.468 0 0 0 0.0934-0.784 0.202 0.202 0 0 1-0.0744-0.156v-1.43a1.5 1.5 0 0 0-0.15-1.08v-0.591a2.43 2.43 0 0 0 1.68 0.0748 3.43 3.43 0 0 0 1.4-0.668 1.78 1.78 0 0 0 0.228 0.465 2.84 2.84 0 0 1 0.408 2.9 0.202 0.202 0 0 1-0.115 0.11 2.56 2.56 0 0 0-0.934 0.617 0.325 0.325 0 0 0 0.234 0.55h1.43a0.468 0.468 0 0 0 0.122-0.759 0.202 0.202 0 0 1-0.0558-0.197 4.7 4.7 0 0 1 0.706-1.51 0.383 0.383 0 0 0 0.0598-0.309 6.18 6.18 0 0 1 0.035-2.97 1.06 1.06 0 0 0-0.45-1.16l-0.486-0.315a1.08 1.08 0 0 1-0.453-0.618 5.11 5.11 0 0 0-1.26-2.19 0.676 0.676 0 0 0-0.485-0.205zm-0.00227 0.181a0.495 0.495 0 0 1 0.355 0.15 4.93 4.93 0 0 1 1.21 2.11 1.26 1.26 0 0 0 0.529 0.721l0.486 0.315a0.882 0.882 0 0 1 0.374 0.962 6.36 6.36 0 0 0-0.0358 3.06 0.202 0.202 0 0 1-0.0319 0.163 4.88 4.88 0 0 0-0.733 1.57 0.383 0.383 0 0 0 0.105 0.374 0.287 0.287 0 0 1-0.0429 0.447h-1.38a0.143 0.143 0 0 1-0.103-0.243 2.38 2.38 0 0 1 0.868-0.574 0.383 0.383 0 0 0 0.216-0.208 3.02 3.02 0 0 0-0.429-3.08 1.6 1.6 0 0 1-0.218-1.33 0.0906 0.0906 0 0 0-0.174-0.0491 1.78 1.78 0 0 0-0.0319 0.83 3.25 3.25 0 0 1-1.39 0.686 2.25 2.25 0 0 1-1.63-0.0978v-0.624a0.0906 0.0906 0 0 0-0.181 0v1.46a1.32 1.32 0 0 1 0.15 1.01v1.46a0.383 0.383 0 0 0 0.14 0.297 0.287 0.287 0 0 1-0.0248 0.462h-1.38a0.143 0.143 0 0 1-0.103-0.243 2.38 2.38 0 0 1 0.634-0.47 0.383 0.383 0 0 0 0.209-0.343 4.15 4.15 0 0 0-1.19-2.9 1.62 1.62 0 0 1-0.308-1.57 0.0907 0.0907 0 1 0-0.172-0.058 1.81 1.81 0 0 0-0.073 0.298 0.29 0.29 0 0 1-0.324 0.243 2.48 2.48 0 0 1-2.16-2.42 0.789 0.789 0 0 0 0.404-0.176 0.0907 0.0907 0 0 0-0.116-0.139 0.608 0.608 0 0 1-0.888-0.123h-0.508a0.335 0.335 0 0 1-0.0505-0.667 1.54 1.54 0 0 0 0.86-0.438 0.638 0.638 0 0 1 0.942 0.212 0.987 0.987 0 0 0-0.0894 0.0907 0.0909 0.0909 0 1 0 0.138 0.119 0.805 0.805 0 0 1 0.342-0.234 0.114 0.114 0 0 1 0.144 0.148 1.04 1.04 0 0 1-0.119 0.227 0.676 0.676 0 0 0-0.031 0.725 1.68 1.68 0 0 0 0.515 0.551 0.676 0.676 0 0 0 0.772-0.0116 3.33 3.33 0 0 0 1.33-2.1 0.629 0.629 0 0 1 1.21-0.0912 6.08 6.08 0 0 1 0.295 1.29 0.52 0.52 0 0 0 1.04-0.0451 6.84 6.84 0 0 1 0.18-1.37 0.495 0.495 0 0 1 0.482-0.381z" stroke-width=".289"></path><path d="m2.16 2.76a0.128 0.128 0 1 0-0.256 0 0.128 0.128 0 1 0 0.256 0z" stroke-width=".2"></path></svg></span><span class="font-bold">Why OCaml</span></a><a class="text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-sm font-medium rounded-md" href="/en/principles/users/"><span class="text-gray-400 group-hover:text-gray-500 mr-3 flex-shrink-0 h-5 w-5 stroke-current fill-current stroke-2"><svg class="stroke-0" version="1.1" viewBox="0 0 60 75" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><path d="M6,55h48c0.6,0,1-0.4,1-1V33c0-0.3-0.1-0.5-0.3-0.7l-9-8.4L44,5.9c0-0.1,0-0.1,0-0.2c0-0.1,0-0.1,0-0.2  c0-0.1-0.1-0.1-0.1-0.2c0,0-0.1-0.1-0.1-0.1c-0.1-0.1-0.1-0.1-0.2-0.1c0,0-0.1-0.1-0.1-0.1C43.3,5,43.1,5,43,5h-6  c-0.1,0-0.3,0-0.4,0.1c0,0-0.1,0-0.1,0.1c-0.1,0-0.1,0.1-0.2,0.1c0,0-0.1,0.1-0.1,0.1c0,0.1-0.1,0.1-0.1,0.2c0,0.1,0,0.1,0,0.2  c0,0.1,0,0.1,0,0.2l-1.3,20.8l-8-7.4c-0.3-0.3-0.7-0.3-1.1-0.2C25.2,19.2,25,19.6,25,20v10.7L12.7,19.3c-0.3-0.3-0.7-0.3-1.1-0.2  C11.2,19.2,11,19.6,11,20v12H6c-0.6,0-1,0.4-1,1v21C5,54.6,5.4,55,6,55z M42,7v1h-4V7H42z M37.8,10h4.6l1.1,11.9l-2.8-2.6  c-0.3-0.3-0.7-0.3-1.1-0.2C39.2,19.2,39,19.6,39,20v10.7l-2.4-2.2L37.8,10z M7,34h5c0.6,0,1-0.4,1-1V22.3l12.3,11.4  c0.3,0.3,0.7,0.3,1.1,0.2c0.4-0.2,0.6-0.5,0.6-0.9V22.3l12.3,11.4c0.3,0.3,0.7,0.3,1.1,0.2c0.4-0.2,0.6-0.5,0.6-0.9V22.3l3.1,2.9  c0,0,0,0,0,0l8.9,8.3V53H7V34z"></path><path d="M16,38h-4c-0.6,0-1,0.4-1,1v4c0,0.6,0.4,1,1,1h4c0.6,0,1-0.4,1-1v-4C17,38.4,16.6,38,16,38z M15,42h-2v-2h2V42z"></path><path d="M24,38h-4c-0.6,0-1,0.4-1,1v4c0,0.6,0.4,1,1,1h4c0.6,0,1-0.4,1-1v-4C25,38.4,24.6,38,24,38z M23,42h-2v-2h2V42z"></path><path d="M32,38h-4c-0.6,0-1,0.4-1,1v4c0,0.6,0.4,1,1,1h4c0.6,0,1-0.4,1-1v-4C33,38.4,32.6,38,32,38z M31,42h-2v-2h2V42z"></path><path d="M40,38h-4c-0.6,0-1,0.4-1,1v4c0,0.6,0.4,1,1,1h4c0.6,0,1-0.4,1-1v-4C41,38.4,40.6,38,40,38z M39,42h-2v-2h2V42z"></path><path d="M48,38h-4c-0.6,0-1,0.4-1,1v4c0,0.6,0.4,1,1,1h4c0.6,0,1-0.4,1-1v-4C49,38.4,48.6,38,48,38z M47,42h-2v-2h2V42z"></path></svg></span><span class="font-bold">Industrial Users</span></a><a class="text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-sm font-medium rounded-md" href="/en/principles/academic/"><span class="text-gray-400 group-hover:text-gray-500 mr-3 flex-shrink-0 h-5 w-5 stroke-current fill-current stroke-2"><svg class="stroke-2" version="1.1" viewBox="0 0 100 125" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><g transform="translate(0,-952.36218)"><path d="M 47.25 23 A 1.0001 1.0001 0 0 0 47.125 23.0625 L 5.625 39.0625 A 1.0001 1.0001 0 0 0 5.625 40.90625 L 21.1875 46.90625 A 1.0001 1.0001 0 0 0 21.1875 47 L 21.1875 63.4375 A 1.0001 1.0001 0 0 0 21.8125 64.34375 L 47.09375 74.90625 A 1.0001 1.0001 0 0 0 47.84375 74.90625 L 73.15625 64.34375 A 1.0001 1.0001 0 0 0 73.75 63.4375 L 73.75 47 A 1.0001 1.0001 0 0 0 73.75 46.9375 L 80.875 44.1875 A 1.0040202 1.0040202 0 0 0 80.15625 42.3125 L 47.46875 54.9375 L 8.75 40 L 47.5 25.03125 L 87.9375 40.65625 L 87.9375 65.09375 C 85.072141 65.568778 82.875 68.037767 82.875 71 C 82.875 74.2988 85.600803 77 88.9375 77 C 92.274197 77 95 74.2988 95 71 C 95 68.037767 92.802859 65.568778 89.9375 65.09375 L 89.9375 40 A 1.0001 1.0001 0 0 0 89.3125 39.0625 L 47.84375 23.0625 A 1.0001 1.0001 0 0 0 47.25 23 z M 23.1875 47.6875 L 47.125 56.90625 A 1.0001 1.0001 0 0 0 47.84375 56.90625 L 71.75 47.6875 L 71.75 62.75 L 47.46875 72.90625 L 23.1875 62.75 L 23.1875 47.6875 z M 88.9375 66.96875 C 91.187128 66.96875 92.96875 68.7759 92.96875 71 C 92.96875 73.2241 91.187128 75 88.9375 75 C 86.687872 75 84.875 73.2241 84.875 71 C 84.875 68.7759 86.687872 66.96875 88.9375 66.96875 z " transform="translate(0,952.36218)"></path></g></svg></span><span class="font-bold">Academic Excellence</span></a><a class="text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-sm font-medium rounded-md" href="/en/principles/successes/"><span class="text-gray-400 group-hover:text-gray-500 mr-3 flex-shrink-0 h-5 w-5 stroke-current fill-current stroke-2"><svg version="1.1" viewBox="0 0 160 200" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><path d="M151.305,149.32l-35.11-68.89c-0.6-1.17-1.8-1.91-3.12-1.91s-2.52,0.74-3.12,1.91l-11.98,23.5l3.93,7.71l11.17-21.92  l29.4,57.69h-22.34h-2.801L66.999,48.66v-8.949h42.25c1.933,0,3.5-1.567,3.5-3.5V9.09c0-1.933-1.567-3.5-3.5-3.5h-45.75  c-1.933,0-3.5,1.567-3.5,3.5v13.824v13.297V48.66L8.69,149.321c-0.553,1.085-0.502,2.38,0.134,3.418  c0.636,1.039,1.767,1.672,2.984,1.672h103.381c0.001,0,0.002,0,0.003,0h4.863h28.14c1.21,0,2.34-0.63,2.98-1.67  C151.815,151.7,151.865,150.41,151.305,149.32z M66.999,22.914V12.59h38.75v20.122h-38.75V22.914z M63.499,57.207l10.873,21.332  c-5.251-0.709-10.46,2.09-12.683,7.08c-0.751,1.687-2.234,2.781-4.067,3.003c-1.829,0.221-3.533-0.488-4.665-1.947l-2.703-3.484  L63.499,57.207z M17.52,147.41l29.221-57.328l0.685,0.883c2.329,3.002,5.817,4.696,9.543,4.695c0.494,0,0.993-0.029,1.493-0.09  c4.273-0.517,7.87-3.172,9.622-7.104c1.063-2.386,3.744-3.588,6.231-2.8l4.402,1.396l30.76,60.347H17.52z"></path><path d="M90.023,15.97l-5.161,5.71l-2.427-1.948c-1.075-0.864-2.649-0.692-3.514,0.384c-0.865,1.077-0.692,2.65,0.384,3.514  l4.265,3.424c0.461,0.37,1.014,0.551,1.564,0.551c0.684,0,1.364-0.279,1.855-0.824l6.742-7.46c0.926-1.024,0.846-2.605-0.178-3.531  C92.529,14.866,90.948,14.947,90.023,15.97z"></path></svg></span><span class="font-bold">Success Stories</span></a><h3 class="ml-6 mt-2 px-3 font-semibold text-gray-400 uppercase">Resources</h3><a class="text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-sm font-medium rounded-md" href="/en/resources/language/"><span class="text-gray-400 group-hover:text-gray-500 mr-3 flex-shrink-0 h-5 w-5 stroke-current fill-current stroke-2"><svg version="1.1" viewBox="0 0 100 125" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><path d="M10.7,22.2c0.4,0.2,0.9,0.2,1.4,0c13.2-5.4,28.6,1.2,28.7,1.2c0.2,0.1,0.5,0.1,0.7,0.1  c0.7,0,1.3-0.4,1.6-1.1c0.4-0.9,0-1.9-0.9-2.3c-0.7-0.3-16.9-7.2-31.5-1.3c-0.9,0.4-1.3,1.4-1,2.3C10,21.7,10.3,22,10.7,22.2z"></path><path d="M57.2,20.2c-0.4,0.2-0.8,0.5-0.9,1s-0.2,0.9,0,1.4c0.3,0.6,0.9,1.1,1.6,1.1c0.2,0,0.5,0,0.7-0.1  c0.2-0.1,15.6-6.6,28.7-1.2c0.4,0.2,0.9,0.2,1.4,0c0.4-0.2,0.8-0.5,1-1c0.4-0.9-0.1-1.9-1-2.3C74.1,13,57.9,19.9,57.2,20.2z"></path><path d="M42.6,31.4c-0.7-0.3-16.9-7.2-31.5-1.3c-0.9,0.4-1.3,1.4-1,2.3c0.2,0.4,0.5,0.8,1,1c0.4,0.2,0.9,0.2,1.4,0  C25.7,28,41,34.6,41.2,34.6c0.2,0.1,0.5,0.1,0.7,0.1c0.7,0,1.3-0.4,1.6-1.1C43.9,32.8,43.5,31.8,42.6,31.4z"></path><path d="M89,30.1c-14.6-5.9-30.8,1-31.5,1.3c-0.9,0.4-1.3,1.4-0.9,2.3c0.3,0.6,0.9,1.1,1.6,1.1c0.2,0,0.5,0,0.7-0.1  c0.2-0.1,15.5-6.6,28.7-1.2c0.9,0.4,1.9-0.1,2.3-1C90.4,31.5,89.9,30.5,89,30.1z"></path><path d="M42.6,42.9c-0.7-0.3-16.9-7.2-31.5-1.3c-0.9,0.4-1.3,1.4-1,2.3c0.4,0.9,1.4,1.3,2.3,1  c13.2-5.4,28.6,1.2,28.7,1.2c0.2,0.1,0.5,0.1,0.7,0.1c0.7,0,1.3-0.4,1.6-1.1C43.9,44.3,43.5,43.3,42.6,42.9z"></path><path d="M89,41.6c-14.6-5.9-30.8,1-31.5,1.3c-0.4,0.2-0.8,0.5-0.9,1c-0.2,0.4-0.2,0.9,0,1.4  c0.3,0.6,0.9,1.1,1.6,1.1c0.2,0,0.5,0,0.7-0.1c0.2-0.1,15.5-6.6,28.7-1.2c0.9,0.4,1.9-0.1,2.3-1C90.4,43,89.9,42,89,41.6z"></path><path d="M42.5,54.4c-0.7-0.3-16.9-7.2-31.5-1.3c-0.9,0.4-1.3,1.4-1,2.3c0.2,0.4,0.5,0.8,1,1c0.4,0.2,0.9,0.2,1.4,0  c13.2-5.4,28.6,1.2,28.7,1.2c0.2,0.1,0.5,0.1,0.7,0.1c0.7,0,1.3-0.4,1.6-1.1C43.8,55.8,43.4,54.8,42.5,54.4z"></path><path d="M88.9,53.1c-14.6-6-30.8,1-31.5,1.3c-0.9,0.4-1.3,1.4-0.9,2.3c0.3,0.6,0.9,1.1,1.6,1.1c0.2,0,0.5,0,0.7-0.1  c0.2-0.1,15.5-6.6,28.7-1.2c0.4,0.2,0.9,0.2,1.4,0c0.4-0.2,0.8-0.5,1-1C90.2,54.5,89.8,53.5,88.9,53.1z"></path><path d="M41.8,69.1c0.7,0,1.3-0.4,1.6-1.1c0.4-0.9,0-1.9-0.9-2.3c-0.7-0.3-16.9-7.2-31.5-1.3  c-0.9,0.4-1.3,1.4-1,2.3c0.2,0.4,0.5,0.8,1,1c0.4,0.2,0.9,0.2,1.4,0c13.2-5.4,28.6,1.2,28.7,1.2C41.3,69,41.5,69.1,41.8,69.1z"></path><path d="M88.9,64.4c-14.6-6-30.8,1-31.5,1.3c-0.9,0.4-1.3,1.4-0.9,2.3c0.3,0.6,0.9,1.1,1.6,1.1c0.2,0,0.5,0,0.7-0.1  c0.2-0.1,15.5-6.6,28.7-1.2c0.4,0.2,0.9,0.2,1.4,0c0.4-0.2,0.8-0.5,1-1C90.2,65.8,89.8,64.7,88.9,64.4z"></path><path d="M97.9,12.1c0-0.8-0.5-1.6-1.3-1.9C72-0.3,54.9,10.1,50,13.8C45,10.1,27.9-0.3,3.3,10.2  c-0.8,0.3-1.3,1.1-1.3,1.9v78.6c0,0.7,0.4,1.4,1,1.8c0.3,0.2,0.7,0.3,1.1,0.3c0.3,0,0.6-0.1,0.9-0.2c0.2-0.1,17.1-7.8,43.5-0.2l0,0  l3,0l0.1,0c17.3-7,39.3-0.9,43.6,0.4c0.6,0.2,1.3,0.1,1.8-0.3c0.5-0.4,0.8-1,0.8-1.7L97.9,12.1z M93.8,87.8V88  c-7.7-2.1-15.2-3.1-22.4-3.1c-1.2,0-2.4,0-3.6,0.1C76.2,83.3,84.9,84.3,93.8,87.8z M93.8,83.4c-20.6-7.6-35.7-0.5-41.7,3.3l0-69.3  c3.2-2.5,19-13,41.7-3.9L93.8,83.4z M34.5,85.4C22.3,84,13.2,85.6,7.9,87.2c6.1-2.2,11.7-3.1,16.5-3.1  C28.3,84.1,31.7,84.6,34.5,85.4z M6.2,13.4c23.1-9.2,38.6,1.5,41.7,4l0,69.3C43.9,84.1,35.7,80,24.3,80c-5.4,0-11.4,0.9-18.1,3.4  L6.2,13.4z"></path></svg></span><span class="font-bold">Language</span></a><a class="text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-sm font-medium rounded-md" href="/packages/"><span class="text-gray-400 group-hover:text-gray-500 mr-3 flex-shrink-0 h-5 w-5 stroke-current fill-current stroke-2"><svg version="1.1" viewBox="0 0 100 125" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><g><path d="M85.8,35.6l11.2-13c0.5-0.5,0.6-1.3,0.4-2c-0.2-0.7-0.7-1.2-1.4-1.5L63.1,8.3c-0.8-0.3-1.7,0-2.3,0.6L50,21.5L39.2,9    c-0.6-0.7-1.5-0.9-2.3-0.6L4,19.1c-0.7,0.2-1.2,0.8-1.4,1.5c-0.2,0.7,0,1.4,0.4,2l11.2,13L3,48.6c-0.5,0.5-0.6,1.3-0.4,2    c0.2,0.7,0.7,1.2,1.4,1.5l10.9,3.6v23.2c0,0.9,0.6,1.8,1.5,2.1l32.9,10.8c0.2,0.1,0.5,0.1,0.7,0.1c0.2,0,0.5,0,0.7-0.1l32.9-10.8    c0.9-0.3,1.5-1.1,1.5-2.1V55.7l11-3.6c0.7-0.2,1.2-0.8,1.4-1.5c0.2-0.7,0-1.4-0.4-2L85.8,35.6z M24,35.6l26-8.5l26,8.5l-26,8.5    L24,35.6z M63.1,12.9l28.5,9.3l-9.4,10.9l-28.5-9.3L63.1,12.9z M36.9,12.9l9.4,10.9l-28.5,9.3L8.4,22.2L36.9,12.9z M17.8,38.1    l28.5,9.3l-9.4,10.9L8.4,49L17.8,38.1z M19.2,77.2V57.1l17.6,5.8c0.2,0.1,0.4,0.1,0.7,0.1c0.6,0,1.2-0.3,1.6-0.7l8.6-10v34.4    L19.2,77.2z M80.7,77.2l-28.6,9.4V52.2l8.6,10c0.4,0.5,1,0.7,1.6,0.7c0.2,0,0.5,0,0.7-0.1l17.6-5.8V77.2z M63.1,58.3l-9.4-10.9    l28.5-9.3L91.6,49L63.1,58.3z"></path></g></svg></span><span class="font-bold">Packages</span></a><a class="text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-sm font-medium rounded-md" href="/en/resources/applications/"><span class="text-gray-400 group-hover:text-gray-500 mr-3 flex-shrink-0 h-5 w-5 stroke-current fill-current stroke-2"><svg version="1.1" viewBox="0 0 100 125" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><path d="M85.32,15.63H78.65a1.5,1.5,0,0,0-1.5,1.5v3.53H73.36a5.5,5.5,0,0,0-10.57,0h-7.9a5.5,5.5,0,0,0-10.57,0H36.11a5.5,5.5,0,0,0-10.57,0H22.85V17.13a1.5,1.5,0,0,0-1.5-1.5H14.68a1.5,1.5,0,0,0-1.5,1.5V82.87a1.5,1.5,0,0,0,1.5,1.5h6.67a1.5,1.5,0,0,0,1.5-1.5V74.63h2.69a5.49,5.49,0,0,0,9.28,2.27,5.49,5.49,0,0,0,9.29-2.27H54.79a5.49,5.49,0,0,0,9.29,2.27,5.49,5.49,0,0,0,9.28-2.27h3.79v8.24a1.5,1.5,0,0,0,1.5,1.5h6.67a1.5,1.5,0,0,0,1.5-1.5V17.13A1.5,1.5,0,0,0,85.32,15.63Zm-25.22,39a5.5,5.5,0,0,0-9.29-2.26,5.48,5.48,0,0,0-8,0,5.49,5.49,0,0,0-8,0,5.49,5.49,0,0,0-9.28,2.26H22.85v-14h2.69a5.49,5.49,0,0,0,9.28,2.27,5.49,5.49,0,0,0,8,0,5.49,5.49,0,0,0,9.28-2.27H62.79a5.49,5.49,0,0,0,10.57,0h3.79v14Zm-2.79,1.5a2.5,2.5,0,1,1-2.5-2.49A2.5,2.5,0,0,1,57.31,56.14Zm-8,0a2.5,2.5,0,1,1-2.49-2.49A2.5,2.5,0,0,1,49.31,56.14Zm-8,0a2.5,2.5,0,1,1-2.5-2.49A2.5,2.5,0,0,1,41.32,56.14Zm-8,0a2.5,2.5,0,1,1-2.49-2.49A2.5,2.5,0,0,1,33.32,56.14Zm-5-17a2.5,2.5,0,1,1,2.5,2.5A2.5,2.5,0,0,1,28.33,39.15Zm8,0a2.5,2.5,0,1,1,2.5,2.5A2.5,2.5,0,0,1,36.32,39.15Zm8,0a2.5,2.5,0,1,1,2.5,2.5A2.5,2.5,0,0,1,44.32,39.15Zm21.26,0a2.5,2.5,0,1,1,2.49,2.5A2.5,2.5,0,0,1,65.58,39.15Zm2.49-19.48a2.5,2.5,0,1,1-2.49,2.49A2.5,2.5,0,0,1,68.07,19.67Zm-18.47,0a2.5,2.5,0,1,1-2.5,2.49A2.5,2.5,0,0,1,49.6,19.67Zm-18.77,0a2.5,2.5,0,1,1-2.5,2.49A2.5,2.5,0,0,1,30.83,19.67Zm-5.29,4a5.49,5.49,0,0,0,10.57,0h8.21a5.49,5.49,0,0,0,10.57,0h7.9a5.49,5.49,0,0,0,10.57,0h3.79v14H73.36a5.5,5.5,0,0,0-10.57,0H52.1a5.49,5.49,0,0,0-9.28-2.26,5.49,5.49,0,0,0-8,0,5.49,5.49,0,0,0-9.28,2.26H22.85v-14ZM19.85,81.37H16.18V18.63h3.67Zm11-5.74a2.5,2.5,0,1,1,2.49-2.5A2.5,2.5,0,0,1,30.83,75.63Zm8,0a2.5,2.5,0,1,1,2.5-2.5A2.5,2.5,0,0,1,38.82,75.63Zm21.26,0a2.5,2.5,0,1,1,2.5-2.5A2.5,2.5,0,0,1,60.08,75.63Zm8,0a2.5,2.5,0,1,1,2.5-2.5A2.5,2.5,0,0,1,68.07,75.63Zm5.29-4a5.49,5.49,0,0,0-9.28-2.26,5.5,5.5,0,0,0-9.29,2.26H44.11a5.5,5.5,0,0,0-9.29-2.26,5.49,5.49,0,0,0-9.28,2.26H22.85v-14h2.69a5.49,5.49,0,0,0,9.28,2.27,5.49,5.49,0,0,0,8,0,5.48,5.48,0,0,0,8,0,5.49,5.49,0,0,0,9.29-2.27H77.15v14Zm10.46,9.74H80.15V18.63h3.67Z"></path></svg></span><span class="font-bold">Applications</span></a><a class="text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-sm font-medium rounded-md" href="/en/resources/bestpractices/"><span class="text-gray-400 group-hover:text-gray-500 mr-3 flex-shrink-0 h-5 w-5 stroke-current fill-current stroke-2"><svg version="1.1" viewBox="0 0 100 125" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><path d="M7,51h28.7c3.3,0,6.6-1.4,8.8-3.9L61.2,29H76c6.6,0,9-3.8,9-7c0-1.1-0.2-2.1-0.7-3H88c3.9,0,7-3.1,7-7s-3.1-7-7-7H45  c-0.1,0-0.1,0-0.2,0c0,0-0.1,0-0.2,0s-0.1,0-0.2,0c-0.1,0-0.1,0-0.2,0.1c0,0-0.1,0-0.2,0.1c-0.1,0-0.1,0.1-0.2,0.1c0,0,0,0,0,0  L22.3,21H7c-1.1,0-2,0.9-2,2v26C5,50.1,5.9,51,7,51z M76,25H64.5c0.5-1.1,0.8-2.4,0.7-3.7c-0.1-0.8-0.3-1.6-0.6-2.3H78  c1.7,0,3,1.3,3,3C81,24.7,77.5,25,76,25z M19,25h4c0.2,0,0.4,0,0.5-0.1c0,0,0.1,0,0.1,0c0.2-0.1,0.3-0.1,0.5-0.2c0,0,0,0,0,0L45.7,9  H88c1.7,0,3,1.3,3,3c0,1.6-1.3,3-3,3H58c-0.1,0-0.3,0-0.4,0c-1.8,0.2-3.5,1-4.7,2.3L34.9,36.9c-0.7,0.8-0.7,2.1,0.1,2.8  s2.1,0.7,2.8-0.1l18-19.5c1.1-1.2,2.9-1.4,4.2-0.5c0.7,0.5,1.1,1.3,1.2,2.1c0.1,0.8-0.2,1.7-0.8,2.3L41.6,44.4  c-1.5,1.6-3.7,2.6-5.9,2.6H19V25z M9,25h6v22H9V25z M93,49H64.3c-3.3,0-6.6,1.4-8.8,3.9L38.8,71H24c-6.6,0-9,3.8-9,7  c0,1.1,0.2,2.1,0.7,3H12c-3.9,0-7,3.1-7,7s3.1,7,7,7h43c0,0,0,0,0,0c0.2,0,0.4,0,0.5-0.1c0,0,0.1,0,0.1,0c0.2-0.1,0.3-0.1,0.5-0.2  c0,0,0,0,0,0L77.7,79H93c1.1,0,2-0.9,2-2V51C95,49.9,94.1,49,93,49z M24,75h11.5c-0.5,1.1-0.8,2.4-0.7,3.7c0.1,0.8,0.3,1.6,0.6,2.3  H22c-1.7,0-3-1.4-3-3C19,75.3,22.5,75,24,75z M81,75h-4c-0.1,0-0.2,0-0.3,0c0,0-0.1,0-0.1,0c-0.1,0-0.2,0-0.2,0.1c0,0-0.1,0-0.2,0.1  s-0.1,0-0.2,0.1c-0.1,0-0.1,0.1-0.2,0.1c0,0,0,0,0,0L54.3,91H12c-1.7,0-3-1.4-3-3c0-1.7,1.3-3,3-3h30c0.1,0,0.3,0,0.4,0  c1.8-0.2,3.5-0.9,4.7-2.3l17.9-19.5c0.7-0.8,0.7-2.1-0.1-2.8c-0.8-0.7-2.1-0.7-2.8,0.1l-18,19.5c-1.1,1.2-2.9,1.5-4.2,0.5  c-0.7-0.5-1.1-1.3-1.2-2.1c-0.1-0.9,0.2-1.7,0.8-2.3l18.8-20.4c1.5-1.6,3.7-2.6,5.9-2.6H81V75z M91,75h-6V53h6V75z"></path></svg></span><span class="font-bold">Best Practices</span></a><h3 class="ml-6 mt-2 px-3 font-semibold text-gray-400 uppercase">Community</h3><a class="text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-sm font-medium rounded-md" href="/en/community/opportunities/"><span class="text-gray-400 group-hover:text-gray-500 mr-3 flex-shrink-0 h-5 w-5 stroke-current fill-current stroke-2"><svg version="1.1" viewBox="0 0 1024 1280" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><g><path d="M512,300.4c-31,0-60-14.7-81.7-41.3c-20.6-25.2-32-58-32-92.1c0-34.5,11.8-63.3,34.1-83.4c20.1-18.2,48.4-28.2,79.6-28.2   c31.2,0,59.5,10,79.6,28.2c22.3,20.1,34.1,49,34.1,83.4c0,34.2-11.4,66.9-32,92.1C572,285.7,543,300.4,512,300.4z M512,95.4   c-17.3,0-73.7,5.2-73.7,71.6c0,24.6,8.4,49,23,66.8c14,17.1,32,26.6,50.7,26.6c18.7,0,36.7-9.4,50.7-26.6   c14.6-17.9,23-42.2,23-66.8C585.7,100.6,529.3,95.4,512,95.4z"></path><rect height="44.4" width="40" x="383.9" y="470.9"></rect><path d="M338.4,515.4h-40v-83.6c0-35,20.6-66.7,52.6-80.9l100-44.4c10.4-4.6,22.4-1.5,29.2,7.5l31.9,41.7l32.4-41.7   c6.8-9,18.8-12,29.2-7.4l99.4,44.3c31.9,14.2,52.5,45.9,52.5,80.9v83.6h-40v-83.6c0-19.2-11.3-36.6-28.7-44.3l-88.2-39.3   l-56.8,73.1l-55.9-73.1l-88.7,39.4c-17.5,7.8-28.8,25.2-28.8,44.3V515.4z"></path><rect height="44.4" width="40" x="600.1" y="470.9"></rect><rect height="126.9" width="40" x="492" y="388.4"></rect><path d="M819.5,784.5c-3.3,0-6.7-0.6-9.9-2c-9.6-4-15.9-13.3-15.9-23.7v-51.2h-75.1c-13,0-23.6-10.6-23.6-23.6V583.8   c0-13,10.6-23.6,23.6-23.6h75.1V509c0-10.5,6.2-19.8,15.9-23.8c9.7-4,20.7-1.8,28.1,5.6l124.9,124.9c10,10,10,26.4,0,36.4   L837.6,776.9C832.7,781.9,826.1,784.5,819.5,784.5z M735,667.6h98.7v56.7l90.5-90.5l-90.5-90.5v56.8H735V667.6z"></path><path d="M512,968.6c-6.6,0-13.2-2.5-18.2-7.5l-125-124.9c-7.3-7.3-9.5-18.2-5.7-27.7c3.9-9.6,13.1-16,23.5-16.2l0.4,0h51.2v-75.1   c0-13,10.6-23.6,23.6-23.6h100.3c13,0,23.6,10.6,23.6,23.6v75.1H637c10.4,0,19.7,6.2,23.7,15.9c4,9.7,1.8,20.7-5.6,28.1L530.2,961   C525.2,966.1,518.6,968.6,512,968.6z M421.5,832.2l90.5,90.5l90.5-90.5h-56.7v-98.7h-67.5v98.7H421.5z"></path><path d="M204.5,784.5c-6.7,0-13.3-2.6-18.2-7.6L61.5,652c-10-10-10-26.4,0-36.4l124.9-124.9c7.4-7.4,18.4-9.6,28.1-5.6   c9.7,4,15.9,13.3,15.9,23.8v51.2h75.1c13,0,23.6,10.6,23.6,23.6V684c0,13-10.6,23.6-23.6,23.6h-75.1v51.2   c0,10.4-6.2,19.7-15.9,23.7C211.2,783.9,207.9,784.5,204.5,784.5z M99.8,633.8l90.5,90.5v-56.7H289v-67.4h-98.7v-56.8L99.8,633.8z"></path></g></svg></span><span class="font-bold">Opportunities</span></a><a class="text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-sm font-medium rounded-md" href="/en/community/blog/"><span class="text-gray-400 group-hover:text-gray-500 mr-3 flex-shrink-0 h-5 w-5 stroke-current fill-current stroke-2"><svg version="1.1" viewBox="0 0 100 125" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><g transform="translate(0,-952.36218)"><path d="M 17.78125 15 A 2.0002 2.0002 0 0 0 15.96875 17 L 15.96875 25.3125 L 8 25.3125 A 2.0002 2.0002 0 0 0 6 27.3125 L 6 83 A 2.0002 2.0002 0 0 0 8 85 L 92 85 A 2.0002 2.0002 0 1 0 92 81 L 10 81 L 10 29.3125 L 15.96875 29.3125 L 15.96875 74.75 A 2.0002 2.0002 0 1 0 19.96875 74.75 L 19.96875 19 L 89.84375 19 L 89.84375 73.96875 A 2.0002 2.0002 0 1 0 93.84375 73.96875 L 93.84375 17 A 2.0002 2.0002 0 0 0 91.84375 15 L 17.96875 15 A 2.0002 2.0002 0 0 0 17.78125 15 z M 28.75 26.34375 A 2.0002 2.0002 0 0 0 26.96875 28.34375 L 26.96875 51.03125 A 2.0002 2.0002 0 0 0 28.96875 53.03125 L 52.90625 53.03125 A 2.0002 2.0002 0 0 0 54.90625 51.03125 L 54.90625 28.34375 A 2.0002 2.0002 0 0 0 52.90625 26.34375 L 28.96875 26.34375 A 2.0002 2.0002 0 0 0 28.75 26.34375 z M 63.6875 26.34375 A 2.0029885 2.0029885 0 1 0 63.90625 30.34375 L 81.84375 30.34375 A 2.0002 2.0002 0 1 0 81.84375 26.34375 L 63.90625 26.34375 A 2.0002 2.0002 0 0 0 63.6875 26.34375 z M 30.96875 30.34375 L 50.90625 30.34375 L 50.90625 49.03125 L 30.96875 49.03125 L 30.96875 30.34375 z M 63.6875 37.6875 A 2.0029885 2.0029885 0 1 0 63.90625 41.6875 L 81.84375 41.6875 A 2.0002 2.0002 0 1 0 81.84375 37.6875 L 63.90625 37.6875 A 2.0002 2.0002 0 0 0 63.6875 37.6875 z M 63.6875 49.03125 A 2.0029885 2.0029885 0 1 0 63.90625 53.03125 L 81.84375 53.03125 A 2.0002 2.0002 0 1 0 81.84375 49.03125 L 63.90625 49.03125 A 2.0002 2.0002 0 0 0 63.6875 49.03125 z M 27.75 60.375 A 2.0029885 2.0029885 0 1 0 27.96875 64.375 L 81.84375 64.375 A 2.0002 2.0002 0 1 0 81.84375 60.375 L 27.96875 60.375 A 2.0002 2.0002 0 0 0 27.75 60.375 z M 27.75 71.71875 A 2.0029885 2.0029885 0 1 0 27.96875 75.71875 L 81.6875 75.71875 A 2.0002 2.0002 0 1 0 81.6875 71.71875 L 27.96875 71.71875 A 2.0002 2.0002 0 0 0 27.75 71.71875 z " transform="translate(0,952.36218)"></path></g></svg></span><span class="font-bold">News</span></a><a class="text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-sm font-medium rounded-md" href="/en/community/aroundweb/"><span class="text-gray-400 group-hover:text-gray-500 mr-3 flex-shrink-0 h-5 w-5 stroke-current fill-current stroke-2"><svg viewBox="0 0 64 80" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><g><path d="M32,9A23,23,0,1,0,55,32,23.0259,23.0259,0,0,0,32,9Zm0,44A21,21,0,1,1,53,32,21.0239,21.0239,0,0,1,32,53ZM63,32A30.99,30.99,0,0,1,10.3,54.124,29.6168,29.6168,0,0,1,8,51.6027V55a1,1,0,0,1-2,0V49a1,1,0,0,1,1-1h6a1,1,0,0,1,0,2H9.2789a27.8374,27.8374,0,0,0,2.4174,2.6929A28.99,28.99,0,0,0,61,32a28.617,28.617,0,0,0-2.86-12.5645,1,1,0,1,1,1.8008-.871A30.6112,30.6112,0,0,1,63,32ZM5.86,44.5645a1,1,0,0,1-1.8008.871A30.6112,30.6112,0,0,1,1,32,30.99,30.99,0,0,1,53.7,9.876,29.6168,29.6168,0,0,1,56,12.3973V9a1,1,0,0,1,2,0v6a1,1,0,0,1-1,1H51a1,1,0,0,1,0-2h3.7211a27.8374,27.8374,0,0,0-2.4174-2.6929A28.99,28.99,0,0,0,3,32,28.617,28.617,0,0,0,5.86,44.5645ZM43.1411,20.1112a23.1406,23.1406,0,0,0,2.1978-1.3661,1,1,0,0,0-1.1582-1.63c-.5694.4049-1.16.7679-1.76,1.1113A22.1893,22.1893,0,0,0,40.02,13.8438,1,1,0,1,0,38.4,15.0166,20.1638,20.1638,0,0,1,40.6245,19.14,20.8665,20.8665,0,0,1,33,20.9617V13a1,1,0,0,0-2,0v7.9617A20.866,20.866,0,0,1,23.3755,19.14,20.1638,20.1638,0,0,1,25.6,15.0166a1,1,0,1,0-1.6191-1.1728,22.1893,22.1893,0,0,0-2.4013,4.3827c-.6-.3434-1.19-.7064-1.76-1.1113a1,1,0,0,0-1.1582,1.63,23.1406,23.1406,0,0,0,2.1978,1.3661A36.8955,36.8955,0,0,0,19.0317,31H13a1,1,0,0,0,0,2h6.0317a36.8955,36.8955,0,0,0,1.8272,10.8888,23.1406,23.1406,0,0,0-2.1978,1.3661,1,1,0,0,0,1.1582,1.63c.5694-.4049,1.16-.7679,1.76-1.1113a22.193,22.193,0,0,0,2.4013,4.3828A1,1,0,1,0,25.6,48.9834a20.1636,20.1636,0,0,1-2.224-4.1233A20.866,20.866,0,0,1,31,43.0383V51a1,1,0,0,0,2,0V43.0383A20.8665,20.8665,0,0,1,40.6245,44.86,20.1638,20.1638,0,0,1,38.4,48.9834,1,1,0,1,0,40.02,50.1563a22.193,22.193,0,0,0,2.4013-4.3828c.6.3434,1.1905.7064,1.76,1.1113a1,1,0,0,0,1.1582-1.63,23.1406,23.1406,0,0,0-2.1978-1.3661A36.8955,36.8955,0,0,0,44.9683,33H51a1,1,0,0,0,0-2H44.9683A36.8955,36.8955,0,0,0,43.1411,20.1112Zm-1.8222.9086A35.3906,35.3906,0,0,1,42.9679,31H33V22.9617A22.855,22.855,0,0,0,41.3189,21.02Zm-18.6378,0A22.855,22.855,0,0,0,31,22.9617V31H21.0321A35.3906,35.3906,0,0,1,22.6811,21.02Zm0,21.96A35.3906,35.3906,0,0,1,21.0321,33H31v8.0383A22.855,22.855,0,0,0,22.6811,42.98Zm18.6378,0A22.855,22.855,0,0,0,33,41.0383V33h9.9679A35.3906,35.3906,0,0,1,41.3189,42.98Z"></path></g></svg></span><span class="font-bold">Around the Web</span></a><a class="text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-sm font-medium rounded-md" href="/en/resources/archive/"><span class="text-gray-400 group-hover:text-gray-500 mr-3 flex-shrink-0 h-5 w-5 stroke-current fill-current stroke-2"><svg viewBox="0 0 32 40" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><path d="M28,3H4A3,3,0,0,0,1,6V8a3,3,0,0,0,2,2.816V26a3,3,0,0,0,3,3H26a3,3,0,0,0,3-3V10.816A3,3,0,0,0,31,8V6A3,3,0,0,0,28,3ZM27,26a1,1,0,0,1-1,1H6a1,1,0,0,1-1-1V11H27ZM29,8a1,1,0,0,1-1,1H4A1,1,0,0,1,3,8V6A1,1,0,0,1,4,5H28a1,1,0,0,1,1,1Z"></path><path d="M13,17h6a1,1,0,0,0,0-2H13a1,1,0,0,0,0,2Z"></path></svg></span><span class="font-bold">Archive</span></a></nav></div></div></div></div></div></div><main class="relative bg-graylight pb-1"><div class="mx-auto"><div class="grid grid-cols-9 bg-white"><nav class="toc"><ul>
<li><ul>
<li><a href="#speed">Speed</a>
</li>
<li><a href="#profiling">Profiling</a>
</li>
<li><a href="#summary">Summary</a>
</li>
</ul>
</li>
</ul>
</nav><div class="col-span-9 lg:col-span-7 bg-graylight relative py-16 overflow-hidden"><div class="relative px-4 sm:px-6 lg:px-8"><div class="text-lg max-w-prose mx-auto"><h1><span class="mt-2 block text-3xl text-center leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl">Performance and Profiling</span></h1><p class="mt-8 text-xl text-gray-500 leading-8">Understand how to profile your OCaml code to analyse its performance and produce faster programs
</p></div><div class="mt-6 prose prose-yellow prose-lg text-gray-500 mx-auto"><h2 id="speed">Speed</h2>
<p>Why is OCaml fast? Indeed, step back and ask <em>is OCaml fast?</em> How can we
make programs faster? In this chapter we'll look at what actually
happens when you compile your OCaml programs down to machine code. This
will help in understanding why OCaml is not just a great language for
programming, but is also a very fast language indeed. And it'll help you
to help the compiler write better machine code for you. It's also (I
believe anyway) a good thing for programmers to have some idea of what
happens between you typing <code>ocamlopt</code> and getting a binary you can run.</p>
<p>But you will need to know some assembler to get the most out of this
section. Don't be afraid! I'll help you out by translating the assembler
into a C-like pseudocode (after all C is just a portable assembly
language).</p>
<h3 id="basics-of-assembly-language">Basics of assembly language</h3>
<p>The examples I give in this chapter are all compiled on an x86 Linux
machine. The x86 is, of course, a 32 bit machine, so an x86 &quot;word&quot; is 4
bytes (= 32 bits) long. At this level OCaml deals mostly with word-sized
objects, so you'll need to remember to multiply by four to get the size
in bytes.</p>
<p>To refresh your memory, the x86 has only a small number of general
purpose registers, each of which can store one word. The Linux assembler
puts <code>%</code> in front of register names. The registers are: <code>%eax</code>, <code>%ebx</code>,
<code>%ecx</code>, <code>%edx</code>, <code>%esi</code>, <code>%edi</code>, <code>%ebp</code> (special register used for stack
frames), and <code>%esp</code> (the stack pointer).</p>
<p>The Linux assembler (in common with other Unix assemblers, but opposite
to MS-derived assemblers) writes moves to and from registers/memory as:</p>
<pre><code class="language-assembly">movl from, to
</code></pre>
<p>So <code>movl %ebx, %eax</code> means &quot;copy the contents of register <code>%ebx</code> into
register <code>%eax</code>&quot; (not the other way round).</p>
<p>Almost all of the assembly language that we will look at is going to be
dominated not by machine code instructions like <code>movl</code> but by what are
known as <strong>assembler directives</strong>. These directives begin
with a . (period) and they literally <em>direct</em> the assembler to do
something. Here are the common ones for the Linux assembler:</p>
<h4 id="text">.text</h4>
<p><strong>Text</strong> is the Unix way of saying &quot;program code&quot;. The <strong>text segment</strong>
simply means the part of the executable where program code is stored.
The <code>.text</code> directive switches the assembler so it starts writing into
the text segment.</p>
<h4 id="data">.data</h4>
<p>Similarly, the <code>.data</code> directive switches the assembler so it starts
writing into the data segment (part) of the executable.</p>
<pre><code class="language-assembly">  .globl foo
foo:
</code></pre>
<p>This declares a global symbol called <code>foo</code>. It means the address of the
next thing to come can be named <code>foo</code>. Writing just <code>foo:</code> without the
preceding <code>.globl</code> directive declares a local symbol (local to just the
current file).</p>
<pre><code class="language-assembly">.long 12345
.byte 9
.ascii &quot;hello&quot;
.space 4
</code></pre>
<p><code>.long</code> writes a word (4 bytes) to the current segment. <code>.byte</code> writes a
single byte. <code>.ascii</code> writes a string of bytes (NOT nul-terminated).
<code>.space</code> writes the given number of zero bytes. Normally you use these
in the data segment.</p>
<h3 id="the-hello-world-program">The &quot;hello, world&quot; program</h3>
<p>Enough assembler. Put the following program into a file called
<code>smallest.ml</code>:</p>
<pre><code class="language-ocaml">print_string &quot;hello, world\n&quot;
</code></pre>
<p>And compile it to a native code executable using:</p>
<pre><code class="language-shell">ocamlopt -S smallest.ml -o smallest
</code></pre>
<p>The <code>-S</code> (capital S) tells the compiler to leave the assembly language
file (called <code>smallest.s</code> - lowercase s) instead of deleting it.</p>
<p>Here are the edited highlights of the <code>smallest.s</code> file with my comments
added. First of all the data segment:</p>
<pre><code class="language-assembly">    .data
    .long   4348                     ; header for string
    .globl  Smallest__1
lest__1:
    .ascii  &quot;hello, world\12&quot;        ; string
    .space  2                        ; padding ..
    .byte   2                        ;  .. after string
</code></pre>
<p>Next up the text (program code) segment:</p>
<pre><code class="language-assembly">    .text
    .globl  Smallest__entry          ; entry point to the program
lest__entry:

    ; this is equivalent to the C pseudo-code:
    ; Pervasives.output_string (stdout, &amp;Smallest__1)

    movl    $Smallest__1, %ebx
    movl    Pervasives + 92, %eax    ; Pervasives + 92 == stdout
    call    Pervasives__output_string_212

    ; return 1

    movl    $1, %eax
    ret
</code></pre>
<p>In C everything has to be inside a function. Think about how you can't
just write <code>printf (&quot;hello, world\n&quot;);</code> in C, but instead you have to
put it inside <code>main () { ... }</code>. In OCaml you are allowed to have
commands at the top level, not inside a function. But when we translate
this into assembly language, where do we put those commands? There needs
to be some way to call those commands from outside, so they need to be
labelled in some way. As you can see from the code snippet, OCaml solves
this by taking the filename (<code>smallest.ml</code>), capitalizing it and adding
<code>__entry</code>, thus making up a symbol called <code>Smallest__entry</code> to refer to
the top level commands in this file.</p>
<p>Now look at the code that OCaml has generated. The original code said
<code>print_string &quot;hello, world\n&quot;</code>, but OCaml has instead compiled the
equivalent of <code>Pervasives.output_string stdout &quot;hello, world\n&quot;</code>. Why?
If you look into <code>pervasives.ml</code> you'll see why:</p>
<pre><code class="language-ocaml">let print_string s = output_string stdout s
</code></pre>
<p>OCaml has <em>inlined</em> this function. <strong>Inlining</strong> - taking a function and
expanding it from its definition - is sometimes a performance win,
because it avoids the overhead of an extra function call, and it can
lead to more opportunities for the optimizer to do its thing. Sometimes
inlining is not good, because it can lead to code bloating, and thus
destroys the good work done by the processor cache (and besides function
calls are actually not very expensive at all on modern processors).
OCaml will inline simple calls like this, because they are essentially
risk free, almost always leading to a small performance gain.</p>
<p>What else can we notice about this? The calling convention seems to be
that the first two arguments are passed in the <code>%eax</code> and <code>%ebx</code>
registers respectively. Other arguments are probably passed on the
stack, but we'll see about that later.</p>
<p>C programs have a simple convention for storing strings, known as
<strong>ASCIIZ</strong>. This just means that the string is stored in ASCII, followed
by a trailing NUL (<code>\0</code>) character. OCaml stores strings in a different
way, as we can see from the data segment above. This string is stored
like this:</p>
<pre><code>4 byte header: 4348
the string:    h e l l o , SP w o r l d \n
padding:       \0 \0 \002
</code></pre>
<p>Firstly the padding brings the total length of the string up to a whole
number of words (4 words, 16 bytes in this example). The padding is
carefully designed so that you can work out the actual length of the
string in bytes, provided that you know the total number of <em>words</em>
allocated to the string. The encoding for this is unambiguous (which you
can prove to yourself).</p>
<p>One nice feature of having strings with an explicit length is that you
can represent strings containing ASCII NUL (<code>\0</code>) characters in them,
something which is difficult to do in C. However, the flip side is that
you need to be aware of this if you pass an OCaml string to some C
native code: if it contains ASCII NUL, then the C <code>str*</code> functions will
fail on it.</p>
<p>Secondly we have the header. Every boxed (allocated) object in OCaml has
a header which tells the garbage collector about how large the object is
in words, and something about what the object contains. Writing the
number 4348 in binary:</p>
<pre><code>length of the object in words:  0000 0000 0000 0000 0001 00 (4 words)
color (used by GC):             00
tag:                            1111 1100 (String_tag)
</code></pre>
<p>See <code>/usr/include/caml/mlvalues.h</code> for more information about
the format of heap allocated objects in OCaml.</p>
<p>One unusual thing is that the code passes a pointer to the start of the
string (ie. the word immediately after the header) to
<code>Pervasives.output_string</code>. This means that <code>output_string</code> must
subtract 4 from the pointer to get at the header to determine the length
of the string.</p>
<p>What have I missed out from this simple example? Well, the text segment
above is not the whole story. It would be really nice if OCaml
translated that simple hello world program into just the five lines of
assembler shown above. But there is the question of what actually calls
<code>Smallest__entry</code> in the real program. For this OCaml includes a whole
load of bootstrapping code which does things like starting up the
garbage collector, allocating and initializing memory, calling
initializers in libraries and so on. OCaml links all of this code
statically to the final executable, which is why the program I end up
with (on Linux) weighs in at a portly 95,442 bytes. Nevertheless the
start-up time for the program is still unmeasurably small (under a
millisecond), compared to several seconds for starting up a reasonable
Java program and a second or so for a Perl script.</p>
<h3 id="tail-recursion">Tail recursion</h3>
<p>We mentioned in chapter 6 that OCaml can turn tail-recursive function
calls into simple loops. Is this actually true? Let's look at what
simple tail recursion compiles to:</p>
<!-- do not execute this code!! -->
<!-- $MDX skip -->
<pre><code class="language-ocaml">let rec loop () =
  print_string &quot;I go on forever ...&quot;;
  loop ()
  
let () = loop ()
</code></pre>
<p>The file is called <code>tail.ml</code>, so following OCaml's usual procedure for
naming functions, our function will be called <code>Tail__loop_nnn</code> (where
<code>nnn</code> is some unique number which OCaml appends to distinguish
identically named functions from one another).</p>
<p>Here is the assembler for just the <code>loop</code> function defined above:</p>
<pre><code class="language-assembly">        .text
        .globl  Tail__loop_56
Tail__loop_56:
.L100:
        ; Print the string
        movl    $Tail__2, %ebx
        movl    Pervasives + 92, %eax
        call    Pervasives__output_string_212
.L101:
        ; The following movl is in fact obsolete:
        movl    $1, %eax
        ; Jump back to the .L100 label above (ie. loop forever)
        jmp     .L100
</code></pre>
<p>So that's pretty conclusive. Calling <code>Tail__loop_56</code> will first print
the string, and then jump back to the top, then print the string, and
jump back, and so on forever. It's a simple loop, <em>not</em> a recursive
function call, so it doesn't use any stack space.</p>
<h3 id="digression-where-are-the-types">Digression: Where are the types?</h3>
<p>OCaml is statically typed as we've said before on many occasions, so at
compile time, OCaml knows that the type of <code>loop</code> is <code>unit -&gt; unit</code>. It
knows that the type of <code>&quot;hello, world\n&quot;</code> is <code>string</code>. It doesn't make
any attempt to communicate this fact to the <code>output_string</code> function.
<code>output_string</code> is expecting a <code>channel</code> and a <code>string</code> as arguments,
and indeed that's what it gets. What would happen if we passed, say, an
<code>int</code> instead of a <code>string</code>?</p>
<p>This is essentially an impossible condition. Because OCaml knows the
types at compile time, it doesn't need to deal with types or check types
at run time. There is no way, in pure OCaml, to &quot;trick&quot; the compiler
into generating a call to <code>Pervasives.output_string stdout 1</code>. Such an
error would be flagged at compile time, by type inference, and so could
never be compiled.</p>
<p>The upshot is that by the time we have compiled OCaml code to assembler
type information mostly isn't required, certainly in the cases we've
looked at above where the type is fully known at compile time, and there
is no polymorphism going on.</p>
<p>Fully knowing all your types at compile time is a major performance win
because it totally avoids any dynamic type checking at run time. Compare
this to a Java method invocation for example: <code>obj.method ()</code>. This is
an expensive operation because you need to find the concrete class that
<code>obj</code> is an instance of, and then look up the method, and you need to do
all of this potentially <em>every</em> time you call any method. Casting
objects is another case where you need to do a considerable amount of
work at run time in Java. None of this is allowed with OCaml's static
types.</p>
<h3 id="polymorphic-types">Polymorphic types</h3>
<p>As you might have guessed from the discussion above, polymorphism, which
is where the compiler <em>doesn't</em> have a fully known type for a function
at compile time, might have an impact on performance. Suppose we require
a function to work out the maximum of two integers. Our first attempt
is:</p>
<pre><code class="language-ocaml"># let max a b =
  if a &gt; b then a else b
val max : 'a -&gt; 'a -&gt; 'a = &lt;fun&gt;
</code></pre>
<p>Simple enough, but recall that the &gt; (greater than) operator in OCaml
is polymorphic. It has type <code>'a -&gt; 'a -&gt; bool</code>, and this means that the
<code>max</code> function we defined above is going to be polymorphic:</p>
<pre><code class="language-ocaml"># let max a b =
  if a &gt; b then a else b
val max : 'a -&gt; 'a -&gt; 'a = &lt;fun&gt;
</code></pre>
<p>This is indeed reflected in the code that OCaml generates for this
function, which is pretty complex:</p>
<pre><code class="language-assembly">        .text
        .globl  Max__max_56
Max__max_56:

        ; Reserve two words of stack space.

        subl    $8, %esp

        ; Save the first and second arguments (a and b) on the stack.

        movl    %eax, 4(%esp)
        movl    %ebx, 0(%esp)

        ; Call the C &quot;greaterthan&quot; function (in the OCaml library).

        pushl   %ebx
        pushl   %eax
        movl    $greaterthan, %eax
        call    caml_c_call
.L102:
        addl    $8, %esp

        ; If the C &quot;greaterthan&quot; function returned 1, jump to .L100

        cmpl    $1, %eax
        je      .L100

        ; Returned 0, so get argument a which we previously saved on
        ; the stack and return it.

        movl    4(%esp), %eax
        addl    $8, %esp
        ret

        ; Returned 1, so get argument b which we previously saved on
        ; the stack and return it.

.L100:
        movl    0(%esp), %eax
        addl    $8, %esp
        ret
</code></pre>
<p>Basically the &gt; operation is done by calling a C function from the
OCaml library. This is obviously not going to be very efficient, nothing
like as efficient as if we could generate some quick inline assembly
language for doing the &gt;.</p>
<p>This is not a complete dead loss by any means. All we need to do is to
hint to the OCaml compiler that the arguments are in fact integers. Then
OCaml will generate a specialised version of <code>max</code> which only works on
<code>int</code> arguments:</p>
<pre><code class="language-ocaml"># let max (a : int) (b : int) =
  if a &gt; b then a else b
val max : int -&gt; int -&gt; int = &lt;fun&gt;
</code></pre>
<p>Here is the assembly code generated for this function:</p>
<pre><code class="language-assembly">        .text
        .globl  Max_int__max_56
Max_int__max_56:

        ; Single assembly instruction &quot;cmpl&quot; for performing the &gt; op.
        cmpl    %ebx, %eax

        ; If %ebx &gt; %eax, jump to .L100
        jle     .L100
        ; Just return argument a.
        ret
        ; Return argument b.

.L100:
        movl    %ebx, %eax
        ret
</code></pre>
<p>That's just 5 lines of assembler, and is about as simple as you can make
it.</p>
<p>What about this code:</p>
<pre><code class="language-ocaml"># let max a b =
  if a &gt; b then a else b
val max : 'a -&gt; 'a -&gt; 'a = &lt;fun&gt;
# let () = print_int (max 2 3)
3
</code></pre>
<p>Is OCaml going to be smart enough to inline the <code>max</code> function and
specialise it to work on integers? Disappointingly the answer is no.
OCaml still has to generate the external <code>Max.max</code> symbol (because this
is a module, and so that function might be called from outside the
module), and it doesn't inline the function.</p>
<p>Here's another variation:</p>
<pre><code class="language-ocaml"># let max a b =
  if a &gt; b then a else b in
  print_int (max 2 3)
3
- : unit = ()
</code></pre>
<p>Disappointingly although the definition of <code>max</code> in this code is local
(it can't be called from outside the module), OCaml still doesn't
specialise the function.</p>
<p>Lesson: if you have a function which is unintentionally polymorphic then
you can help the compiler by specifying types for one or more of the
arguments.</p>
<h3 id="the-representation-of-integers-tag-bits-heap-allocated-values">The representation of integers, tag bits, heap-allocated values</h3>
<p>There are a number of peculiarities about integers in OCaml. One of
these is that integers are 31 bit entities, not 32 bit entities. What
happens to the &quot;missing&quot; bit?</p>
<p>Write this to <code>int.ml</code>:</p>
<pre><code class="language-ocaml">print_int 3
</code></pre>
<p>and compile with <code>ocamlopt -S int.ml -o int</code> to generate assembly
language in <code>int.s</code>. Recall from the discussion above that we are
expecting OCaml to inline the <code>print_int</code> function as
<code>output_string (string_of_int 3)</code>, and examining the assembly language
output we can see that this is exactly what OCaml does:</p>
<pre><code class="language-assembly">        .text
        .globl  Int__entry
Int__entry:

        ; Call Pervasives.string_of_int (3)

        movl    $7, %eax
        call    Pervasives__string_of_int_152

        ; Call Pervasives.output_string (stdout, result_of_previous)

        movl    %eax, %ebx
        movl    Pervasives + 92, %eax
        call    Pervasives__output_string_212
</code></pre>
<p>The important code is shown in red. It shows two things: Firstly the
integer is unboxed (not allocated on the heap), but is instead passed
directly to the function in the register <code>%eax</code>. This is fast. But
secondly we see that the number being passed is 7, not 3.</p>
<p>This is a consequence of the representation of integers in OCaml. The
bottom bit of the integer is used as a tag - we'll see what for next.
The top 31 bits are the actual integer. The binary representation of 7
is 111, so the bottom tag bit is 1 and the top 31 bits form the number
11 in binary = 3. To get from the OCaml representation to the integer,
divide by two and round down.</p>
<p>Why the tag bit at all? This bit is used to distinguish between integers
and pointers to structures on the heap, and the distinction is only
necessary if we are calling a polymorphic function. In the case above,
where we are calling <code>string_of_int</code>, the argument can only ever be an
<code>int</code> and so the tag bit would never be consulted. Nevertheless, to
avoid having two internal representations for integers, all integers in
OCaml carry around the tag bit.</p>
<p>A bit of background about pointers is required to understand why the tag
bit is really necessary, and why it is where it is.</p>
<p>In the world of RISC chips like the Sparc, MIPS and Alpha, pointers have
to be word-aligned. So on the older 32 bit Sparc, for example, it's not
possible to create and use a pointer which isn't aligned to a multiple
of 4 (bytes). Trying to use one generates a processor exception, which
means basically your program segfaults. The reason for this is just to
simplify memory access. It's just a lot simpler to design the memory
subsystem of a CPU if you only need to worry about word-aligned access.</p>
<p>For historical reasons (because the x86 is derived from an 8 bit chip),
the x86 has supported unaligned memory access, although if you align all
memory accesses to multiples of 4, then things go faster.</p>
<p>Nevertheless, all pointers in OCaml are aligned - ie. multiples of 4 for
32 bit processors, and multiples of 8 for 64 bit processors. This means
that the bottom bit of any pointer in OCaml will always be zero.</p>
<p>So you can see that by looking at the bottom bit of a register, you can
immediately tell if it stores a pointer (&quot;tag&quot; bit is zero), or an
integer (tag bit set to one).</p>
<p>Remember our polymorphic &gt; function which caused us so much trouble in
the previous section? We looked at the assembler and found out that
OCaml compiles a call to a C function called <code>greaterthan</code> whenever it
sees the polymorphic form of &gt;. This function takes two arguments, in
registers <code>%eax</code> and <code>%ebx</code>. But <code>greaterthan</code> can be called with
integers, floats, strings, opaque objects ... How does it know what
<code>%eax</code> and <code>%ebx</code> point to?</p>
<p>It uses the following decision tree:</p>
<ul>
<li><strong>Tag bit is one:</strong> compare the two integers and return.
</li>
<li><strong>Tag bit is zero:</strong> <code>%eax</code> and <code>%ebx</code> must point at two
heap-allocated memory blocks. Look at the header word of the memory
blocks, specifically the bottom 8 bits of the header word, which tag
the content of the block.
<ul>
<li><strong>String_tag:</strong> Compare two strings.
</li>
<li><strong>Double_tag:</strong> Compare two floats.
</li>
<li>etc.
</li>
</ul>
</li>
</ul>
<p>Note that because &gt; has type <code>'a -&gt; 'a -&gt; bool</code>, both arguments must
have the same type. The compiler should enforce this at compile time. I
would assume that <code>greaterthan</code> probably contains code to sanity-check
this at run time however.</p>
<h3 id="floats">Floats</h3>
<p>Floats are, by default, boxed (allocated on the heap). Save this as
<code>float.ml</code> and compile it with <code>ocamlopt -S float.ml -o float</code>:</p>
<pre><code class="language-ocamltop">print_float 3.0
</code></pre>
<p>The number is not passed directly to <code>string_of_float</code> in the <code>%eax</code>
register as happened above with ints. Instead, it is created statically
in the data segment:</p>
<pre><code class="language-assembly">        .data
        .long   2301
        .globl  Float__1
Float__1:
        .double 3.0
</code></pre>
<p>and a pointer to the float is passed in <code>%eax</code> instead:</p>
<pre><code class="language-assembly">        movl    $Float__1, %eax
        call    Pervasives__string_of_float_157
</code></pre>
<p>Note the structure of the floating point number: it has a header (2301),
followed by the 8 byte (2 word) representation of the number itself. The
header can be decoded by writing it as binary:</p>
<pre><code>Length of the object in words:  0000 0000 0000 0000 0000 10 (8 bytes)
Color:                          00
Tag:                            1111 1101 (Double_tag)
</code></pre>
<p><code>string_of_float</code> isn't polymorphic, but suppose we have a polymorphic
function <code>foo : 'a -&gt; unit</code> taking one polymorphic argument. If we call
<code>foo</code> with <code>%eax</code> containing 7, then this is equivalent to <code>foo 3</code>,
whereas if we call <code>foo</code> with <code>%eax</code> containing a pointer to <code>Float__1</code>
above, then this is equivalent to <code>foo 3.0</code>.</p>
<h3 id="arrays">Arrays</h3>
<p>I mentioned earlier that one of OCaml's targets was numerical computing.
Numerical computing does a lot of work on vectors and matrices, which
are essentially arrays of floats. As a special hack to make this go
faster, OCaml implements <strong>arrays of unboxed floats</strong>. This
means that in the special case where we have an object of type
<code>float array</code> (array of floats), OCaml stores them the same way as in C:</p>
<pre><code class="language-C">double array[10];
</code></pre>
<p>... instead of having an array of pointers to ten separately allocated
floats on the heap.</p>
<p>Let's see this in practice:</p>
<pre><code class="language-ocaml">let a = Array.create 10 0.0;;
for i = 0 to 9 do
  a.(i) &lt;- float_of_int i
done
</code></pre>
<p>I'm going to compile this code with the <code>-unsafe</code> option to remove
bounds checking (simplifying the code for our exposition here). The
first line, which creates the array, is compiled to a simple C call:</p>
<pre><code class="language-assembly">        pushl   $Arrayfloats__1     ; Boxed float 0.0
        pushl   $21                 ; The integer 10
        movl    $make_vect, %eax    ; Address of the C function to call
        call    caml_c_call
    ; ...
        movl    %eax, Arrayfloats   ; Store the resulting pointer to the
                                    ; array at this place on the heap.
</code></pre>
<p>The loop is compiled to this relatively simple assembly language:</p>
<pre><code class="language-assembly">        movl    $1, %eax            ; Let %eax = 0. %eax is going to store i.
        cmpl    $19, %eax           ; If %eax &gt; 9, then jump out of the
        jg      .L100               ;   loop (to label .L100 at the end).

.L101:                              ; This is the start of the loop body.
        movl    Arrayfloats, %ecx   ; Address of the array to %ecx.

        movl    %eax, %ebx          ; Copy i to %ebx.
        sarl    $1, %ebx            ; Remove the tag bit from %ebx by
                                    ;   shifting it right 1 place. So %ebx
                                    ;   now contains the real integer i.

        pushl   %ebx                ; Convert %ebx to a float.
        fildl   (%esp)
        addl    $4, %esp

        fstpl   -4(%ecx, %eax, 4)   ; Store the float in the array at the ith
                                ; position.

        addl    $2, %eax            ; i := i + 1
        cmpl    $19, %eax           ; If i &lt;= 9, loop around again.
        jle     .L101
.L100:
</code></pre>
<p>The important statement is the one which stores the float into the
array. It is:</p>
<pre><code class="language-assembly">        fstpl   -4(%ecx, %eax, 4)
</code></pre>
<p>The assembler syntax is rather complex, but the bracketed expression
<code>-4(%ecx, %eax, 4)</code> means &quot;at the address <code>%ecx + 4*%eax - 4</code>&quot;. Recall
that <code>%eax</code> is the OCaml representation of i, complete with tag bit, so
it is essentially equal to <code>i*2+1</code>, so let's substitute that and
multiply it out:</p>
<pre><code class="language-assembly">  %ecx + 4*%eax - 4
= %ecx + 4*(i*2+1) - 4
= %ecx + 4*i*2 + 4 - 4
= %ecx + 8*i
</code></pre>
<p>(Each float in the array is 8 bytes long.)</p>
<p>So arrays of floats are unboxed, as expected.</p>
<h3 id="partially-applied-functions-and-closures">Partially applied functions and closures</h3>
<p>How does OCaml compile functions which are only partially applied? Let's
compile this code:</p>
<pre><code class="language-ocaml">Array.map ((+) 2) [|1; 2; 3; 4; 5|]
</code></pre>
<p>If you recall the syntax, <code>[| ... |]</code> declares an array (in this case an
<code>int array</code>), and <code>((+) 2)</code> is a closure - &quot;the function which adds 2 to
things&quot;.</p>
<p>Compiling this code reveals some interesting new features. Firstly the
code which allocates the array:</p>
<pre><code class="language-assembly">        movl    $24, %eax           ; Allocate 5 * 4 + 4 = 24 bytes of memory.
        call    caml_alloc

        leal    4(%eax), %eax       ; Let %eax point to 4 bytes into the
                                    ;   allocated memory.
</code></pre>
<p>All heap allocations have the same format: 4 byte header + data. In this
case the data is 5 integers, so we allocate 4 bytes for the header plus
5 * 4 bytes for the data. We update the pointer to point at the first
data word, ie. 4 bytes into the allocated memory block.</p>
<p>Next OCaml generates code to initialize the array:</p>
<pre><code class="language-assembly">        movl    $5120, -4(%eax)
        movl    $3, (%eax)
        movl    $5, 4(%eax)
        movl    $7, 8(%eax)
        movl    $9, 12(%eax)
        movl    $11, 16(%eax)
</code></pre>
<p>The header word is 5120, which if you write it in binary means a block
containing 5 words, with tag zero. The tag of zero means it's a
&quot;structured block&quot; a.k.a. an array. We also copy the numbers 1, 2, 3, 4
and 5 to the appropriate places in the array. Notice the OCaml
representation of integers is used. Because this is a structured block,
the garbage collector will scan each word in this block, and the GC
needs to be able to distinguish between integers and pointers to other
heap-allocated blocks (the GC does not have access to type information
about this array).</p>
<p>Next the closure <code>((+) 2)</code> is created. The closure is represented by
this block allocated in the data segment:</p>
<pre><code class="language-assembly">        .data
        .long   3319
        .globl  Closure__1
Closure__1:
        .long   caml_curry2
        .long   5
        .long   Closure__fun_58
</code></pre>
<p>The header is 3319, indicating a <code>Closure_tag</code> with length 3 words. The
3 words in the block are the address of the function <code>caml_curry2</code>, the
integer number 2 and the address of this function:</p>
<pre><code class="language-assembly">        .text
        .globl  Closure__fun_58
Closure__fun_58:

        ; The function takes two arguments, %eax and %ebx.
        ; This line causes the function to return %eax + %ebx - 1.

        lea     -1(%eax, %ebx), %eax
        ret
</code></pre>
<p>What does this function do? On the face of it, it adds the two
arguments, and subtracts one. But remember that <code>%eax</code> and <code>%ebx</code> are in
the OCaml representation for integers. Let's represent them as:</p>
<ul>
<li><code>%eax = 2 * a + 1</code>
</li>
<li><code>%ebx = 2 * b + 1</code>
</li>
</ul>
<p>where <code>a</code> and <code>b</code> are the actual integer arguments. So this function
returns:</p>
<pre><code>%eax + %ebx - 1
= 2 * a + 1 + 2 * b + 1 - 1
= 2 * a + 2 * b + 1
= 2 * (a + b) + 1
</code></pre>
<p>In other words, this function returns the OCaml integer representation
of the sum <code>a + b</code>. This function is <code>(+)</code>!</p>
<p>(It's actually more subtle than this - to perform the mathematics
quickly, OCaml uses the x86 addressing hardware in a way that probably
wasn't intended by the designers of the x86.)</p>
<p>So back to our closure - we won't go into the details of the
<code>caml_curry2</code> function, but just say that this closure is the argument
<code>2</code> applied to the function <code>(+)</code>, waiting for a second argument. Just
as expected.</p>
<p>The actual call to the <code>Array.map</code> function is quite difficult to
understand, but the main points for our examination of OCaml is that the
code:</p>
<ul>
<li>Does call <code>Array.map</code> with an explicit closure.
</li>
<li>Does not attempt to inline the call and turn it into a loop.
</li>
</ul>
<p>Calling <code>Array.map</code> in this way is undoubtedly slower than writing a
loop over the array by hand. The overhead is mainly in the fact that the
closure must be evaluated for each element of the array, and that isn't
as fast as inlining the closure as a function (if this optimization were
even possible). However, if you had a more substantial closure than just
<code>((+) 2)</code>, the overhead would be reduced. The FP version also saves
expensive <em>programmer</em> time versus writing the imperative loop.</p>
<h2 id="profiling">Profiling</h2>
<p>There are two types of profiling that you can do on OCaml programs:</p>
<ol>
<li>Get execution counts for bytecode.
</li>
<li>Get real profiling for native code.
</li>
</ol>
<p>The <code>ocamlcp</code> and <code>ocamlprof</code> programs perform profiling on bytecode.
Here is an example:</p>
<!-- $MDX file=examples/gc.ml -->
<pre><code class="language-ocaml">let rec iterate r x_init i =
  if i = 1 then x_init
  else
    let x = iterate r x_init (i - 1) in
    r *. x *. (1.0 -. x)

let () =
  Random.self_init ();
  Graphics.open_graph &quot; 640x480&quot;;
  for x = 0 to 640 do
    let r = 4.0 *. float_of_int x /. 640.0 in
    for i = 0 to 39 do
      let x_init = Random.float 1.0 in
      let x_final = iterate r x_init 500 in
      let y = int_of_float (x_final *. 480.) in
      Graphics.plot x y
    done
  done;
  Gc.print_stat stdout
</code></pre>
<p>And can be run and compiled with</p>
<!-- $MDX skip -->
<pre><code>$ ocamlcp -p a graphics.cma graphtest.ml -o graphtest
$ ./graphtest
$ ocamlprof graphtest.ml
</code></pre>
<p>The comments <code>(* nnn *)</code> are added by <code>ocamlprof</code>, showing how many
times each part of the code was called.</p>
<p>Profiling native code is done using your operating system's native
support for profiling. In the case of Linux, we use <code>gprof</code>. An alternative
is <a href="https://en.wikipedia.org/wiki/Perf_(Linux)">perf</a>, as explained below.</p>
<p>We compile it using the <code>-p</code> option to <code>ocamlopt</code> which tells the
compiler to include profiling information for <code>gprof</code>:</p>
<p>After running the program as normal, the profiling code dumps out a file
<code>gmon.out</code> which we can interpret with <code>gprof</code>:</p>
<pre><code>$ gprof ./a.out
Flat profile:
  
Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total
 time   seconds   seconds    calls   s/call   s/call  name
 10.86      0.57     0.57     2109     0.00     0.00  sweep_slice
  9.71      1.08     0.51     1113     0.00     0.00  mark_slice
  7.24      1.46     0.38  4569034     0.00     0.00  Sieve__code_begin
  6.86      1.82     0.36  9171515     0.00     0.00  Stream__set_data_140
  6.57      2.17     0.34 12741964     0.00     0.00  fl_merge_block
  6.29      2.50     0.33  4575034     0.00     0.00  Stream__peek_154
  5.81      2.80     0.30 12561656     0.00     0.00  alloc_shr
  5.71      3.10     0.30     3222     0.00     0.00  oldify_mopup
  4.57      3.34     0.24 12561656     0.00     0.00  allocate_block
  4.57      3.58     0.24  9171515     0.00     0.00  modify
  4.38      3.81     0.23  8387342     0.00     0.00  oldify_one
  3.81      4.01     0.20 12561658     0.00     0.00  fl_allocate
  3.81      4.21     0.20  4569034     0.00     0.00  Sieve__filter_56
  3.62      4.40     0.19     6444     0.00     0.00  empty_minor_heap
  3.24      4.57     0.17     3222     0.00     0.00  oldify_local_roots
  2.29      4.69     0.12  4599482     0.00     0.00  Stream__slazy_221
  2.10      4.80     0.11  4597215     0.00     0.00  darken
  1.90      4.90     0.10  4596481     0.00     0.00  Stream__fun_345
  1.52      4.98     0.08  4575034     0.00     0.00  Stream__icons_207
  1.52      5.06     0.08  4575034     0.00     0.00  Stream__junk_165
  1.14      5.12     0.06     1112     0.00     0.00  do_local_roots
  
[ etc. ]
</code></pre>
<h3 id="using-perf-on-linux">Using perf on Linux</h3>
<p>Assuming perf is installed and your program is compiled into
native code with <code>-g</code> (or ocamlbuild tag <code>debug</code>), you just need to type</p>
<!-- $MDX skip -->
<pre><code class="language-sh">perf record --call-graph=dwarf -- ./foo.native a b c d
perf report
</code></pre>
<p>The first command launches <code>foo.native</code> with arguments <code>a b c d</code> and
records profiling information in <code>perf.data</code>; the second command
starts an interactive program to explore the call graph. The option
<code>--call-graph=dwarf</code> makes perf aware of the calling convention of
OCaml (with old versions of <code>perf</code>, enabling frame pointers in OCaml
might help; opam provides suitable compiler switches, such as <code>4.02.1+fp</code>).</p>
<h2 id="summary">Summary</h2>
<p>In summary here are some tips for getting the best performance out of
your programs:</p>
<ol>
<li>Write your program as simply as possible. If it takes too long to
run, profile it to find out where it's spending its time and
concentrate optimizations on just those areas.
</li>
<li>Check for unintentional polymorphism, and add type hints for the
compiler.
</li>
<li>Closures are slower than simple function calls, but add to
maintainability and readability.
</li>
<li>As a last resort, rewrite hotspots in your program in C (but first
check the assembly language produced by the OCaml compiler to see if
you can do better than it).
</li>
<li>Performance might depend on external factors (speed of your database
queries? speed of the network?). If so then no amount of
optimization will help you.
</li>
</ol>
<h3 id="further-reading">Further reading</h3>
<p>You can find out more about how OCaml represents different types by
reading the (&quot;Interfacing C with OCaml&quot;) chapter in the OCaml manual and also
looking at the <code>mlvalues.h</code> header file.</p>
<!--###  Java dynamic dispatch
**There are some serious mistakes in the last paragraph:**

* Dynamic method dispatch itself is seldom a performance problem. In
 languages without multiple inheritance (e.g. Java) this is usually
 done via one step of pointer indirection. Objects in OCaml are also
 dynamically dispatched. Since this is the point with polymorphism in
 an OO setting.

* Dynamic method dispatch often hinders a compiler to inline function
 and this hits the performance.

* In Java is a dynamic type check (aka cast) much more expensive than
 a dynamic method dispatch. -->
</div></div></div></div></div></main><div class="relative"><footer aria-labelledby="footerHeading" class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:py-16 lg:px-8"><h2 class="sr-only" id="footerHeading">Footer</h2><div class="xl:grid xl:grid-cols-3 xl:gap-8"><div class="space-y-8 xl:col-span-1"><img class="h-10" alt="OCaml" src="/static/ocaml-logo.jpeg"/><p class="text-gray-500 text-base ">Innovation. Community. Security.</p><div class="flex space-x-6"><a aria-label="Discourse" class="text-gray-400 hover:text-gray-500" href="https://discuss.ocaml.org" target="_blank"><img aria-hidden="true" class="h-6 w-6" alt="" src="/static/discourselogo.png"/></a><a aria-label="GitHub" class="text-gray-400 hover:text-gray-500" href="https://sourcegraph.com/search?q=repo:ocaml/ocaml%24+or+repo:janestreet/base+or+repo:gitlab.com/tezos/tezos%24+or+repo:c-cube/ocaml-containers+or+repo:ocaml-batteries-team/batteries-included+or+repo:mirage/mirage%24+or+repo:ocsigen/lwt+or+repo:janestreet/async%24&amp;patternType=literal" target="_blank"><svg aria-hidden="true" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path clip-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" fill-rule="evenodd"></path></svg></a><a aria-label="Twitter" class="text-gray-400 hover:text-gray-500" href="https://fosstodon.org/tags/ocaml" target="_blank"><svg aria-hidden="true" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"></path></svg></a></div></div><div class="grid grid-cols-2 gap-8 mt-12 xl:mt-0 xl:col-span-2"><div class="md:grid md:grid-cols-2 md:gap-8"><div class=""><h3 class="text-sm font-semibold text-gray-400 tracking-wider uppercase">Principles</h3><ul class="mt-4 space-y-4"><li><a class="text-base text-gray-500 hover:text-gray-900" href="/en/principles/whatisocaml/">Why OCaml</a></li><li><a class="text-base text-gray-500 hover:text-gray-900" href="/en/principles/users/">Industrial Users</a></li><li><a class="text-base text-gray-500 hover:text-gray-900" href="/en/principles/academic/">Academic Excellence</a></li><li><a class="text-base text-gray-500 hover:text-gray-900" href="/en/principles/successes/">Success Stories</a></li></ul></div><div class="mt-12 md:mt-0"><h3 class="text-sm font-semibold text-gray-400 tracking-wider uppercase">Resources</h3><ul class="mt-4 space-y-4"><li><a class="text-base text-gray-500 hover:text-gray-900" href="/en/resources/language/">Language</a></li><li><a class="text-base text-gray-500 hover:text-gray-900" href="/packages/">Packages</a></li><li><a class="text-base text-gray-500 hover:text-gray-900" href="/en/resources/applications/">Applications</a></li><li><a class="text-base text-gray-500 hover:text-gray-900" href="/en/resources/bestpractices/">Best Practices</a></li></ul></div></div><div class="md:grid md:grid-cols-2 md:gap-8"><div class=""><h3 class="text-sm font-semibold text-gray-400 tracking-wider uppercase">Community</h3><ul class="mt-4 space-y-4"><li><a class="text-base text-gray-500 hover:text-gray-900" href="/en/community/opportunities/">Opportunities</a></li><li><a class="text-base text-gray-500 hover:text-gray-900" href="/en/community/blog/">News</a></li><li><a class="text-base text-gray-500 hover:text-gray-900" href="/en/community/aroundweb/">Around the Web</a></li><li><a class="text-base text-gray-500 hover:text-gray-900" href="/en/resources/archive/">Archive</a></li></ul></div><div class="mt-12 md:mt-0"><h3 class="text-sm font-semibold text-gray-400 tracking-wider uppercase">Legal</h3><ul class="mt-4 space-y-4"><li><a class="text-base text-gray-500 hover:text-gray-900" href="/en/legal/privacy/">Privacy</a></li><li><a class="text-base text-gray-500 hover:text-gray-900" href="/en/legal/terms/">Terms</a></li><li><a class="text-base text-gray-500 hover:text-gray-900" href="/en/legal/carbonfootprint/">Carbon Footprint</a></li></ul></div></div></div></div><p class="text-gray-500 text-base mt-10">Thank you to our <a class="text-orangedark underline" href="/en/legal/carbonfootprint/#hostingproviders">Hosting Providers</a></p></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"content":{"source":"\u003ch2 id=\"speed\"\u003eSpeed\u003c/h2\u003e\n\u003cp\u003eWhy is OCaml fast? Indeed, step back and ask \u003cem\u003eis OCaml fast?\u003c/em\u003e How can we\nmake programs faster? In this chapter we'll look at what actually\nhappens when you compile your OCaml programs down to machine code. This\nwill help in understanding why OCaml is not just a great language for\nprogramming, but is also a very fast language indeed. And it'll help you\nto help the compiler write better machine code for you. It's also (I\nbelieve anyway) a good thing for programmers to have some idea of what\nhappens between you typing \u003ccode\u003eocamlopt\u003c/code\u003e and getting a binary you can run.\u003c/p\u003e\n\u003cp\u003eBut you will need to know some assembler to get the most out of this\nsection. Don't be afraid! I'll help you out by translating the assembler\ninto a C-like pseudocode (after all C is just a portable assembly\nlanguage).\u003c/p\u003e\n\u003ch3 id=\"basics-of-assembly-language\"\u003eBasics of assembly language\u003c/h3\u003e\n\u003cp\u003eThe examples I give in this chapter are all compiled on an x86 Linux\nmachine. The x86 is, of course, a 32 bit machine, so an x86 \u0026quot;word\u0026quot; is 4\nbytes (= 32 bits) long. At this level OCaml deals mostly with word-sized\nobjects, so you'll need to remember to multiply by four to get the size\nin bytes.\u003c/p\u003e\n\u003cp\u003eTo refresh your memory, the x86 has only a small number of general\npurpose registers, each of which can store one word. The Linux assembler\nputs \u003ccode\u003e%\u003c/code\u003e in front of register names. The registers are: \u003ccode\u003e%eax\u003c/code\u003e, \u003ccode\u003e%ebx\u003c/code\u003e,\n\u003ccode\u003e%ecx\u003c/code\u003e, \u003ccode\u003e%edx\u003c/code\u003e, \u003ccode\u003e%esi\u003c/code\u003e, \u003ccode\u003e%edi\u003c/code\u003e, \u003ccode\u003e%ebp\u003c/code\u003e (special register used for stack\nframes), and \u003ccode\u003e%esp\u003c/code\u003e (the stack pointer).\u003c/p\u003e\n\u003cp\u003eThe Linux assembler (in common with other Unix assemblers, but opposite\nto MS-derived assemblers) writes moves to and from registers/memory as:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-assembly\"\u003emovl from, to\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSo \u003ccode\u003emovl %ebx, %eax\u003c/code\u003e means \u0026quot;copy the contents of register \u003ccode\u003e%ebx\u003c/code\u003e into\nregister \u003ccode\u003e%eax\u003c/code\u003e\u0026quot; (not the other way round).\u003c/p\u003e\n\u003cp\u003eAlmost all of the assembly language that we will look at is going to be\ndominated not by machine code instructions like \u003ccode\u003emovl\u003c/code\u003e but by what are\nknown as \u003cstrong\u003eassembler directives\u003c/strong\u003e. These directives begin\nwith a . (period) and they literally \u003cem\u003edirect\u003c/em\u003e the assembler to do\nsomething. Here are the common ones for the Linux assembler:\u003c/p\u003e\n\u003ch4 id=\"text\"\u003e.text\u003c/h4\u003e\n\u003cp\u003e\u003cstrong\u003eText\u003c/strong\u003e is the Unix way of saying \u0026quot;program code\u0026quot;. The \u003cstrong\u003etext segment\u003c/strong\u003e\nsimply means the part of the executable where program code is stored.\nThe \u003ccode\u003e.text\u003c/code\u003e directive switches the assembler so it starts writing into\nthe text segment.\u003c/p\u003e\n\u003ch4 id=\"data\"\u003e.data\u003c/h4\u003e\n\u003cp\u003eSimilarly, the \u003ccode\u003e.data\u003c/code\u003e directive switches the assembler so it starts\nwriting into the data segment (part) of the executable.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-assembly\"\u003e  .globl foo\nfoo:\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis declares a global symbol called \u003ccode\u003efoo\u003c/code\u003e. It means the address of the\nnext thing to come can be named \u003ccode\u003efoo\u003c/code\u003e. Writing just \u003ccode\u003efoo:\u003c/code\u003e without the\npreceding \u003ccode\u003e.globl\u003c/code\u003e directive declares a local symbol (local to just the\ncurrent file).\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-assembly\"\u003e.long 12345\n.byte 9\n.ascii \u0026quot;hello\u0026quot;\n.space 4\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003e.long\u003c/code\u003e writes a word (4 bytes) to the current segment. \u003ccode\u003e.byte\u003c/code\u003e writes a\nsingle byte. \u003ccode\u003e.ascii\u003c/code\u003e writes a string of bytes (NOT nul-terminated).\n\u003ccode\u003e.space\u003c/code\u003e writes the given number of zero bytes. Normally you use these\nin the data segment.\u003c/p\u003e\n\u003ch3 id=\"the-hello-world-program\"\u003eThe \u0026quot;hello, world\u0026quot; program\u003c/h3\u003e\n\u003cp\u003eEnough assembler. Put the following program into a file called\n\u003ccode\u003esmallest.ml\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-ocaml\"\u003eprint_string \u0026quot;hello, world\\n\u0026quot;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd compile it to a native code executable using:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-shell\"\u003eocamlopt -S smallest.ml -o smallest\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe \u003ccode\u003e-S\u003c/code\u003e (capital S) tells the compiler to leave the assembly language\nfile (called \u003ccode\u003esmallest.s\u003c/code\u003e - lowercase s) instead of deleting it.\u003c/p\u003e\n\u003cp\u003eHere are the edited highlights of the \u003ccode\u003esmallest.s\u003c/code\u003e file with my comments\nadded. First of all the data segment:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-assembly\"\u003e    .data\n    .long   4348                     ; header for string\n    .globl  Smallest__1\nlest__1:\n    .ascii  \u0026quot;hello, world\\12\u0026quot;        ; string\n    .space  2                        ; padding ..\n    .byte   2                        ;  .. after string\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNext up the text (program code) segment:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-assembly\"\u003e    .text\n    .globl  Smallest__entry          ; entry point to the program\nlest__entry:\n\n    ; this is equivalent to the C pseudo-code:\n    ; Pervasives.output_string (stdout, \u0026amp;Smallest__1)\n\n    movl    $Smallest__1, %ebx\n    movl    Pervasives + 92, %eax    ; Pervasives + 92 == stdout\n    call    Pervasives__output_string_212\n\n    ; return 1\n\n    movl    $1, %eax\n    ret\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn C everything has to be inside a function. Think about how you can't\njust write \u003ccode\u003eprintf (\u0026quot;hello, world\\n\u0026quot;);\u003c/code\u003e in C, but instead you have to\nput it inside \u003ccode\u003emain () { ... }\u003c/code\u003e. In OCaml you are allowed to have\ncommands at the top level, not inside a function. But when we translate\nthis into assembly language, where do we put those commands? There needs\nto be some way to call those commands from outside, so they need to be\nlabelled in some way. As you can see from the code snippet, OCaml solves\nthis by taking the filename (\u003ccode\u003esmallest.ml\u003c/code\u003e), capitalizing it and adding\n\u003ccode\u003e__entry\u003c/code\u003e, thus making up a symbol called \u003ccode\u003eSmallest__entry\u003c/code\u003e to refer to\nthe top level commands in this file.\u003c/p\u003e\n\u003cp\u003eNow look at the code that OCaml has generated. The original code said\n\u003ccode\u003eprint_string \u0026quot;hello, world\\n\u0026quot;\u003c/code\u003e, but OCaml has instead compiled the\nequivalent of \u003ccode\u003ePervasives.output_string stdout \u0026quot;hello, world\\n\u0026quot;\u003c/code\u003e. Why?\nIf you look into \u003ccode\u003epervasives.ml\u003c/code\u003e you'll see why:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-ocaml\"\u003elet print_string s = output_string stdout s\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOCaml has \u003cem\u003einlined\u003c/em\u003e this function. \u003cstrong\u003eInlining\u003c/strong\u003e - taking a function and\nexpanding it from its definition - is sometimes a performance win,\nbecause it avoids the overhead of an extra function call, and it can\nlead to more opportunities for the optimizer to do its thing. Sometimes\ninlining is not good, because it can lead to code bloating, and thus\ndestroys the good work done by the processor cache (and besides function\ncalls are actually not very expensive at all on modern processors).\nOCaml will inline simple calls like this, because they are essentially\nrisk free, almost always leading to a small performance gain.\u003c/p\u003e\n\u003cp\u003eWhat else can we notice about this? The calling convention seems to be\nthat the first two arguments are passed in the \u003ccode\u003e%eax\u003c/code\u003e and \u003ccode\u003e%ebx\u003c/code\u003e\nregisters respectively. Other arguments are probably passed on the\nstack, but we'll see about that later.\u003c/p\u003e\n\u003cp\u003eC programs have a simple convention for storing strings, known as\n\u003cstrong\u003eASCIIZ\u003c/strong\u003e. This just means that the string is stored in ASCII, followed\nby a trailing NUL (\u003ccode\u003e\\0\u003c/code\u003e) character. OCaml stores strings in a different\nway, as we can see from the data segment above. This string is stored\nlike this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e4 byte header: 4348\nthe string:    h e l l o , SP w o r l d \\n\npadding:       \\0 \\0 \\002\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eFirstly the padding brings the total length of the string up to a whole\nnumber of words (4 words, 16 bytes in this example). The padding is\ncarefully designed so that you can work out the actual length of the\nstring in bytes, provided that you know the total number of \u003cem\u003ewords\u003c/em\u003e\nallocated to the string. The encoding for this is unambiguous (which you\ncan prove to yourself).\u003c/p\u003e\n\u003cp\u003eOne nice feature of having strings with an explicit length is that you\ncan represent strings containing ASCII NUL (\u003ccode\u003e\\0\u003c/code\u003e) characters in them,\nsomething which is difficult to do in C. However, the flip side is that\nyou need to be aware of this if you pass an OCaml string to some C\nnative code: if it contains ASCII NUL, then the C \u003ccode\u003estr*\u003c/code\u003e functions will\nfail on it.\u003c/p\u003e\n\u003cp\u003eSecondly we have the header. Every boxed (allocated) object in OCaml has\na header which tells the garbage collector about how large the object is\nin words, and something about what the object contains. Writing the\nnumber 4348 in binary:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003elength of the object in words:  0000 0000 0000 0000 0001 00 (4 words)\ncolor (used by GC):             00\ntag:                            1111 1100 (String_tag)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSee \u003ccode\u003e/usr/include/caml/mlvalues.h\u003c/code\u003e for more information about\nthe format of heap allocated objects in OCaml.\u003c/p\u003e\n\u003cp\u003eOne unusual thing is that the code passes a pointer to the start of the\nstring (ie. the word immediately after the header) to\n\u003ccode\u003ePervasives.output_string\u003c/code\u003e. This means that \u003ccode\u003eoutput_string\u003c/code\u003e must\nsubtract 4 from the pointer to get at the header to determine the length\nof the string.\u003c/p\u003e\n\u003cp\u003eWhat have I missed out from this simple example? Well, the text segment\nabove is not the whole story. It would be really nice if OCaml\ntranslated that simple hello world program into just the five lines of\nassembler shown above. But there is the question of what actually calls\n\u003ccode\u003eSmallest__entry\u003c/code\u003e in the real program. For this OCaml includes a whole\nload of bootstrapping code which does things like starting up the\ngarbage collector, allocating and initializing memory, calling\ninitializers in libraries and so on. OCaml links all of this code\nstatically to the final executable, which is why the program I end up\nwith (on Linux) weighs in at a portly 95,442 bytes. Nevertheless the\nstart-up time for the program is still unmeasurably small (under a\nmillisecond), compared to several seconds for starting up a reasonable\nJava program and a second or so for a Perl script.\u003c/p\u003e\n\u003ch3 id=\"tail-recursion\"\u003eTail recursion\u003c/h3\u003e\n\u003cp\u003eWe mentioned in chapter 6 that OCaml can turn tail-recursive function\ncalls into simple loops. Is this actually true? Let's look at what\nsimple tail recursion compiles to:\u003c/p\u003e\n\u003c!-- do not execute this code!! --\u003e\n\u003c!-- $MDX skip --\u003e\n\u003cpre\u003e\u003ccode class=\"language-ocaml\"\u003elet rec loop () =\n  print_string \u0026quot;I go on forever ...\u0026quot;;\n  loop ()\n  \nlet () = loop ()\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe file is called \u003ccode\u003etail.ml\u003c/code\u003e, so following OCaml's usual procedure for\nnaming functions, our function will be called \u003ccode\u003eTail__loop_nnn\u003c/code\u003e (where\n\u003ccode\u003ennn\u003c/code\u003e is some unique number which OCaml appends to distinguish\nidentically named functions from one another).\u003c/p\u003e\n\u003cp\u003eHere is the assembler for just the \u003ccode\u003eloop\u003c/code\u003e function defined above:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-assembly\"\u003e        .text\n        .globl  Tail__loop_56\nTail__loop_56:\n.L100:\n        ; Print the string\n        movl    $Tail__2, %ebx\n        movl    Pervasives + 92, %eax\n        call    Pervasives__output_string_212\n.L101:\n        ; The following movl is in fact obsolete:\n        movl    $1, %eax\n        ; Jump back to the .L100 label above (ie. loop forever)\n        jmp     .L100\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSo that's pretty conclusive. Calling \u003ccode\u003eTail__loop_56\u003c/code\u003e will first print\nthe string, and then jump back to the top, then print the string, and\njump back, and so on forever. It's a simple loop, \u003cem\u003enot\u003c/em\u003e a recursive\nfunction call, so it doesn't use any stack space.\u003c/p\u003e\n\u003ch3 id=\"digression-where-are-the-types\"\u003eDigression: Where are the types?\u003c/h3\u003e\n\u003cp\u003eOCaml is statically typed as we've said before on many occasions, so at\ncompile time, OCaml knows that the type of \u003ccode\u003eloop\u003c/code\u003e is \u003ccode\u003eunit -\u0026gt; unit\u003c/code\u003e. It\nknows that the type of \u003ccode\u003e\u0026quot;hello, world\\n\u0026quot;\u003c/code\u003e is \u003ccode\u003estring\u003c/code\u003e. It doesn't make\nany attempt to communicate this fact to the \u003ccode\u003eoutput_string\u003c/code\u003e function.\n\u003ccode\u003eoutput_string\u003c/code\u003e is expecting a \u003ccode\u003echannel\u003c/code\u003e and a \u003ccode\u003estring\u003c/code\u003e as arguments,\nand indeed that's what it gets. What would happen if we passed, say, an\n\u003ccode\u003eint\u003c/code\u003e instead of a \u003ccode\u003estring\u003c/code\u003e?\u003c/p\u003e\n\u003cp\u003eThis is essentially an impossible condition. Because OCaml knows the\ntypes at compile time, it doesn't need to deal with types or check types\nat run time. There is no way, in pure OCaml, to \u0026quot;trick\u0026quot; the compiler\ninto generating a call to \u003ccode\u003ePervasives.output_string stdout 1\u003c/code\u003e. Such an\nerror would be flagged at compile time, by type inference, and so could\nnever be compiled.\u003c/p\u003e\n\u003cp\u003eThe upshot is that by the time we have compiled OCaml code to assembler\ntype information mostly isn't required, certainly in the cases we've\nlooked at above where the type is fully known at compile time, and there\nis no polymorphism going on.\u003c/p\u003e\n\u003cp\u003eFully knowing all your types at compile time is a major performance win\nbecause it totally avoids any dynamic type checking at run time. Compare\nthis to a Java method invocation for example: \u003ccode\u003eobj.method ()\u003c/code\u003e. This is\nan expensive operation because you need to find the concrete class that\n\u003ccode\u003eobj\u003c/code\u003e is an instance of, and then look up the method, and you need to do\nall of this potentially \u003cem\u003eevery\u003c/em\u003e time you call any method. Casting\nobjects is another case where you need to do a considerable amount of\nwork at run time in Java. None of this is allowed with OCaml's static\ntypes.\u003c/p\u003e\n\u003ch3 id=\"polymorphic-types\"\u003ePolymorphic types\u003c/h3\u003e\n\u003cp\u003eAs you might have guessed from the discussion above, polymorphism, which\nis where the compiler \u003cem\u003edoesn't\u003c/em\u003e have a fully known type for a function\nat compile time, might have an impact on performance. Suppose we require\na function to work out the maximum of two integers. Our first attempt\nis:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-ocaml\"\u003e# let max a b =\n  if a \u0026gt; b then a else b\nval max : 'a -\u0026gt; 'a -\u0026gt; 'a = \u0026lt;fun\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSimple enough, but recall that the \u0026gt; (greater than) operator in OCaml\nis polymorphic. It has type \u003ccode\u003e'a -\u0026gt; 'a -\u0026gt; bool\u003c/code\u003e, and this means that the\n\u003ccode\u003emax\u003c/code\u003e function we defined above is going to be polymorphic:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-ocaml\"\u003e# let max a b =\n  if a \u0026gt; b then a else b\nval max : 'a -\u0026gt; 'a -\u0026gt; 'a = \u0026lt;fun\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis is indeed reflected in the code that OCaml generates for this\nfunction, which is pretty complex:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-assembly\"\u003e        .text\n        .globl  Max__max_56\nMax__max_56:\n\n        ; Reserve two words of stack space.\n\n        subl    $8, %esp\n\n        ; Save the first and second arguments (a and b) on the stack.\n\n        movl    %eax, 4(%esp)\n        movl    %ebx, 0(%esp)\n\n        ; Call the C \u0026quot;greaterthan\u0026quot; function (in the OCaml library).\n\n        pushl   %ebx\n        pushl   %eax\n        movl    $greaterthan, %eax\n        call    caml_c_call\n.L102:\n        addl    $8, %esp\n\n        ; If the C \u0026quot;greaterthan\u0026quot; function returned 1, jump to .L100\n\n        cmpl    $1, %eax\n        je      .L100\n\n        ; Returned 0, so get argument a which we previously saved on\n        ; the stack and return it.\n\n        movl    4(%esp), %eax\n        addl    $8, %esp\n        ret\n\n        ; Returned 1, so get argument b which we previously saved on\n        ; the stack and return it.\n\n.L100:\n        movl    0(%esp), %eax\n        addl    $8, %esp\n        ret\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eBasically the \u0026gt; operation is done by calling a C function from the\nOCaml library. This is obviously not going to be very efficient, nothing\nlike as efficient as if we could generate some quick inline assembly\nlanguage for doing the \u0026gt;.\u003c/p\u003e\n\u003cp\u003eThis is not a complete dead loss by any means. All we need to do is to\nhint to the OCaml compiler that the arguments are in fact integers. Then\nOCaml will generate a specialised version of \u003ccode\u003emax\u003c/code\u003e which only works on\n\u003ccode\u003eint\u003c/code\u003e arguments:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-ocaml\"\u003e# let max (a : int) (b : int) =\n  if a \u0026gt; b then a else b\nval max : int -\u0026gt; int -\u0026gt; int = \u0026lt;fun\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHere is the assembly code generated for this function:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-assembly\"\u003e        .text\n        .globl  Max_int__max_56\nMax_int__max_56:\n\n        ; Single assembly instruction \u0026quot;cmpl\u0026quot; for performing the \u0026gt; op.\n        cmpl    %ebx, %eax\n\n        ; If %ebx \u0026gt; %eax, jump to .L100\n        jle     .L100\n        ; Just return argument a.\n        ret\n        ; Return argument b.\n\n.L100:\n        movl    %ebx, %eax\n        ret\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThat's just 5 lines of assembler, and is about as simple as you can make\nit.\u003c/p\u003e\n\u003cp\u003eWhat about this code:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-ocaml\"\u003e# let max a b =\n  if a \u0026gt; b then a else b\nval max : 'a -\u0026gt; 'a -\u0026gt; 'a = \u0026lt;fun\u0026gt;\n# let () = print_int (max 2 3)\n3\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIs OCaml going to be smart enough to inline the \u003ccode\u003emax\u003c/code\u003e function and\nspecialise it to work on integers? Disappointingly the answer is no.\nOCaml still has to generate the external \u003ccode\u003eMax.max\u003c/code\u003e symbol (because this\nis a module, and so that function might be called from outside the\nmodule), and it doesn't inline the function.\u003c/p\u003e\n\u003cp\u003eHere's another variation:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-ocaml\"\u003e# let max a b =\n  if a \u0026gt; b then a else b in\n  print_int (max 2 3)\n3\n- : unit = ()\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eDisappointingly although the definition of \u003ccode\u003emax\u003c/code\u003e in this code is local\n(it can't be called from outside the module), OCaml still doesn't\nspecialise the function.\u003c/p\u003e\n\u003cp\u003eLesson: if you have a function which is unintentionally polymorphic then\nyou can help the compiler by specifying types for one or more of the\narguments.\u003c/p\u003e\n\u003ch3 id=\"the-representation-of-integers-tag-bits-heap-allocated-values\"\u003eThe representation of integers, tag bits, heap-allocated values\u003c/h3\u003e\n\u003cp\u003eThere are a number of peculiarities about integers in OCaml. One of\nthese is that integers are 31 bit entities, not 32 bit entities. What\nhappens to the \u0026quot;missing\u0026quot; bit?\u003c/p\u003e\n\u003cp\u003eWrite this to \u003ccode\u003eint.ml\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-ocaml\"\u003eprint_int 3\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eand compile with \u003ccode\u003eocamlopt -S int.ml -o int\u003c/code\u003e to generate assembly\nlanguage in \u003ccode\u003eint.s\u003c/code\u003e. Recall from the discussion above that we are\nexpecting OCaml to inline the \u003ccode\u003eprint_int\u003c/code\u003e function as\n\u003ccode\u003eoutput_string (string_of_int 3)\u003c/code\u003e, and examining the assembly language\noutput we can see that this is exactly what OCaml does:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-assembly\"\u003e        .text\n        .globl  Int__entry\nInt__entry:\n\n        ; Call Pervasives.string_of_int (3)\n\n        movl    $7, %eax\n        call    Pervasives__string_of_int_152\n\n        ; Call Pervasives.output_string (stdout, result_of_previous)\n\n        movl    %eax, %ebx\n        movl    Pervasives + 92, %eax\n        call    Pervasives__output_string_212\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe important code is shown in red. It shows two things: Firstly the\ninteger is unboxed (not allocated on the heap), but is instead passed\ndirectly to the function in the register \u003ccode\u003e%eax\u003c/code\u003e. This is fast. But\nsecondly we see that the number being passed is 7, not 3.\u003c/p\u003e\n\u003cp\u003eThis is a consequence of the representation of integers in OCaml. The\nbottom bit of the integer is used as a tag - we'll see what for next.\nThe top 31 bits are the actual integer. The binary representation of 7\nis 111, so the bottom tag bit is 1 and the top 31 bits form the number\n11 in binary = 3. To get from the OCaml representation to the integer,\ndivide by two and round down.\u003c/p\u003e\n\u003cp\u003eWhy the tag bit at all? This bit is used to distinguish between integers\nand pointers to structures on the heap, and the distinction is only\nnecessary if we are calling a polymorphic function. In the case above,\nwhere we are calling \u003ccode\u003estring_of_int\u003c/code\u003e, the argument can only ever be an\n\u003ccode\u003eint\u003c/code\u003e and so the tag bit would never be consulted. Nevertheless, to\navoid having two internal representations for integers, all integers in\nOCaml carry around the tag bit.\u003c/p\u003e\n\u003cp\u003eA bit of background about pointers is required to understand why the tag\nbit is really necessary, and why it is where it is.\u003c/p\u003e\n\u003cp\u003eIn the world of RISC chips like the Sparc, MIPS and Alpha, pointers have\nto be word-aligned. So on the older 32 bit Sparc, for example, it's not\npossible to create and use a pointer which isn't aligned to a multiple\nof 4 (bytes). Trying to use one generates a processor exception, which\nmeans basically your program segfaults. The reason for this is just to\nsimplify memory access. It's just a lot simpler to design the memory\nsubsystem of a CPU if you only need to worry about word-aligned access.\u003c/p\u003e\n\u003cp\u003eFor historical reasons (because the x86 is derived from an 8 bit chip),\nthe x86 has supported unaligned memory access, although if you align all\nmemory accesses to multiples of 4, then things go faster.\u003c/p\u003e\n\u003cp\u003eNevertheless, all pointers in OCaml are aligned - ie. multiples of 4 for\n32 bit processors, and multiples of 8 for 64 bit processors. This means\nthat the bottom bit of any pointer in OCaml will always be zero.\u003c/p\u003e\n\u003cp\u003eSo you can see that by looking at the bottom bit of a register, you can\nimmediately tell if it stores a pointer (\u0026quot;tag\u0026quot; bit is zero), or an\ninteger (tag bit set to one).\u003c/p\u003e\n\u003cp\u003eRemember our polymorphic \u0026gt; function which caused us so much trouble in\nthe previous section? We looked at the assembler and found out that\nOCaml compiles a call to a C function called \u003ccode\u003egreaterthan\u003c/code\u003e whenever it\nsees the polymorphic form of \u0026gt;. This function takes two arguments, in\nregisters \u003ccode\u003e%eax\u003c/code\u003e and \u003ccode\u003e%ebx\u003c/code\u003e. But \u003ccode\u003egreaterthan\u003c/code\u003e can be called with\nintegers, floats, strings, opaque objects ... How does it know what\n\u003ccode\u003e%eax\u003c/code\u003e and \u003ccode\u003e%ebx\u003c/code\u003e point to?\u003c/p\u003e\n\u003cp\u003eIt uses the following decision tree:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eTag bit is one:\u003c/strong\u003e compare the two integers and return.\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eTag bit is zero:\u003c/strong\u003e \u003ccode\u003e%eax\u003c/code\u003e and \u003ccode\u003e%ebx\u003c/code\u003e must point at two\nheap-allocated memory blocks. Look at the header word of the memory\nblocks, specifically the bottom 8 bits of the header word, which tag\nthe content of the block.\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eString_tag:\u003c/strong\u003e Compare two strings.\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDouble_tag:\u003c/strong\u003e Compare two floats.\n\u003c/li\u003e\n\u003cli\u003eetc.\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eNote that because \u0026gt; has type \u003ccode\u003e'a -\u0026gt; 'a -\u0026gt; bool\u003c/code\u003e, both arguments must\nhave the same type. The compiler should enforce this at compile time. I\nwould assume that \u003ccode\u003egreaterthan\u003c/code\u003e probably contains code to sanity-check\nthis at run time however.\u003c/p\u003e\n\u003ch3 id=\"floats\"\u003eFloats\u003c/h3\u003e\n\u003cp\u003eFloats are, by default, boxed (allocated on the heap). Save this as\n\u003ccode\u003efloat.ml\u003c/code\u003e and compile it with \u003ccode\u003eocamlopt -S float.ml -o float\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-ocamltop\"\u003eprint_float 3.0\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe number is not passed directly to \u003ccode\u003estring_of_float\u003c/code\u003e in the \u003ccode\u003e%eax\u003c/code\u003e\nregister as happened above with ints. Instead, it is created statically\nin the data segment:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-assembly\"\u003e        .data\n        .long   2301\n        .globl  Float__1\nFloat__1:\n        .double 3.0\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eand a pointer to the float is passed in \u003ccode\u003e%eax\u003c/code\u003e instead:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-assembly\"\u003e        movl    $Float__1, %eax\n        call    Pervasives__string_of_float_157\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNote the structure of the floating point number: it has a header (2301),\nfollowed by the 8 byte (2 word) representation of the number itself. The\nheader can be decoded by writing it as binary:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eLength of the object in words:  0000 0000 0000 0000 0000 10 (8 bytes)\nColor:                          00\nTag:                            1111 1101 (Double_tag)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003estring_of_float\u003c/code\u003e isn't polymorphic, but suppose we have a polymorphic\nfunction \u003ccode\u003efoo : 'a -\u0026gt; unit\u003c/code\u003e taking one polymorphic argument. If we call\n\u003ccode\u003efoo\u003c/code\u003e with \u003ccode\u003e%eax\u003c/code\u003e containing 7, then this is equivalent to \u003ccode\u003efoo 3\u003c/code\u003e,\nwhereas if we call \u003ccode\u003efoo\u003c/code\u003e with \u003ccode\u003e%eax\u003c/code\u003e containing a pointer to \u003ccode\u003eFloat__1\u003c/code\u003e\nabove, then this is equivalent to \u003ccode\u003efoo 3.0\u003c/code\u003e.\u003c/p\u003e\n\u003ch3 id=\"arrays\"\u003eArrays\u003c/h3\u003e\n\u003cp\u003eI mentioned earlier that one of OCaml's targets was numerical computing.\nNumerical computing does a lot of work on vectors and matrices, which\nare essentially arrays of floats. As a special hack to make this go\nfaster, OCaml implements \u003cstrong\u003earrays of unboxed floats\u003c/strong\u003e. This\nmeans that in the special case where we have an object of type\n\u003ccode\u003efloat array\u003c/code\u003e (array of floats), OCaml stores them the same way as in C:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-C\"\u003edouble array[10];\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e... instead of having an array of pointers to ten separately allocated\nfloats on the heap.\u003c/p\u003e\n\u003cp\u003eLet's see this in practice:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-ocaml\"\u003elet a = Array.create 10 0.0;;\nfor i = 0 to 9 do\n  a.(i) \u0026lt;- float_of_int i\ndone\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI'm going to compile this code with the \u003ccode\u003e-unsafe\u003c/code\u003e option to remove\nbounds checking (simplifying the code for our exposition here). The\nfirst line, which creates the array, is compiled to a simple C call:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-assembly\"\u003e        pushl   $Arrayfloats__1     ; Boxed float 0.0\n        pushl   $21                 ; The integer 10\n        movl    $make_vect, %eax    ; Address of the C function to call\n        call    caml_c_call\n    ; ...\n        movl    %eax, Arrayfloats   ; Store the resulting pointer to the\n                                    ; array at this place on the heap.\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe loop is compiled to this relatively simple assembly language:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-assembly\"\u003e        movl    $1, %eax            ; Let %eax = 0. %eax is going to store i.\n        cmpl    $19, %eax           ; If %eax \u0026gt; 9, then jump out of the\n        jg      .L100               ;   loop (to label .L100 at the end).\n\n.L101:                              ; This is the start of the loop body.\n        movl    Arrayfloats, %ecx   ; Address of the array to %ecx.\n\n        movl    %eax, %ebx          ; Copy i to %ebx.\n        sarl    $1, %ebx            ; Remove the tag bit from %ebx by\n                                    ;   shifting it right 1 place. So %ebx\n                                    ;   now contains the real integer i.\n\n        pushl   %ebx                ; Convert %ebx to a float.\n        fildl   (%esp)\n        addl    $4, %esp\n\n        fstpl   -4(%ecx, %eax, 4)   ; Store the float in the array at the ith\n                                ; position.\n\n        addl    $2, %eax            ; i := i + 1\n        cmpl    $19, %eax           ; If i \u0026lt;= 9, loop around again.\n        jle     .L101\n.L100:\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe important statement is the one which stores the float into the\narray. It is:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-assembly\"\u003e        fstpl   -4(%ecx, %eax, 4)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe assembler syntax is rather complex, but the bracketed expression\n\u003ccode\u003e-4(%ecx, %eax, 4)\u003c/code\u003e means \u0026quot;at the address \u003ccode\u003e%ecx + 4*%eax - 4\u003c/code\u003e\u0026quot;. Recall\nthat \u003ccode\u003e%eax\u003c/code\u003e is the OCaml representation of i, complete with tag bit, so\nit is essentially equal to \u003ccode\u003ei*2+1\u003c/code\u003e, so let's substitute that and\nmultiply it out:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-assembly\"\u003e  %ecx + 4*%eax - 4\n= %ecx + 4*(i*2+1) - 4\n= %ecx + 4*i*2 + 4 - 4\n= %ecx + 8*i\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e(Each float in the array is 8 bytes long.)\u003c/p\u003e\n\u003cp\u003eSo arrays of floats are unboxed, as expected.\u003c/p\u003e\n\u003ch3 id=\"partially-applied-functions-and-closures\"\u003ePartially applied functions and closures\u003c/h3\u003e\n\u003cp\u003eHow does OCaml compile functions which are only partially applied? Let's\ncompile this code:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-ocaml\"\u003eArray.map ((+) 2) [|1; 2; 3; 4; 5|]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIf you recall the syntax, \u003ccode\u003e[| ... |]\u003c/code\u003e declares an array (in this case an\n\u003ccode\u003eint array\u003c/code\u003e), and \u003ccode\u003e((+) 2)\u003c/code\u003e is a closure - \u0026quot;the function which adds 2 to\nthings\u0026quot;.\u003c/p\u003e\n\u003cp\u003eCompiling this code reveals some interesting new features. Firstly the\ncode which allocates the array:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-assembly\"\u003e        movl    $24, %eax           ; Allocate 5 * 4 + 4 = 24 bytes of memory.\n        call    caml_alloc\n\n        leal    4(%eax), %eax       ; Let %eax point to 4 bytes into the\n                                    ;   allocated memory.\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAll heap allocations have the same format: 4 byte header + data. In this\ncase the data is 5 integers, so we allocate 4 bytes for the header plus\n5 * 4 bytes for the data. We update the pointer to point at the first\ndata word, ie. 4 bytes into the allocated memory block.\u003c/p\u003e\n\u003cp\u003eNext OCaml generates code to initialize the array:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-assembly\"\u003e        movl    $5120, -4(%eax)\n        movl    $3, (%eax)\n        movl    $5, 4(%eax)\n        movl    $7, 8(%eax)\n        movl    $9, 12(%eax)\n        movl    $11, 16(%eax)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe header word is 5120, which if you write it in binary means a block\ncontaining 5 words, with tag zero. The tag of zero means it's a\n\u0026quot;structured block\u0026quot; a.k.a. an array. We also copy the numbers 1, 2, 3, 4\nand 5 to the appropriate places in the array. Notice the OCaml\nrepresentation of integers is used. Because this is a structured block,\nthe garbage collector will scan each word in this block, and the GC\nneeds to be able to distinguish between integers and pointers to other\nheap-allocated blocks (the GC does not have access to type information\nabout this array).\u003c/p\u003e\n\u003cp\u003eNext the closure \u003ccode\u003e((+) 2)\u003c/code\u003e is created. The closure is represented by\nthis block allocated in the data segment:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-assembly\"\u003e        .data\n        .long   3319\n        .globl  Closure__1\nClosure__1:\n        .long   caml_curry2\n        .long   5\n        .long   Closure__fun_58\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe header is 3319, indicating a \u003ccode\u003eClosure_tag\u003c/code\u003e with length 3 words. The\n3 words in the block are the address of the function \u003ccode\u003ecaml_curry2\u003c/code\u003e, the\ninteger number 2 and the address of this function:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-assembly\"\u003e        .text\n        .globl  Closure__fun_58\nClosure__fun_58:\n\n        ; The function takes two arguments, %eax and %ebx.\n        ; This line causes the function to return %eax + %ebx - 1.\n\n        lea     -1(%eax, %ebx), %eax\n        ret\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWhat does this function do? On the face of it, it adds the two\narguments, and subtracts one. But remember that \u003ccode\u003e%eax\u003c/code\u003e and \u003ccode\u003e%ebx\u003c/code\u003e are in\nthe OCaml representation for integers. Let's represent them as:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e%eax = 2 * a + 1\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e%ebx = 2 * b + 1\u003c/code\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003ewhere \u003ccode\u003ea\u003c/code\u003e and \u003ccode\u003eb\u003c/code\u003e are the actual integer arguments. So this function\nreturns:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e%eax + %ebx - 1\n= 2 * a + 1 + 2 * b + 1 - 1\n= 2 * a + 2 * b + 1\n= 2 * (a + b) + 1\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn other words, this function returns the OCaml integer representation\nof the sum \u003ccode\u003ea + b\u003c/code\u003e. This function is \u003ccode\u003e(+)\u003c/code\u003e!\u003c/p\u003e\n\u003cp\u003e(It's actually more subtle than this - to perform the mathematics\nquickly, OCaml uses the x86 addressing hardware in a way that probably\nwasn't intended by the designers of the x86.)\u003c/p\u003e\n\u003cp\u003eSo back to our closure - we won't go into the details of the\n\u003ccode\u003ecaml_curry2\u003c/code\u003e function, but just say that this closure is the argument\n\u003ccode\u003e2\u003c/code\u003e applied to the function \u003ccode\u003e(+)\u003c/code\u003e, waiting for a second argument. Just\nas expected.\u003c/p\u003e\n\u003cp\u003eThe actual call to the \u003ccode\u003eArray.map\u003c/code\u003e function is quite difficult to\nunderstand, but the main points for our examination of OCaml is that the\ncode:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eDoes call \u003ccode\u003eArray.map\u003c/code\u003e with an explicit closure.\n\u003c/li\u003e\n\u003cli\u003eDoes not attempt to inline the call and turn it into a loop.\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eCalling \u003ccode\u003eArray.map\u003c/code\u003e in this way is undoubtedly slower than writing a\nloop over the array by hand. The overhead is mainly in the fact that the\nclosure must be evaluated for each element of the array, and that isn't\nas fast as inlining the closure as a function (if this optimization were\neven possible). However, if you had a more substantial closure than just\n\u003ccode\u003e((+) 2)\u003c/code\u003e, the overhead would be reduced. The FP version also saves\nexpensive \u003cem\u003eprogrammer\u003c/em\u003e time versus writing the imperative loop.\u003c/p\u003e\n\u003ch2 id=\"profiling\"\u003eProfiling\u003c/h2\u003e\n\u003cp\u003eThere are two types of profiling that you can do on OCaml programs:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eGet execution counts for bytecode.\n\u003c/li\u003e\n\u003cli\u003eGet real profiling for native code.\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eThe \u003ccode\u003eocamlcp\u003c/code\u003e and \u003ccode\u003eocamlprof\u003c/code\u003e programs perform profiling on bytecode.\nHere is an example:\u003c/p\u003e\n\u003c!-- $MDX file=examples/gc.ml --\u003e\n\u003cpre\u003e\u003ccode class=\"language-ocaml\"\u003elet rec iterate r x_init i =\n  if i = 1 then x_init\n  else\n    let x = iterate r x_init (i - 1) in\n    r *. x *. (1.0 -. x)\n\nlet () =\n  Random.self_init ();\n  Graphics.open_graph \u0026quot; 640x480\u0026quot;;\n  for x = 0 to 640 do\n    let r = 4.0 *. float_of_int x /. 640.0 in\n    for i = 0 to 39 do\n      let x_init = Random.float 1.0 in\n      let x_final = iterate r x_init 500 in\n      let y = int_of_float (x_final *. 480.) in\n      Graphics.plot x y\n    done\n  done;\n  Gc.print_stat stdout\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd can be run and compiled with\u003c/p\u003e\n\u003c!-- $MDX skip --\u003e\n\u003cpre\u003e\u003ccode\u003e$ ocamlcp -p a graphics.cma graphtest.ml -o graphtest\n$ ./graphtest\n$ ocamlprof graphtest.ml\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe comments \u003ccode\u003e(* nnn *)\u003c/code\u003e are added by \u003ccode\u003eocamlprof\u003c/code\u003e, showing how many\ntimes each part of the code was called.\u003c/p\u003e\n\u003cp\u003eProfiling native code is done using your operating system's native\nsupport for profiling. In the case of Linux, we use \u003ccode\u003egprof\u003c/code\u003e. An alternative\nis \u003ca href=\"https://en.wikipedia.org/wiki/Perf_(Linux)\"\u003eperf\u003c/a\u003e, as explained below.\u003c/p\u003e\n\u003cp\u003eWe compile it using the \u003ccode\u003e-p\u003c/code\u003e option to \u003ccode\u003eocamlopt\u003c/code\u003e which tells the\ncompiler to include profiling information for \u003ccode\u003egprof\u003c/code\u003e:\u003c/p\u003e\n\u003cp\u003eAfter running the program as normal, the profiling code dumps out a file\n\u003ccode\u003egmon.out\u003c/code\u003e which we can interpret with \u003ccode\u003egprof\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ gprof ./a.out\nFlat profile:\n  \nEach sample counts as 0.01 seconds.\n  %   cumulative   self              self     total\n time   seconds   seconds    calls   s/call   s/call  name\n 10.86      0.57     0.57     2109     0.00     0.00  sweep_slice\n  9.71      1.08     0.51     1113     0.00     0.00  mark_slice\n  7.24      1.46     0.38  4569034     0.00     0.00  Sieve__code_begin\n  6.86      1.82     0.36  9171515     0.00     0.00  Stream__set_data_140\n  6.57      2.17     0.34 12741964     0.00     0.00  fl_merge_block\n  6.29      2.50     0.33  4575034     0.00     0.00  Stream__peek_154\n  5.81      2.80     0.30 12561656     0.00     0.00  alloc_shr\n  5.71      3.10     0.30     3222     0.00     0.00  oldify_mopup\n  4.57      3.34     0.24 12561656     0.00     0.00  allocate_block\n  4.57      3.58     0.24  9171515     0.00     0.00  modify\n  4.38      3.81     0.23  8387342     0.00     0.00  oldify_one\n  3.81      4.01     0.20 12561658     0.00     0.00  fl_allocate\n  3.81      4.21     0.20  4569034     0.00     0.00  Sieve__filter_56\n  3.62      4.40     0.19     6444     0.00     0.00  empty_minor_heap\n  3.24      4.57     0.17     3222     0.00     0.00  oldify_local_roots\n  2.29      4.69     0.12  4599482     0.00     0.00  Stream__slazy_221\n  2.10      4.80     0.11  4597215     0.00     0.00  darken\n  1.90      4.90     0.10  4596481     0.00     0.00  Stream__fun_345\n  1.52      4.98     0.08  4575034     0.00     0.00  Stream__icons_207\n  1.52      5.06     0.08  4575034     0.00     0.00  Stream__junk_165\n  1.14      5.12     0.06     1112     0.00     0.00  do_local_roots\n  \n[ etc. ]\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"using-perf-on-linux\"\u003eUsing perf on Linux\u003c/h3\u003e\n\u003cp\u003eAssuming perf is installed and your program is compiled into\nnative code with \u003ccode\u003e-g\u003c/code\u003e (or ocamlbuild tag \u003ccode\u003edebug\u003c/code\u003e), you just need to type\u003c/p\u003e\n\u003c!-- $MDX skip --\u003e\n\u003cpre\u003e\u003ccode class=\"language-sh\"\u003eperf record --call-graph=dwarf -- ./foo.native a b c d\nperf report\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe first command launches \u003ccode\u003efoo.native\u003c/code\u003e with arguments \u003ccode\u003ea b c d\u003c/code\u003e and\nrecords profiling information in \u003ccode\u003eperf.data\u003c/code\u003e; the second command\nstarts an interactive program to explore the call graph. The option\n\u003ccode\u003e--call-graph=dwarf\u003c/code\u003e makes perf aware of the calling convention of\nOCaml (with old versions of \u003ccode\u003eperf\u003c/code\u003e, enabling frame pointers in OCaml\nmight help; opam provides suitable compiler switches, such as \u003ccode\u003e4.02.1+fp\u003c/code\u003e).\u003c/p\u003e\n\u003ch2 id=\"summary\"\u003eSummary\u003c/h2\u003e\n\u003cp\u003eIn summary here are some tips for getting the best performance out of\nyour programs:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eWrite your program as simply as possible. If it takes too long to\nrun, profile it to find out where it's spending its time and\nconcentrate optimizations on just those areas.\n\u003c/li\u003e\n\u003cli\u003eCheck for unintentional polymorphism, and add type hints for the\ncompiler.\n\u003c/li\u003e\n\u003cli\u003eClosures are slower than simple function calls, but add to\nmaintainability and readability.\n\u003c/li\u003e\n\u003cli\u003eAs a last resort, rewrite hotspots in your program in C (but first\ncheck the assembly language produced by the OCaml compiler to see if\nyou can do better than it).\n\u003c/li\u003e\n\u003cli\u003ePerformance might depend on external factors (speed of your database\nqueries? speed of the network?). If so then no amount of\noptimization will help you.\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"further-reading\"\u003eFurther reading\u003c/h3\u003e\n\u003cp\u003eYou can find out more about how OCaml represents different types by\nreading the (\u0026quot;Interfacing C with OCaml\u0026quot;) chapter in the OCaml manual and also\nlooking at the \u003ccode\u003emlvalues.h\u003c/code\u003e header file.\u003c/p\u003e\n\u003c!--###  Java dynamic dispatch\n**There are some serious mistakes in the last paragraph:**\n\n* Dynamic method dispatch itself is seldom a performance problem. In\n languages without multiple inheritance (e.g. Java) this is usually\n done via one step of pointer indirection. Objects in OCaml are also\n dynamically dispatched. Since this is the point with polymorphism in\n an OO setting.\n\n* Dynamic method dispatch often hinders a compiler to inline function\n and this hits the performance.\n\n* In Java is a dynamic type check (aka cast) much more expensive than\n a dynamic method dispatch. --\u003e\n","title":"Performance and Profiling","pageDescription":"Understand how to profile your OCaml code to analyse its performance and produce faster programs\n","tableOfContents":"\u003cul\u003e\n\u003cli\u003e\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#speed\"\u003eSpeed\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#profiling\"\u003eProfiling\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#summary\"\u003eSummary\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n"},"params":{"lang":"en","tutorial":"performance-and-profiling"}},"__N_SSG":true},"page":"/[lang]/resources/[tutorial]","query":{"lang":"en","tutorial":"performance-and-profiling"},"buildId":"5vwEGiEdVvGQoOBpMUVkF","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>
let render () =
Layout.render
~use_swiper:true
~title:"Install OCaml"
~description:"Quick setup instructions to install OCaml on your system."
~canonical:"" @@
<div class="lg:py-16 py-6">
  <div class="container-fluid" x-data='{ operating_system: detect_os () }'>
    <div class="prose">
      <h1>
        Install OCaml
      </h1>
      <div class="flex gap-2">
        <button class="btn flex gap-2" :class='operating_system == "linux"? "": "btn-secondary"' @click="operating_system = 'linux'"><%s! Icons.linux_tux "w-6 h-6" %> Linux</button>
        <button class="btn flex gap-2" :class='operating_system == "mac"? "": "btn-secondary"' @click="operating_system = 'mac'"><%s! Icons.apple_logo "w-6 h-6" %> macOS</button>
        <button class="btn flex gap-2" :class='operating_system == "win"? "": "btn-secondary"' @click="operating_system = 'win'"><%s! Icons.microsoft_windows "w-6 h-6" %> Windows</button>
      </div>

      <div x-show="(operating_system == 'unix') || (operating_system == 'linux') || (operating_system == 'mac')">
        <h2>
          Instructions for Linux, BSD, or macOS
        </h2>
        <ol>
          <li>
            <h2>Install the <code>opam</code> package manager</h2>

            <p>
            To download and install <code>opam</code>, run the following in your terminal, then follow the on-screen instructions:
            </p>

            <%s! Copy_to_clipboard_snippet.render ~id:"install-opam" "curl -fsSL https://raw.githubusercontent.com/ocaml/opam/master/shell/install.sh | sh" %>
            <a href="https://raw.githubusercontent.com/ocaml/opam/master/shell/install.sh" class="flex justify-end gap-1 py-1 items-center"><%s! Icons.github "h-6 w-6" %> view this shell script on GitHub</a>

            <details class="mt-6">
              <summary class="flex items-center gap-2 py-2 font-semibold">
                What if I don't like shell scripts?
                <%s! Icons.chevron_right "h-4 w-4" %>
              </summary>
              In this case, you could <a href="<%s Url.tutorial "up-and-running" %>#1-install-opam">install <tt>opam</tt> using your distribution's package manager</a>.

              Or, if you want to have the most recent version of <code>opam</code>,
              you could follow the instructions at <a href="https://github.com/ocaml/opam"><tt>opam</tt>'s GitHub repository</a>
              to build <code>opam</code> from sources.
            </details>
          </li>

          <li>
            <h2>Create an <code>opam</code> switch</h2>

            <p>
              An <code>opam</code> switch is an isolated environment for the OCaml compiler
              and any packages you install.
              The following command installs OCaml 5.0.0 in a global <code>opam</code> switch:
            </p>

            <%s! Copy_to_clipboard_snippet.render ~id:"create-opam-switch" "opam switch create 5.0.0" %>

            <p>
              You can use <code>opam switch list-available</code> to see all available compiler versions.
              <a href="#TODO">Learn more about using <tt>opam</tt> (TODO: link to an opam tutorial here!)</a>.
            </p>

          </li>
        </ol>
      </div>

      <div x-show="operating_system == 'win'">
        <h2>
          Instructions for Windows
        </h2>
        <ol>
          <li>
            <h2>Use the Diskuv OCaml ("DKML") Windows installer</h2>
              <p>
                The installer sets up OCaml 4.14.0 with Git and the Visual Studio compiler.
              </p>

              <a class="btn !text-white hover:no-underline" href="https://github.com/diskuv/dkml-installer-ocaml/releases/download/v1.1.0_r2/setup-diskuv-ocaml-windows_x86_64-1.1.0.exe">
                <%s! Icons.download "h-6 w-6" %> Download DKML Installer
              </a>

              <p>
                Currently, 4.14.0 is the only OCaml version available through the Diskuv OCaml Installer.
                If you need a different OCaml version, check out the alternative installation instructions
                provided in <a href="<%s Url.ocaml_on_windows %>">"OCaml on Windows"</a>.
              </p>
          </li>
        </ol>
      </div>

      <p>You can find
        <a href="<%s Url.getting_started %>">a more comprehensive overview of different installation methods, as well as additional explanations here</a>.</p>
    </div>
  </div>
</div>
<script>
function detect_os ()
{
    let os = navigator.userAgent;
    let result="";
    if (os.search('Win')!==-1){
        result="win";
    }
    else if (os.search('Mac')!==-1){
        result="mac";
    }
    else if (os.search('X11')!==-1 && !(os.search('Linux')!==-1)){
        result="unix";
    }
    else if (os.search('Linux')!==-1 && os.search('X11')!==-1){
        result="linux"
    }
    return result;
}
</script>
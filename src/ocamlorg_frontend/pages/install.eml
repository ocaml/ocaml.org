let render () =
Layout.render
~use_swiper:true
~title:"Install OCaml"
~description:"Quick setup instructions to install OCaml on your system."
~canonical:"" @@
<div class="lg:py-8 py-6">
  <div class="container-fluid" x-data='{ operating_system: detect_os () }'>
    <div class="prose mb-6">
      <h1 class="sr-only">
        Install OCaml
      </h1>
      <div class="flex gap-2">
        <button class="btn flex gap-2" :class='operating_system == "linux_mac_bsd"? "": "btn-secondary"' @click="operating_system = 'linux_mac_bsd'"> Linux, macOS or *BSD</button>
        <button class="btn flex gap-2" :class='operating_system == "win"? "": "btn-secondary"' @click="operating_system = 'win'"><%s! Icons.microsoft_windows "w-6 h-6" %> Windows</button>
      </div>
    </div>

    <div
      class="grid gap-6 xl:grid-cols-2 xl:gap-16"
      x-show="(operating_system == 'linux_mac_bsd')">
      <div class="prose">
        <h2>
          Install OCaml on Linux, macOS, or *BSD
        </h2>

        <ol>
          <li>
            <h3>Install the <code>opam</code> package manager</h3>

            <p>
            <a target="_blank" href="https://opam.ocaml.org">OCaml's package manager <tt>opam</tt></a> installs both the compiler, as well as any additional packages.
            Ensure <code>gcc</code>, <code>build-essential</code>, <code>curl</code>, <code>unzip</code>, and <code>bubblewrap</code> are installed on your system, then
            run the following in your terminal to download and install the newest version of <code>opam</code>:
            </p>

            <%s! Copy_to_clipboard_snippet.render ~id:"install-opam" "bash -c \"sh <(curl -fsSL https://raw.githubusercontent.com/ocaml/opam/master/shell/install.sh)\"" %>
            <a target="_blank" href="https://raw.githubusercontent.com/ocaml/opam/master/shell/install.sh" class="flex justify-end gap-1 pt-1 items-center"><%s! Icons.github "h-6 w-6" %> view script on GitHub</a>

            <details>
              <summary class="flex items-center gap-2 font-semibold">
                Other installation methods
                <%s! Icons.chevron_right "h-4 w-4" %>
              </summary>
              You can also <a href="<%s Url.tutorial "up-and-running" %>#1-install-opam">install <tt>opam</tt> using your operating system's package manager</a>.

              If you need the most recent version of <code>opam</code>,
              you can build <code>opam</code> from sources, following the instructions at
              <a target="_blank" href="https://github.com/ocaml/opam"><tt>opam</tt>'s GitHub repository</a>.
            </details>
          </li>

          <li>
            <h3>Initialise <code>opam</code></h3>

            <p>
              <code>opam</code> needs to be initialised, which will create a default
              <a href="<%s Url.tutorial "up-and-running" %>#3-create-an-opam-switch"><tt>opam</tt> switch</a>.
              An <code>opam</code> switch is an isolated environment for the OCaml compiler
              and any packages you install.
            </p>

            <%s! Copy_to_clipboard_snippet.render ~id:"init-opam" "opam init" %>

            <p>
            During <code>opam init</code>, you will be asked if you want to add a hook
            to your shell to put the tools available in the current <code>opam</code> switch
            on your PATH.
            If you answer no, you will need to activate the <code>opam</code> switch
            by running <code>eval $(opam env)</code>.
            </p>
          </li>
        </ol>

        <p>Congratulations, you have now installed OCaml!</p>
      </div>
      <div>
        <div class="prose">
          <h2>Set Up an OCaml Development Environment</h2>

          <p>
            The <a href="<%s Url.tutorial "up-and-running" %>#installing-the-ocaml-platform-tools">OCaml Platform Tools</a>,
            which include the <a target="_blank" href="https://dune.build/">build system <tt>dune</tt></a>,
            complete your OCaml development environment. To install them in your current <code>opam</code> switch, run this command:
          </p>

          <%s! Copy_to_clipboard_snippet.render ~id:"install-platform-tools" "opam install dune merlin ocaml-lsp-server odoc ocamlformat utop dune-release" %>

          <p>Now you are ready to write some OCaml code!</p>
        </div>
        <a class="btn text-white mt-6 flex gap-2" href="<%s Url.tutorial "up-and-running" %>#first-steps-with-ocaml">First Steps with OCaml <%s! Icons.arrow_small_right "h-6 w-6" %></a>

        <div class="prose mt-6">
          <p>If the instructions on this page did not work for you, or you want to know more, you can find
            <a href="<%s Url.getting_started %>#installation-on-unix-linux-macos-bsd">a more detailed explanation of the installation process here</a>.
          </p>
        </div>
      </div>
    </div>

    <div class="grid gap-6 xl:grid-cols-2 xl:gap-16" x-show="operating_system == 'win'">
      <div class="prose">
        <h2>
          Install OCaml on Windows
        </h2>
        <ol>
          <li>
            <h3>Use the Diskuv OCaml ("DKML") Windows installer</h3>
              <p>
                The installer sets up OCaml 4.14.0 and <a target="_blank" href="https://github.com/ocaml/opam">OCaml's package manager <tt>opam</tt></a>,
                with Git and the Visual Studio compiler.

                If you need a different OCaml version, check out the alternative installation instructions
                provided in the <a href="<%s Url.ocaml_on_windows %>">"OCaml on Windows" guide</a>.
              </p>

              <a class="btn !text-white hover:no-underline gap-2" href="https://github.com/diskuv/dkml-installer-ocaml/releases/download/v1.2.0/setup-diskuv-ocaml-windows_x86_64-1.2.0.exe">
                <%s! Icons.download "h-6 w-6" %> Download DKML Installer
              </a>

              <p>
                Before you run the installer: Make sure your Windows username does <b>not</b> contain a space character (e.g. for <code>C:\Users\Jane Smith</code>, OCaml will not install properly).
              </p>

          </li>
        </ol>

        <p>
          Congratulations, you have now installed OCaml as well as the <a href="<%s Url.tutorial "up-and-running" %>#installing-the-ocaml-platform-tools">OCaml Platform Tools</a>!
        </p>
      </div>
      <div>
        <div class="prose">
          <h2>You have an OCaml Development Environment</h2>

          <p>
            The <a href="<%s Url.tutorial "up-and-running" %>#installing-the-ocaml-platform-tools">OCaml Platform Tools</a> include the <a target="_blank" href="https://dune.build/">build system <tt>dune</tt></a>,
            and provide you with a complete OCaml development environment.
          </p>

          <p>Now you are ready to write some OCaml code!</p>
        </div>
        <a class="btn text-white mt-6 flex gap-2" href="<%s Url.tutorial "up-and-running" %>#first-steps-with-ocaml">First Steps with OCaml <%s! Icons.arrow_small_right "h-6 w-6" %></a>

        <div class="prose mt-6">
          <p>If the instructions on this page did not work for you, or you want to know more, you can find
            <a href="<%s Url.getting_started %>#installation-on-windows">a more detailed explanation of the installation process here</a>.
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
function detect_os ()
{
    let os = navigator.userAgent;
    let result="unix"; // assume a generic unix as default
    if (os.search('Win')!==-1){
        result="win";
    }
    else if (os.search('Mac')!==-1){
        result="linux_mac_bsd";
    }
    else if (os.search('X11')!==-1 && !(os.search('Linux')!==-1)){
        result="linux_mac_bsd";
    }
    else if (os.search('Linux')!==-1 && os.search('X11')!==-1){
        result="linux_mac_bsd"
    }
    return result;
}
</script>
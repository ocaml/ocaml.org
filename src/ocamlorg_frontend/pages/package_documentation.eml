let sidebar
~(path: Breadcrumbs.path_item list)
~str_path
~toc
~maptoc
(package : Package_intf.package)
=
  <div class="space-y-2 flex flex-col pt-6">
    <div class="space-y-6 flex flex-col overflow-x:scroll">

      <div class="">
        <a title="Package <%s package.name %>" class="py-1 font-medium text-body-600 hover:text-orange-600 transition-colors" href="<%s Url.package_doc package.name package.version ~page:"index.html" %>">
        <%s package.name %>
        </a>
        <% if List.length path > 1 then (%>
          &bull;
          <span title="Library <%s Breadcrumbs.path_item_name (List.hd path) %>"><%s Breadcrumbs.path_item_name (List.hd path) %></span>
          <br>
          <%s! Breadcrumbs.render_sidebar_breadcrumbs (List.tl path) %>
        <% ); %>
      </div>
      <%s! if (toc != []) then Toc.render toc else "" %>

      <div>
      <a class="py-1 font-medium text-body-600 hover:text-orange-600 transition-colors" href="<%s Url.package_doc package.name package.version ~page:"index.html" %>">
        package <%s package.name %>
      </a>
      <%s! Navmap.render ~path:str_path maptoc %>
      </div>
    </div>
  </div>

let render
~title
~(path: Breadcrumbs.path_item list)
~toc
~maptoc
~content
(package : Package_intf.package) =
let str_path =
  List.map (function
        | Breadcrumbs.Module s -> s
        | ModuleType s -> s
        | FunctorArgument (number, s) -> Int.to_string number ^ "-" ^ s
        | Class s -> s
        | ClassType s -> s
        | Library s -> s) path
in
Docs_layout.render
~title
~description:(Printf.sprintf "%s %s: %s" package.name package.version package.description)
~styles:["/css/main.css"; "/css/doc.css"]
~logo_href:(Url.package_with_version package.name package.version)
~header_html:((Docs_layout.package_overview_link ~package) ^ (Docs_layout.version_select ~package))
~sidebar_html:(sidebar ~path ~str_path ~toc ~maptoc package) @@
  <div class="pt-6">
    <!-- this is where search will go
      <input style="width:100%" class="mb-6 focus:ring-orange-500 focus:border-orange-500"
        type="search" id="search_in_package" name="search_in_package"
        placeholder="search in this package...">
    -->
    <% if (maptoc != []) && (List.length path > 1) then (%>
        <div class="text-body-400">
          <a title="Package <%s package.name %>" class="py-1 font-medium text-body-600 hover:text-orange-600 transition-colors" href="<%s Url.package_doc package.name package.version ~page:"index.html" %>">
          <%s package.name %>
          </a> &bull;
          <span title="Library <%s Breadcrumbs.path_item_name (List.hd path) %>"><%s Breadcrumbs.path_item_name (List.hd path) %></span>
          <%s! Breadcrumbs.render (List.tl path) %>
        </div>
      <% ); %>
    <div class="odoc prose prose-orange">
      <%s! content %>
    </div>
  </div>

let link ~base_url ~page ~current =
  let active_class = "border-2 border-current text-primary-600" in
  let non_active_class = "border border-body-100 text-body-400 hover:bg-gray-50 hover:no-underline" in
  <a href="<%s base_url %>?p=<%i page %>"
    class="w-10 h-10 lg:w-14 lg:h-14 rounded-lg flex items-center justify-center <%s if page = current then active_class else non_active_class %>">
    <%i page %>
  </a>

let left_arrow ~base_url page =
  <a href="<%s base_url %>?p=<%i page - 1 %>"
    class="w-10 h-10 lg:w-14 lg:h-14  border border-body-100 rounded-lg flex items-center justify-center text-body-400 hover:bg-gray-50 hover:no-underline">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
    </svg>
  </a>

let right_arrow ~base_url page =
  <a href="<%s base_url %>?p=<%i page + 1 %>"
    class="w-10 h-10 lg:w-14 lg:h-14  border border-body-100 rounded-lg flex items-center justify-center text-body-400 hover:bg-gray-50 hover:no-underline">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" id="chevron_right" d="M9 5l7 7-7 7" />
    </svg>
  </a>

let render ~total_page_count ~page_number ~base_url =
  <div class="pt-16 flex items-center justify-center space-x-2.5">
    <%s! if page_number != 1 then (left_arrow ~base_url page_number) else "" %>
    <%s! link ~base_url ~page:1 ~current:page_number %>
    <% if page_number >= 4 then ( %>
    <span class="w-10 h-10 lg:w-14 lg:h-14 border-body-100 rounded-lg flex items-center justify-center text-body-400 hover:no-underline">...</span>
    <% ); %>
    <% for page = 2 to (total_page_count - 1) do %>
    <%s! if (abs (page_number - page) <= 1) || (page_number = 1 && page = 3) || (page_number = total_page_count && total_page_count - page = 2) then (link ~base_url ~page ~current:page_number) else "" %>
    <% done; %>
    <% if total_page_count - page_number >= 3 then ( %>
    <span class="w-10 h-10 lg:w-14 lg:h-14 border-body-100 rounded-lg flex items-center justify-center text-body-400 hover:no-underline">...</span>
    <% ); %>
    <%s! link ~base_url ~page:total_page_count ~current:page_number %>
    <%s! if page_number != total_page_count then (right_arrow ~base_url page_number) else "" %>
  </div>

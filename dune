(subdir
 asset/css/
 (rule
  (target main.css)
  (deps
   (:config %{workspace_root}/tailwind.config.js)
   (:input %{workspace_root}/src/ocamlorg_frontend/css/styles.css)
   (source_tree %{workspace_root}/src/ocamlorg_frontend))
  (action
   (chdir
    %{workspace_root}
    (run tailwindcss -m -c %{config} -i %{input} -o %{target})))))

(subdir
 asset/js/
 ; Add a version suffix to the JavaScript file to invalidate cache when the playground changes.
 ; Don't forget to update the version here and in the HTML.
 (rule
  (target merlin-v1.js)
  (action
   (copy %{workspace_root}/playground/asset/merlin.js %{target})))
 (rule
  (target playground-v1.js)
  (action
   (copy %{workspace_root}/playground/asset/playground.js %{target})))
 (rule
  (target worker-v1.js)
  (action
   (copy %{workspace_root}/playground/asset/worker.js %{target}))))

(data_only_dirs playground data asset)

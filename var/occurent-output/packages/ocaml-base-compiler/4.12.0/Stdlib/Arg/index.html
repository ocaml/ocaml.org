<div><div class="odoc-spec"><div class="spec type" id="type-spec" class="anchored"><a href="#type-spec" class="anchor"></a><code><span><span class="keyword">type</span> spec</span><span> = </span></code><table><tr id="type-spec.Unit" class="anchored"><td class="def variant constructor"><a href="#type-spec.Unit" class="anchor"></a><code><span>| </span><span><span class="constructor">Unit</span> <span class="keyword">of</span> <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Call the function with unit argument</p><span class="comment-delim">*)</span></td></tr><tr id="type-spec.Bool" class="anchored"><td class="def variant constructor"><a href="#type-spec.Bool" class="anchor"></a><code><span>| </span><span><span class="constructor">Bool</span> <span class="keyword">of</span> <span>bool <span class="arrow">&#45;&gt;</span></span> unit</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Call the function with a bool argument</p><span class="comment-delim">*)</span></td></tr><tr id="type-spec.Set" class="anchored"><td class="def variant constructor"><a href="#type-spec.Set" class="anchor"></a><code><span>| </span><span><span class="constructor">Set</span> <span class="keyword">of</span> <span>bool <a href="../index.html#type-ref">ref</a></span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Set the reference to true</p><span class="comment-delim">*)</span></td></tr><tr id="type-spec.Clear" class="anchored"><td class="def variant constructor"><a href="#type-spec.Clear" class="anchor"></a><code><span>| </span><span><span class="constructor">Clear</span> <span class="keyword">of</span> <span>bool <a href="../index.html#type-ref">ref</a></span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Set the reference to false</p><span class="comment-delim">*)</span></td></tr><tr id="type-spec.String" class="anchored"><td class="def variant constructor"><a href="#type-spec.String" class="anchor"></a><code><span>| </span><span><span class="constructor">String</span> <span class="keyword">of</span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Call the function with a string argument</p><span class="comment-delim">*)</span></td></tr><tr id="type-spec.Set_string" class="anchored"><td class="def variant constructor"><a href="#type-spec.Set_string" class="anchor"></a><code><span>| </span><span><span class="constructor">Set_string</span> <span class="keyword">of</span> <span>string <a href="../index.html#type-ref">ref</a></span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Set the reference to the string argument</p><span class="comment-delim">*)</span></td></tr><tr id="type-spec.Int" class="anchored"><td class="def variant constructor"><a href="#type-spec.Int" class="anchor"></a><code><span>| </span><span><span class="constructor">Int</span> <span class="keyword">of</span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Call the function with an int argument</p><span class="comment-delim">*)</span></td></tr><tr id="type-spec.Set_int" class="anchored"><td class="def variant constructor"><a href="#type-spec.Set_int" class="anchor"></a><code><span>| </span><span><span class="constructor">Set_int</span> <span class="keyword">of</span> <span>int <a href="../index.html#type-ref">ref</a></span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Set the reference to the int argument</p><span class="comment-delim">*)</span></td></tr><tr id="type-spec.Float" class="anchored"><td class="def variant constructor"><a href="#type-spec.Float" class="anchor"></a><code><span>| </span><span><span class="constructor">Float</span> <span class="keyword">of</span> <span>float <span class="arrow">&#45;&gt;</span></span> unit</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Call the function with a float argument</p><span class="comment-delim">*)</span></td></tr><tr id="type-spec.Set_float" class="anchored"><td class="def variant constructor"><a href="#type-spec.Set_float" class="anchor"></a><code><span>| </span><span><span class="constructor">Set_float</span> <span class="keyword">of</span> <span>float <a href="../index.html#type-ref">ref</a></span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Set the reference to the float argument</p><span class="comment-delim">*)</span></td></tr><tr id="type-spec.Tuple" class="anchored"><td class="def variant constructor"><a href="#type-spec.Tuple" class="anchor"></a><code><span>| </span><span><span class="constructor">Tuple</span> <span class="keyword">of</span> <span><a href="#type-spec">spec</a> list</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Take several arguments according to the spec list</p><span class="comment-delim">*)</span></td></tr><tr id="type-spec.Symbol" class="anchored"><td class="def variant constructor"><a href="#type-spec.Symbol" class="anchor"></a><code><span>| </span><span><span class="constructor">Symbol</span> <span class="keyword">of</span> <span>string list</span> * <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Take one of the symbols as argument and call the function with the symbol</p><span class="comment-delim">*)</span></td></tr><tr id="type-spec.Rest" class="anchored"><td class="def variant constructor"><a href="#type-spec.Rest" class="anchor"></a><code><span>| </span><span><span class="constructor">Rest</span> <span class="keyword">of</span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Stop interpreting keywords and call the function with each remaining argument</p><span class="comment-delim">*)</span></td></tr><tr id="type-spec.Rest_all" class="anchored"><td class="def variant constructor"><a href="#type-spec.Rest_all" class="anchor"></a><code><span>| </span><span><span class="constructor">Rest_all</span> <span class="keyword">of</span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Stop interpreting keywords and call the function with all remaining arguments</p><span class="comment-delim">*)</span></td></tr><tr id="type-spec.Expand" class="anchored"><td class="def variant constructor"><a href="#type-spec.Expand" class="anchor"></a><code><span>| </span><span><span class="constructor">Expand</span> <span class="keyword">of</span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string array</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>If the remaining arguments to process are of the form <code>[&quot;-foo&quot;; &quot;arg&quot;] @ rest</code> where &quot;foo&quot; is registered as <code>Expand f</code>, then the arguments <code>f &quot;arg&quot; @ rest</code> are processed. Only allowed in <code>parse_and_expand_argv_dynamic</code>.</p><span class="comment-delim">*)</span></td></tr></table></div><div class="spec-doc"><p>The concrete type describing the behavior associated with a keyword.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-key" class="anchored"><a href="#type-key" class="anchor"></a><code><span><span class="keyword">type</span> key</span><span> = string</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-doc" class="anchored"><a href="#type-doc" class="anchor"></a><code><span><span class="keyword">type</span> doc</span><span> = string</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-usage_msg" class="anchored"><a href="#type-usage_msg" class="anchor"></a><code><span><span class="keyword">type</span> usage_msg</span><span> = string</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-anon_fun" class="anchored"><a href="#type-anon_fun" class="anchor"></a><code><span><span class="keyword">type</span> anon_fun</span><span> = <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-parse" class="anchored"><a href="#val-parse" class="anchor"></a><code><span><span class="keyword">val</span> parse : <span><span><span>(<a href="#type-key">key</a> * <a href="#type-spec">spec</a> * <a href="#type-doc">doc</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-anon_fun">anon_fun</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-usage_msg">usage_msg</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>Arg.parse speclist anon_fun usage_msg</code> parses the command line. <code>speclist</code> is a list of triples <code>(key, spec, doc)</code>. <code>key</code> is the option keyword, it must start with a <code>'-'</code> character. <code>spec</code> gives the option type and the function to call when this option is found on the command line. <code>doc</code> is a one-line description of this option. <code>anon_fun</code> is called on anonymous arguments. The functions in <code>spec</code> and <code>anon_fun</code> are called in the same order as their arguments appear on the command line.</p><p>If an error occurs, <code>Arg.parse</code> exits the program, after printing to standard error an error message as follows:</p><ul><li>The reason for the error: unknown option, invalid or missing argument, etc.</li><li><code>usage_msg</code></li><li>The list of options, each followed by the corresponding <code>doc</code> string. Beware: options that have an empty <code>doc</code> string will not be included in the list.</li></ul><p>For the user to be able to specify anonymous arguments starting with a <code>-</code>, include for example <code>(&quot;-&quot;, String anon_fun, doc)</code> in <code>speclist</code>.</p><p>By default, <code>parse</code> recognizes two unit options, <code>-help</code> and <code>--help</code>, which will print to standard output <code>usage_msg</code> and the list of options, and exit the program. You can override this behaviour by specifying your own <code>-help</code> and <code>--help</code> options in <code>speclist</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-parse_dynamic" class="anchored"><a href="#val-parse_dynamic" class="anchor"></a><code><span><span class="keyword">val</span> parse_dynamic : <span><span><span><span>(<a href="#type-key">key</a> * <a href="#type-spec">spec</a> * <a href="#type-doc">doc</a>)</span> list</span> <a href="../index.html#type-ref">ref</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-anon_fun">anon_fun</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-usage_msg">usage_msg</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Same as <a href="#val-parse"><code>Arg.parse</code></a>, except that the <code>speclist</code> argument is a reference and may be updated during the parsing. A typical use for this feature is to parse command lines of the form:</p><ul><li>command subcommand <code>options</code> where the list of options depends on the value of the subcommand argument.</li></ul><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.01.0</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-parse_argv" class="anchored"><a href="#val-parse_argv" class="anchor"></a><code><span><span class="keyword">val</span> parse_argv : <span>?current:<span>int <a href="../index.html#type-ref">ref</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>string array</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<a href="#type-key">key</a> * <a href="#type-spec">spec</a> * <a href="#type-doc">doc</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-anon_fun">anon_fun</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-usage_msg">usage_msg</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>Arg.parse_argv ~current args speclist anon_fun usage_msg</code> parses the array <code>args</code> as if it were the command line. It uses and updates the value of <code>~current</code> (if given), or <a href="#val-current"><code>Arg.current</code></a>. You must set it before calling <code>parse_argv</code>. The initial value of <code>current</code> is the index of the program name (argument 0) in the array. If an error occurs, <code>Arg.parse_argv</code> raises <a href="#exception-Bad"><code>Arg.Bad</code></a> with the error message as argument. If option <code>-help</code> or <code>--help</code> is given, <code>Arg.parse_argv</code> raises <a href="#exception-Help"><code>Arg.Help</code></a> with the help message as argument.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-parse_argv_dynamic" class="anchored"><a href="#val-parse_argv_dynamic" class="anchor"></a><code><span><span class="keyword">val</span> parse_argv_dynamic : <span>?current:<span>int <a href="../index.html#type-ref">ref</a></span> <span class="arrow">&#45;&gt;</span></span>
<span><span>string array</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span><span>(<a href="#type-key">key</a> * <a href="#type-spec">spec</a> * <a href="#type-doc">doc</a>)</span> list</span> <a href="../index.html#type-ref">ref</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-anon_fun">anon_fun</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Same as <a href="#val-parse_argv"><code>Arg.parse_argv</code></a>, except that the <code>speclist</code> argument is a reference and may be updated during the parsing. See <a href="#val-parse_dynamic"><code>Arg.parse_dynamic</code></a>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.01.0</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-parse_and_expand_argv_dynamic" class="anchored"><a href="#val-parse_and_expand_argv_dynamic" class="anchor"></a><code><span><span class="keyword">val</span> parse_and_expand_argv_dynamic : <span><span>int <a href="../index.html#type-ref">ref</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>string array</span> <a href="../index.html#type-ref">ref</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span><span>(<a href="#type-key">key</a> * <a href="#type-spec">spec</a> * <a href="#type-doc">doc</a>)</span> list</span> <a href="../index.html#type-ref">ref</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-anon_fun">anon_fun</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Same as <a href="#val-parse_argv_dynamic"><code>Arg.parse_argv_dynamic</code></a>, except that the <code>argv</code> argument is a reference and may be updated during the parsing of <code>Expand</code> arguments. See <a href="#val-parse_argv_dynamic"><code>Arg.parse_argv_dynamic</code></a>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.05.0</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-parse_expand" class="anchored"><a href="#val-parse_expand" class="anchor"></a><code><span><span class="keyword">val</span> parse_expand : <span><span><span>(<a href="#type-key">key</a> * <a href="#type-spec">spec</a> * <a href="#type-doc">doc</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-anon_fun">anon_fun</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-usage_msg">usage_msg</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Same as <a href="#val-parse"><code>Arg.parse</code></a>, except that the <code>Expand</code> arguments are allowed and the <a href="#val-current"><code>current</code></a> reference is not updated.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.05.0</li></ul></div></div><div class="odoc-spec"><div class="spec exception" id="exception-Help" class="anchored"><a href="#exception-Help" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Help</span> <span class="keyword">of</span> string</span></code></div><div class="spec-doc"><p>Raised by <code>Arg.parse_argv</code> when the user asks for help.</p></div></div><div class="odoc-spec"><div class="spec exception" id="exception-Bad" class="anchored"><a href="#exception-Bad" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Bad</span> <span class="keyword">of</span> string</span></code></div><div class="spec-doc"><p>Functions in <code>spec</code> or <code>anon_fun</code> can raise <code>Arg.Bad</code> with an error message to reject invalid arguments. <code>Arg.Bad</code> is also raised by <a href="#val-parse_argv"><code>Arg.parse_argv</code></a> in case of an error.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-usage" class="anchored"><a href="#val-usage" class="anchor"></a><code><span><span class="keyword">val</span> usage : <span><span><span>(<a href="#type-key">key</a> * <a href="#type-spec">spec</a> * <a href="#type-doc">doc</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-usage_msg">usage_msg</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>Arg.usage speclist usage_msg</code> prints to standard error an error message that includes the list of valid options. This is the same message that <a href="#val-parse"><code>Arg.parse</code></a> prints in case of error. <code>speclist</code> and <code>usage_msg</code> are the same as for <a href="#val-parse"><code>Arg.parse</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-usage_string" class="anchored"><a href="#val-usage_string" class="anchor"></a><code><span><span class="keyword">val</span> usage_string : <span><span><span>(<a href="#type-key">key</a> * <a href="#type-spec">spec</a> * <a href="#type-doc">doc</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-usage_msg">usage_msg</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Returns the message that would have been printed by <a href="#val-usage"><code>Arg.usage</code></a>, if provided with the same parameters.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-align" class="anchored"><a href="#val-align" class="anchor"></a><code><span><span class="keyword">val</span> align : <span>?limit:int <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<a href="#type-key">key</a> * <a href="#type-spec">spec</a> * <a href="#type-doc">doc</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="#type-key">key</a> * <a href="#type-spec">spec</a> * <a href="#type-doc">doc</a>)</span> list</span></span></code></div><div class="spec-doc"><p>Align the documentation strings by inserting spaces at the first alignment separator (tab or, if tab is not found, space), according to the length of the keyword. Use a alignment separator as the first character in a doc string if you want to align the whole string. The doc strings corresponding to <code>Symbol</code> arguments are aligned on the next line.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">limit</span> <p>options with keyword and message longer than <code>limit</code> will not be used to compute the alignment.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-current" class="anchored"><a href="#val-current" class="anchor"></a><code><span><span class="keyword">val</span> current : <span>int <a href="../index.html#type-ref">ref</a></span></span></code></div><div class="spec-doc"><p>Position (in <a href="../Sys/index.html#val-argv"><code>Sys.argv</code></a>) of the argument being processed. You can change this value, e.g. to force <a href="#val-parse"><code>Arg.parse</code></a> to skip some arguments. <a href="#val-parse"><code>Arg.parse</code></a> uses the initial value of <a href="#val-current"><code>Arg.current</code></a> as the index of argument 0 (the program name) and starts parsing arguments at the next element.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-read_arg" class="anchored"><a href="#val-read_arg" class="anchor"></a><code><span><span class="keyword">val</span> read_arg : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string array</span></span></code></div><div class="spec-doc"><p><code>Arg.read_arg file</code> reads newline-terminated command line arguments from file <code>file</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.05.0</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-read_arg0" class="anchored"><a href="#val-read_arg0" class="anchor"></a><code><span><span class="keyword">val</span> read_arg0 : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string array</span></span></code></div><div class="spec-doc"><p>Identical to <a href="#val-read_arg"><code>Arg.read_arg</code></a> but assumes null character terminated command line arguments.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.05.0</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-write_arg" class="anchored"><a href="#val-write_arg" class="anchor"></a><code><span><span class="keyword">val</span> write_arg : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string array</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>Arg.write_arg file args</code> writes the arguments <code>args</code> newline-terminated into the file <code>file</code>. If the any of the arguments in <code>args</code> contains a newline, use <a href="#val-write_arg0"><code>Arg.write_arg0</code></a> instead.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.05.0</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-write_arg0" class="anchored"><a href="#val-write_arg0" class="anchor"></a><code><span><span class="keyword">val</span> write_arg0 : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string array</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Identical to <a href="#val-write_arg"><code>Arg.write_arg</code></a> but uses the null character for terminator instead of newline.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.05.0</li></ul></div></div></div>
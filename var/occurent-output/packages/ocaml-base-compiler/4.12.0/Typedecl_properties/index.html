<div><div class="odoc-spec"><div class="spec type" id="type-decl" class="anchored"><a href="#type-decl" class="anchor"></a><code><span><span class="keyword">type</span> decl</span><span> = <a href="../Types/index.html#type-type_declaration">Types.type_declaration</a></span></code></div></div><p>An abstract interface for properties of type definitions, such as variance and immediacy, that are computed by a fixpoint on mutually-recursive type declarations. This interface contains all the operations needed to initialize and run the fixpoint computation, and then (optionally) check that the result is consistent with the declaration or user expectations.</p><div class="odoc-spec"><div class="spec type" id="type-property" class="anchored"><a href="#type-property" class="anchor"></a><code><span><span class="keyword">type</span> <span>('prop, 'req) property</span></span><span> = </span><span>{</span></code><table><tr id="type-property.eq" class="anchored"><td class="def record field"><a href="#type-property.eq" class="anchor"></a><code><span>eq : <span><span class="type-var">'prop</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'prop</span> <span class="arrow">&#45;&gt;</span></span> bool;</span></code></td></tr><tr id="type-property.merge" class="anchored"><td class="def record field"><a href="#type-property.merge" class="anchor"></a><code><span>merge : <span>prop:<span class="type-var">'prop</span> <span class="arrow">&#45;&gt;</span></span> <span>new_prop:<span class="type-var">'prop</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'prop</span>;</span></code></td></tr><tr id="type-property.default" class="anchored"><td class="def record field"><a href="#type-property.default" class="anchor"></a><code><span>default : <span><a href="#type-decl">decl</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'prop</span>;</span></code></td></tr><tr id="type-property.compute" class="anchored"><td class="def record field"><a href="#type-property.compute" class="anchor"></a><code><span>compute : <span><a href="../Env/index.html#type-t">Env.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-decl">decl</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'req</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'prop</span>;</span></code></td></tr><tr id="type-property.update_decl" class="anchored"><td class="def record field"><a href="#type-property.update_decl" class="anchor"></a><code><span>update_decl : <span><a href="#type-decl">decl</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'prop</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-decl">decl</a>;</span></code></td></tr><tr id="type-property.check" class="anchored"><td class="def record field"><a href="#type-property.check" class="anchor"></a><code><span>check : <span><a href="../Env/index.html#type-t">Env.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Ident/index.html#type-t">Ident.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-decl">decl</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'req</span> <span class="arrow">&#45;&gt;</span></span> unit;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p><code>'prop</code> represents the type of property values (<a href="../Types/Variance/index.html#type-t"><code>Types.Variance.t</code></a>, just 'bool' for immediacy, etc).</p><p><code>'req</code> represents the property value required by the author of the declaration, if they gave an expectation: <code>type +'a t = ...</code>.</p><p>Some properties have no natural notion of user requirement, or their requirement is global, or already stored in <code>type_declaration</code>; they can just use <code>unit</code> as <code>'req</code> parameter.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-compute_property" class="anchored"><a href="#val-compute_property" class="anchor"></a><code><span><span class="keyword">val</span> compute_property : <span><span><span>(<span class="type-var">'prop</span>, <span class="type-var">'req</span>)</span> <a href="#type-property">property</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Env/index.html#type-t">Env.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<a href="../Ident/index.html#type-t">Ident.t</a> * <a href="#type-decl">decl</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'req</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="../Ident/index.html#type-t">Ident.t</a> * <a href="#type-decl">decl</a>)</span> list</span></span></code></div><div class="spec-doc"><p><code>compute_property prop env decls req</code> performs a fixpoint computation to determine the final values of a property on a set of mutually-recursive type declarations. The <code>req</code> argument must be a list of the same size as <code>decls</code>, providing the user requirement for each declaration.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-compute_property_noreq" class="anchored"><a href="#val-compute_property_noreq" class="anchor"></a><code><span><span class="keyword">val</span> compute_property_noreq : <span><span><span>(<span class="type-var">'prop</span>, unit)</span> <a href="#type-property">property</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Env/index.html#type-t">Env.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<a href="../Ident/index.html#type-t">Ident.t</a> * <a href="#type-decl">decl</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="../Ident/index.html#type-t">Ident.t</a> * <a href="#type-decl">decl</a>)</span> list</span></span></code></div></div></div>